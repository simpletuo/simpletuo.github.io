window.__require=function e(t,n,i){function o(a,c){if(!n[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var d="function"==typeof __require&&__require;if(!c&&d)return d(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var h=n[a]={exports:{}};t[a][0].call(h.exports,function(e){return o(t[a][1][e]||e)},h,h.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({AlertTool:[function(e,t,n){"use strict";cc._RF.push(t,"7128bMwCDpDspZ2dLgOzJGz","AlertTool");var i={showModal:function(e,t,n,i){cc.sys.platform==cc.sys.WECHAT_GAME?wx.showModal({title:"\u63d0\u793a",content:e,confirmText:n,confirmColor:"#0a9528",cancelColor:"#646464",cancelText:t,success:function(e){e.confirm?i.confirm():e.cancel&&i.cancel()}}):i.cancel()}};t.exports=i,cc._RF.pop()},{}],AnalyticsUtilities:[function(e,t,n){"use strict";cc._RF.push(t,"0c725qUcwxF0JReYR3VnDwb","AnalyticsUtilities"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.logEvent=function(e,t){return void 0===t&&(t=null),__awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(i){return n="h5",console.info("\u6253\u70b9"+n+": event = "+e+", bundle = "+JSON.stringify(t)),[2]})})},e}();n.default=i,cc._RF.pop()},{}],Bird:[function(e,t,n){"use strict";cc._RF.push(t,"f78c4BEuuVKlabtAjCqYQhL","Bird");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../Common/Util"));cc.Class({extends:cc.Component,properties:{speed:0,trailing:cc.Node,birdIcon:cc.Sprite,progress:cc.ProgressBar},onLoad:function(){cc.systemEvent.on("UPDATE_SELECT_SKIN",this.changeNormalIcon,this),this._type=window.facadeMgr.getComponent("GameModel")._birdType,this._isAlive=!0,this._invincible=!1,this._invincibleTime=0,this.node.getComponent(cc.RigidBody).linearVelocity=new cc.Vec2(this.speed,0)},start:function(){},onEndContact:function(e,t,n){"grass"==n.node.group&&(t.node.getChildByName("bird_huichen").active=!1)},onPreSolve:function(e,t,n){if(this._isAlive&&"thorn"==n.node.group)return cc.systemEvent.emit("GAME_OVER");if(this._isAlive&&"grass"==n.node.group||"ground"==n.node.group){e.getWorldManifold();this._isAlive&&t.node.x<n.node.x&&Math.abs(this.node.y-n.node.y)<this.node.height/2+25-5&&(this._invincible?n.node.y<=-cc.winSize.height/2+50*window.facadeMgr.getComponent("GameModel")._underLineNumber+this.node.width/2||n.node.destroy():cc.systemEvent.emit("GAME_OVER"))}},update:function(e){this._isAlive&&this.changeNormalIcon(),this._invincible?(this.progress.node.active=!0,this._invincibleTime+=e,this.progress.progress=this._invincibleTime/5,this.progress.progress>=1&&(this.progress.node.active=!1)):(this._invincibleTime=0,this.progress.node.active=!1,this.progress.progress=0)},showDeadAnim:function(){var e=this;i.default.GetPrefab("pfb/game/prefab/dead",function(t){var n=cc.instantiate(t);n.active=!0,e.node.addChild(n)})},onBeginContact:function(e,t,n){if(window.facadeMgr.getComponent("GameModel").isGameStart){if(this._isAlive&&"thorn"==n.node.group)return cc.systemEvent.emit("GAME_OVER");if("grass"==n.node.group&&this._isAlive,this._isAlive&&"grass"==n.node.group||"ground"==n.node.group){e.getWorldManifold();this._isAlive&&t.node.x<n.node.x&&Math.abs(this.node.y-n.node.y)<this.node.height/2+25-5&&(this._invincible?n.node.y<=-cc.winSize.height/2+50*window.facadeMgr.getComponent("GameModel")._underLineNumber+this.node.width/2||n.node.destroy():(cc.systemEvent.emit("GAME_OVER"),console.log("\u6e38\u620f\u7ed3\u675f",t.node.x,t.node.y),this.showDeadAnim()))}}},showTrailing:function(){this.trailing.active=!0},hideTrailing:function(){this.trailing.active=!1},setSpeed:function(e){this.speed=e,this.node.getComponent(cc.RigidBody).linearVelocity=new cc.Vec2(this.speed,0)},setBang:function(){this._isAlive=!1,this.node.angle=45,this.node.getComponent(cc.RigidBody).gravityScale=0,this.changeBangIcon()},changeNormalIcon:function(){this._type=window.facadeMgr.getComponent("GameModel")._birdType,cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){window.facadeMgr.getComponent("GameModel")._trialBirdSkin?this.birdIcon.spriteFrame=t.getSpriteFrame(window.facadeMgr.getComponent("GameModel")._birdConfig[Number(window.facadeMgr.getComponent("GameModel")._trialBirdSkin)].birdIcon):this.birdIcon.spriteFrame=t.getSpriteFrame(window.facadeMgr.getComponent("GameModel")._birdConfig[this._type].birdIcon)}.bind(this))},changeBangIcon:function(){this._isAlive=!1,cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){window.facadeMgr.getComponent("GameModel")._trialBirdSkin?this.birdIcon.spriteFrame=t.getSpriteFrame("bang-"+window.facadeMgr.getComponent("GameModel")._trialBirdSkin):this.birdIcon.spriteFrame=t.getSpriteFrame("bang-"+this._type)}.bind(this))}}),cc._RF.pop()},{"../Common/Util":"Util"}],Bullet:[function(e,t,n){"use strict";cc._RF.push(t,"72e516w8c9BLKtcRcuY+zMW","Bullet"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._bird=null,this._pool=null},onBeginContact:function(e,t,n){"grass"!=n.node.group&&"ground"!=n.node.group&&"thorn"!=n.node.group||this._pool},setPool:function(e){this._pool=e},setBird:function(e){this._bird=e},update:function(e){this._bird&&Math.abs(this.node.x-this._bird.x)>cc.winSize.width/2+200?this._pool?this._pool.put(this.node):this.node.destroy():this.node.x+=35},start:function(){setTimeout(function(){this.node&&(this._pool?this._pool.put(this.node):this.node.destroy())}.bind(this),3e3)}}),cc._RF.pop()},{}],ButtonScaler:[function(e,t,n){"use strict";cc._RF.push(t,"a32f2d7UklG8b2ja+3plXvA","ButtonScaler"),cc.Class({extends:cc.Component,properties:{pressedScale:1.1,transDuration:.24},onLoad:function(){var e=this;function t(t){0!=this.getComponent(cc.Button).interactable&&1!=e.pressedScale&&(this.stopAllActions(),this.runAction(e.scaleUpAction))}e.initScale=this.node.scale,e.button=e.getComponent(cc.Button),e.scaleDownAction=cc.scaleTo(e.transDuration,e.pressedScale),e.scaleUpAction=cc.scaleTo(e.transDuration,e.initScale),this.node.on("touchstart",function(t){0!=this.getComponent(cc.Button).interactable&&(1!=e.pressedScale&&(this.stopAllActions(),this.runAction(e.scaleDownAction)),window.audioMgr.getComponent("SoundManager").playEffect("click"))},this.node),this.node.on("touchend",t,this.node),this.node.on("touchcancel",t,this.node)}}),cc._RF.pop()},{}],CollectAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"10cf0X0ehtP/JQmZjtsmbwi","CollectAnimation"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e){this.mCloneNode=null,this.mCloneNode=e,this.mNodePool=new cc.NodePool;for(var t=0;t<10;t++){var n=cc.instantiate(this.mCloneNode);this.mNodePool.put(n)}}return e.prototype.getNode=function(){return this.mNodePool.size()>0?this.mNodePool.get():cc.instantiate(this.mCloneNode)},e.prototype.playAnimation=function(e,t,n,i,o,s,a){void 0===i&&(i=null);var c=[];e.scale=0;var r=cc.spawn(cc.scaleTo(o,1).easing(cc.easeOut(3)),cc.moveTo(o,n).easing(cc.easeOut(3))),d=a*(1+Math.random())/2;c.push(r),c.push(cc.delayTime(s)),c.push(cc.moveTo(d,t).easing(cc.easeIn(3))),c.push(cc.callFunc(function(){i&&i(),this.mNodePool.put(e)},this)),e.stopAllActions(),e.runAction(cc.sequence(c))},e.prototype.play=function(e,t,n,i,o,s,a,c){void 0===o&&(o=null),void 0===s&&(s=.6),void 0===a&&(a=0),void 0===c&&(c=.8);for(var r=0;r<n;r++){var d=360/n*r,h=e.x+(i-.2*i*Math.random())*Math.cos(d*Math.PI/180),l=e.y+(i-.2*i*Math.random())*Math.sin(d*Math.PI/180),u=cc.v2(h,l),g=this.getNode();g.parent=cc.find("Canvas"),g.position=e,g.zIndex=cc.macro.MAX_ZINDEX,g.active=!0,this.playAnimation(g,t,u,o,s,a,c)}},e}();n.default=i,cc._RF.pop()},{}],Config:[function(e,t,n){"use strict";cc._RF.push(t,"df92dFT2NNKdoQsW078xSkD","Config"),Object.defineProperty(n,"__esModule",{value:!0}),n.diciConfig=void 0;var i={1:[cc.color(228,228,228),cc.color(0,104,185,.6)],2:[cc.color(250,190,0),cc.color(241,171,25,.6)],3:[cc.color(255,174,174),cc.color(209,110,110,.6)],4:[cc.color(4,236,4),cc.color(23,192,0,.6)],5:[cc.color(24,24,29),cc.color(0,0,0,.6)],6:[cc.color(7,146,255),cc.color(0,104,185,.6)]};n.diciConfig=i,cc._RF.pop()},{}],CountDown:[function(e,t,n){"use strict";cc._RF.push(t,"9134bxbgD5I6Kb2a7wXyu2w","CountDown"),cc.Class({extends:cc.Component,properties:{numberLabel:cc.Label},startCountDown:function(e){this.node.active=!0,this.numberLabel.string=e,e<=0?cc.systemEvent.emit("BACK_GAME_COUNTDOWN_OVER"):setTimeout(function(){this.startCountDown(e-1)}.bind(this),1e3)},start:function(){},onDisable:function(){},onDestroy:function(){},onEnable:function(){}}),cc._RF.pop()},{}],Egg:[function(e,t,n){"use strict";cc._RF.push(t,"fb067maf/BEdYiP7r7wkdHu","Egg");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../Common/Util")),o=e("./Config");cc.Class({extends:cc.Component,properties:{speed:0,eggIcon:cc.Sprite},onEndContact:function(e,t,n){"grass"==n.node.group&&(t.node.getChildByName("bird_huichen").active=!1)},onBeginContact:function(e,t,n){var s=this;this._enable&&("bird"!=n.node.group||n.node.getComponent("Bird")._isAlive||(e.disabled=!0),"thorn"==n.node.group&&(this.eggIcon.node.active=!1,this._enable=!1,i.default.GetPrefab("pfb/game/prefab/bird_dici",function(e){var n=cc.instantiate(e);n.active=!0,s.node.addChild(n);var i=window.facadeMgr.getComponent("GameModel")._birdType||"1",a=n.getComponent(cc.ParticleSystem);a&&(a.startColor=o.diciConfig[i][0],a.endColor=o.diciConfig[i][1]),s.node.removeComponent(cc.RigidBody),setTimeout(function(){t.node&&t.node.isValid&&t.node.destroy()},500)})),"grass"!=n.node.group&&"ground"!=n.node.group||Math.abs(t.node.y-n.node.y)<55&&(t.node._isStop=!0,this.setSpeed(-300)),n.node.group)},changeNormal:function(){this._type=window.facadeMgr.getComponent("GameModel")._birdType,cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){this.node&&this.node.isValid&&(window.facadeMgr.getComponent("GameModel")._trialBirdSkin?this.eggIcon.spriteFrame=t.getSpriteFrame(window.facadeMgr.getComponent("GameModel")._birdConfig[Number(window.facadeMgr.getComponent("GameModel")._trialBirdSkin)].eggIcon):this.eggIcon.spriteFrame=t.getSpriteFrame(window.facadeMgr.getComponent("GameModel")._birdConfig[this._type].eggIcon))}.bind(this)),this.node._isStop=!1,this.setSpeed(0)},start:function(){this._type=window.facadeMgr.getComponent("GameModel")._birdType,cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){window.facadeMgr.getComponent("GameModel")._trialBirdSkin?this.eggIcon.spriteFrame=t.getSpriteFrame(window.facadeMgr.getComponent("GameModel")._birdConfig[Number(window.facadeMgr.getComponent("GameModel")._trialBirdSkin)].eggIcon):this.eggIcon.spriteFrame=t.getSpriteFrame(window.facadeMgr.getComponent("GameModel")._birdConfig[this._type].eggIcon)}.bind(this))},setSpeed:function(e){this.speed=e,this.node.getComponent(cc.RigidBody).linearVelocity=new cc.Vec2(this.speed,0)},onLoad:function(){cc.systemEvent.on("UPDATE_SELECT_SKIN",this.changeNormal,this),this._type=window.facadeMgr.getComponent("GameModel")._birdType,this._enable=!0,this.node.getComponent(cc.RigidBody).linearVelocity=new cc.Vec2(this.speed,0)}}),cc._RF.pop()},{"../Common/Util":"Util","./Config":"Config"}],EventEmit:[function(e,t,n){"use strict";cc._RF.push(t,"916d9/lq2dIuZPCsjRtLdvM","EventEmit");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../platform/analytics/AnalyticsUtilities"));cc.Class({extends:cc.Component,properties:{camera:cc.Node,selectSkinPfb:cc.Prefab,nowLv:cc.Label,curLv:cc.Label,nextLv:cc.Label,topNode:cc.Node,progress:cc.ProgressBar,midLabel:cc.Label,goldPanel:cc.Node,bestScore:cc.Label,startBtn:cc.Node,mainUI:cc.Node,signInBtn:cc.Node,guidePfb:cc.Prefab,guang:cc.Sprite,todayGoldResidueCount:cc.Label},onLoad:function(){console.log(cc.director.getScene()),cc.systemEvent.on("CLEAR_PERFECT_ICON",this.clearPrefectIcon,this),cc.systemEvent.on("SHOW_PERFECT_ICON",this.showPrefectIcon,this),cc.systemEvent.on("SIGN_IN_STATE",this.checkSignInDot,this),cc.systemEvent.on("CHANGE_BEST_SCORE",this.changeBestScord,this),cc.systemEvent.on("CHANGE_CASH",this.changeCash,this),cc.systemEvent.on("RESET_GAME",this.showIncisor,this),cc.systemEvent.on("START_GAME",this.hideIncisor,this),cc.systemEvent.on("SHOW_GUIDE",this.showGuide,this),cc.systemEvent.on("CHANGE_GET_GOLD",this.changeGetGold,this),cc.systemEvent.on("PLAY_GOLD_ANIMATION",this.playGoldCollectAnimation,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this._perfectIconArr=[],this._showPerfectCount=0},onClickBanner:function(){},checkSignInDot:function(){facadeMgr.getComponent("GameModel").fetchDays;var e=Math.floor(facadeMgr.getComponent("GameModel").lastFetchSignInTime/86400/1e3),t=Math.floor(facadeMgr.getComponent("GameModel").getLocalTime()/86400/1e3);console.log(e,"time"),console.log(t,"today"),this.signInBtn.getChildByName("dot").active=e<t},changeCash:function(){this.goldPanel.getChildByName("goldNumber").getComponent(cc.Label).string=Number(window.facadeMgr.getComponent("GameModel").cash)},playGoldCollectAnimation:function(){window.goldCollectAnimation.play(cc.v2(this.camera.x,0),cc.v2(this.goldPanel.x+this.camera.x,this.goldPanel.y),5,200)},start:function(){this.changeCash(),this.checkSignInDot(),this.checkSignInShow(),this.changeGetGold(),facadeMgr.SAVE_MODE||(this.goldPanel.getChildByName("goldNumber").getComponent(cc.Label).string=window.facadeMgr.getComponent("GameModel").cash)},getProgress:function(){return this.progress.progress},hideTopNode:function(){this.topNode.active=!1},changeProgress:function(e){this.progress.progress=e,this.reportProgress()},reportProgress:function(){1==window.facadeMgr.getComponent("GameModel")._level&&(this.progressAnalytics||(this.progressAnalytics=10),100*this.progress.progress>=this.progressAnalytics&&(i.default.logEvent("game_progress",{gameLevel:window.facadeMgr.getComponent("GameModel")._level,progress:this.progressAnalytics+"%"}),10===this.progressAnalytics?this.progressAnalytics=30:30===this.progressAnalytics?this.progressAnalytics=50:50===this.progressAnalytics?this.progressAnalytics=70:70===this.progressAnalytics&&(this.progressAnalytics=200)))},resetProgress:function(){this.progress.progress=0},changeBestScord:function(){this.bestScore.string=window.facadeMgr.getComponent("GameModel")._bestScore,this.bestScore.node.getChildByName("lvLabel").getComponent(cc.Label).string="Lv."+window.facadeMgr.getComponent("GameModel")._level},showTopNode:function(){this.topNode.active=!0,this.changeLv(),i.default.logEvent("game_start",{gameLevel:window.facadeMgr.getComponent("GameModel")._level})},update:function(e){},onStartGameState:function(){this.goldPanel.active=!0,this.mainUI.active=!1,this.startBtn.active=!1,this.showTopNode(),this.bestScore.node.active=!1},onReadyGameState:function(){this.clearPrefectIcon(),this.goldPanel.active=!0,this.startBtn.active=!0,this.hideTopNode(),this.bestScore.node.active=!1,this.changeBestScord(),this.resetProgress(),this.changeLv(),this.mainUI.active=!0},changeLv:function(){this.nowLv.string="Lv."+window.facadeMgr.getComponent("GameModel")._level,this.curLv.string="Lv."+window.facadeMgr.getComponent("GameModel")._level,this.midLabel.string=window.facadeMgr.getComponent("GameModel")._nowScore,this.nextLv.string="Lv."+(window.facadeMgr.getComponent("GameModel")._level+1)},changeScoreLabel:function(e){this.midLabel.string=e},checkSignInShow:function(){var e=facadeMgr.getComponent("GameModel").lastFetchSignInTime;e=null==e?0:Math.floor(e/864e5);var t=Math.floor(facadeMgr.getComponent("GameModel").getLocalTime()/86400/1e3);console.log(e,"time"),console.log(t,"today")},onShowSignIn:function(){popUpMgr.getComponent("Pop").addPopByName("SignIn",null,!0)},onShowGetGold:function(){popUpMgr.getComponent("Pop").addPopByName("GetGold",null,!0)},onShowRank:function(){popUpMgr.getComponent("Pop").addPopByName("RankView",null,!0)},onShowGameBox:function(){popUpMgr.getComponent("Pop").addPopByName("moreGame/GameBox",null,!0,!0)},onShowCollectGift:function(){},onShowSetting:function(){popUpMgr.getComponent("Pop").addPopByName("Setting",null,!0)},onShowSkin:function(){var e=cc.instantiate(this.selectSkinPfb);cc.director.getScene().getChildByName("Canvas").addChild(e),e.x=this.node.x,e.y=this.node.y,e.zIndex=9999},onShowGuide:function(){this.showHelp()},onShowWelfare:function(){},showPrefectIcon:function(){if(console.log("showPrefectIcon"),!(this._showPerfectCount>=3)){this._showPerfectCount++;var e=new cc.Node,t=e.addComponent(cc.Sprite);this.progress.node.addChild(e),cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,n){if(t&&t.isValid){window.facadeMgr.getComponent("GameModel")._birdType;t.spriteFrame=n.getSpriteFrame("niao2")}}.bind(this)),e.y=-55,e.x=100*(this._showPerfectCount-1)-100,e.scale=1,this._perfectIconArr.push(e)}},showHelp:function(){var e=cc.instantiate(this.guidePfb);cc.director.getScene().getChildByName("Canvas").addChild(e),e.getComponent("Guide").justShow=!1,e.x=this.node.x,e.y=this.node.y,e.zIndex=9999},showGuide:function(){if(!facadeMgr.SAVE_MODE&&0==window.facadeMgr.getComponent("GameModel")._showGuide&&1==window.facadeMgr.getComponent("GameModel")._level){var e=cc.instantiate(this.guidePfb);cc.director.getScene().getChildByName("Canvas").addChild(e),e.x=this.node.x,e.y=this.node.y,e.zIndex=9999}},hideIncisor:function(){this.node.getChildByName("incisor1")&&(this.node.getChildByName("incisor1").active=!1),this.node.getChildByName("incisor2")&&(this.node.getChildByName("incisor2").active=!1)},clearPrefectIcon:function(){for(var e=0;e<this._perfectIconArr.length;e++){this._perfectIconArr[e].destroy()}this._perfectIconArr=[],this._showPerfectCount=0},onTouchStart:function(){cc.systemEvent.emit("TOUCH_START")},onTouchMove:function(){cc.systemEvent.emit("TOUCH_MOVE")},onTouchEnd:function(){cc.systemEvent.emit("TOUCH_END")},showIncisor:function(){this.node.getChildByName("incisor1")&&(this.node.getChildByName("incisor1").active=!0),this.node.getChildByName("incisor2")&&(this.node.getChildByName("incisor2").active=!0)},changeGetGold:function(){this.todayGoldResidueCount.string=window.facadeMgr.getComponent("GameModel").getTodayGoldResidueCount()}}),cc._RF.pop()},{"../platform/analytics/AnalyticsUtilities":"AnalyticsUtilities"}],Facade:[function(e,t,n){"use strict";cc._RF.push(t,"0f855G/so9G9YWEYm9sZpaK","Facade"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.reEnter=!1,this.node.VERSION=1001,this.node.isShareOut=!1,this.node.lastSessionid="0",this.node.canShowShareGroup=!0,this.node.FloatOrder=11e3,this.node.PopOrder=9999,this.node.isEnteredGame=!1,this.node.SAVE_MODE=!1,this.node.FOR_DEVELOP=!1,this.node.token="",this.node.wxAppId="wx6a559fce2889ed4c"}}),cc._RF.pop()},{}],FloatTip:[function(e,t,n){"use strict";cc._RF.push(t,"4d2446SQc9EDZGKyL3AJlKY","FloatTip"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},hideFloat:function(){this.floatNode&&(this.floatNode.removeFromParent(),this.floatNode=null)},runFloat:function(){this.floatNode.opacity=255,this.floatNode.runAction(cc.sequence(cc.delayTime(1),cc.spawn(cc.moveBy(1,cc.v2(0,50)),cc.fadeOut(1)),cc.callFunc(this.hideFloat,this)))},showTip:function(e){null==this.floatNode?cc.loader.loadRes("pfb/FloatTip",function(t,n){this.floatNode=cc.instantiate(n),this.floatNode.getChildByName("Label").getComponent(cc.Label).string=e,cc.director.getScene().addChild(this.floatNode,window.facadeMgr.FloatOrder),this.floatNode.setPosition(cc.winSize.width/2,cc.winSize.height/2),this.runFloat()}.bind(this)):(this.floatNode.getChildByName("Label").getComponent(cc.Label).string=e,this.floatNode.stopAllActions(),this.floatNode.opacity=255,this.floatNode.setPosition(cc.winSize.width/2,cc.winSize.height/2),this.runFloat())}}),cc._RF.pop()},{}],GameBarItem:[function(e,t,n){"use strict";cc._RF.push(t,"e8009ai7zxA56fp5VP4ghmE","GameBarItem");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("./GameMoreManager"));cc.Class({extends:cc.Component,properties:{gaemIcon:cc.Sprite},onload:function(){},setData:function(e){var t=this;this.info=e,e&&e.appId&&-1!=e.icon.indexOf("http")&&cc.loader.load({url:e.icon,type:"png"},null,function(e,n){t.gaemIcon.spriteFrame=new cc.SpriteFrame(n)})},onClick:function(){i.default.navigateToMiniProgram(this.info.appId,this.from)}}),cc._RF.pop()},{"./GameMoreManager":"GameMoreManager"}],GameBar:[function(e,t,n){"use strict";cc._RF.push(t,"39f72c63yRD+ISErUB/EPui","GameBar");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("./GameMoreManager"));cc.Class({extends:cc.Component,properties:{moreItem:cc.Prefab,content:cc.Node},onLoad:function(){var e=this;i.default.requestMoreGameList(function(t){e.getMoreSuccess(t)})},getMoreSuccess:function(e){if(!e||e.length<=3)return this.node.active=!1,void console.log("hide game bar :",e);this._data=e;for(var t=e.length,n=0;n<t;n++){var i=cc.instantiate(this.moreItem);i.x=150*n,this.content.addChild(i),i.getComponent("GameBarItem").from="GameBar",i.getComponent("GameBarItem").setData(e[n])}this.startTween()},startTween:function(){var e=this,t=cc.moveBy(2,-150,0),n=0,i=1,o=this._data.length;this.content.runAction(cc.repeatForever(cc.sequence(t,cc.callFunc(function(){e.content.children[n].x=150*(i*o+n),++n>=o&&(n=0,i++)},this))))},onDestroy:function(){}}),cc._RF.pop()},{"./GameMoreManager":"GameMoreManager"}],GameBox:[function(e,t,n){"use strict";cc._RF.push(t,"35e43GqcCZGT5f0Q0UnAFFf","GameBox");var i=e("GameMoreManager");cc.Class({extends:cc.Component,properties:{content:cc.Node,prefab:cc.Prefab},onLoad:function(){var e=this;i.requestMoreGameList(function(t){e.getMoreSuccess(t)})},getMoreSuccess:function(e){for(var t=0,n=e.length;t<n;t++){var i=cc.instantiate(this.prefab);this.content.addChild(i),i.getComponent("GameGridItem").from="GameBox",i.getComponent("GameGridItem").setData(e[t])}},onClose:function(){popUpMgr.getComponent("Pop").removeTop()}}),cc._RF.pop()},{GameMoreManager:"GameMoreManager"}],GameControl:[function(e,t,n){"use strict";cc._RF.push(t,"a35377M0PhCgYBx5NYmR2p9","GameControl");var i=s(e("../Common/Util")),o=s(e("../platform/analytics/AnalyticsUtilities"));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=r(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,s=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}function r(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}e("GameMoreManager");cc.Class({extends:cc.Component,properties:{countDown:cc.Node,bg:cc.Node,mainUI:cc.Node,touchEventNode:cc.Node,camera:cc.Node,birdPfb:cc.Prefab,eggPfb:cc.Prefab,groundPfb:cc.Prefab,grassPfb:cc.Prefab,thronPfb:cc.Prefab,sensorPfb:cc.Prefab,homePfb:cc.Prefab,resultPfb:cc.Prefab,gamePagePfb:cc.Prefab,bulletPfb:cc.Prefab,spObPfb:cc.Prefab,gameBar:cc.Node,recommendNode:cc.Node,bgEffect:cc.Node,perfectNode:cc.Sprite,guang:cc.Sprite,heart:cc.Node,gold:cc.Node,debugNode:cc.Node,recommendItemArr:[cc.Node]},resetMap:function(){audioMgr.getComponent("SoundManager").setBGMVolume(100),window.facadeMgr.getComponent("GameModel")._trialBirdSkin=null,this.countDown.active=!1,this.countDown.zIndex=9999;for(var e=0;e<this._eggPool.length;e++){var t=this._eggPool[e];t&&t._parent&&this._eggNodePool.put(t)}this._eggPool=[];var n,i=c(this._obstaclePool);try{for(i.s();!(n=i.n()).done;){var o=n.value;o&&o._parent&&("ground"==o.group?o.getComponent("Ground")&&o.getComponent("Ground")._enable?this._groundPool.put(o):o.destroy():"grass"==o.group?o.getComponent("Grass")&&o.getComponent("Grass")._enable?this._grassPool.put(o):o.destroy():"thorn"==o.group?this._thornPool.put(o):o.destroy())}}catch(e){i.e(e)}finally{i.f()}this._obstaclePool=[];var s,a=c(this._spObPool);try{for(a.s();!(s=a.n()).done;){var r=s.value;r&&r._parent&&this._spObNodePool.put(r)}}catch(e){a.e(e)}finally{a.f()}this._spObPool=[],this._homePanel&&this._homePanel._parent&&(this._homePanel.active=!1),this._homePanel=null,this._needCreateObstacle=!0,this.touchEventNode.x=0,this.bg.x=this.touchEventNode.x,this.touchEventNode.getComponent("EventEmit").onReadyGameState(),this.touchEventNode.zIndex=9,this.camera.x=0,this._gameOver=!1,this._totalGroundLength=0,this._nowGroundLength=0,this._nowObstacleNumber=0,this._mapConfig=[],this._topObConfig=[],this._mapConfigIndex=0,this._speed=5,this._startBullet=!1,this._perfectCount=0,this._perfectCountDisTime=150,this._lastPerfectTime=0,this._bangNumber=0,this._startEndStage=!1,this._endStageLastDeleteEggTime=0,this._backGameCount=1,this._isWin=!1,this._showResult=!1,this.showHeartAnimState=!1,window.facadeMgr.getComponent("GameModel")._lastMapConfig&&window.facadeMgr.getComponent("GameModel")._lastMapConfig.length&&window.facadeMgr.getComponent("GameModel")._lastMapConfig.length>0?(this._mapConfig=window.facadeMgr.getComponent("GameModel")._lastMapConfig,this._topObConfig=window.facadeMgr.getComponent("GameModel")._lastTopObConfig):(this.createMapConfig(),window.facadeMgr.getComponent("GameModel")._lastTopObConfig=this._topObConfig,window.facadeMgr.getComponent("GameModel").setLastMapConfig(this._mapConfig)),this.calculationTotalLength(),this._nowLvScore=0,this._scoreCoefficient=this.getScroeCoefficient(),this._atkObstacleNumer=0,this._showAniCount=0,this.createMap(),this.createBird(),this.resetBgParticle(),this.resetBg()},onLoad:function(){o.default.logEvent("on_main_ui"),this.touchEventNode.zIndex=9,this.mainUI.zIndex=10,this.initPool(),cc.systemEvent.on("LONGRECOMMEND_SHOW_RESULT",this.showResultPanel,this),cc.systemEvent.on("START_GAME",this.startGame,this),cc.systemEvent.on("GAME_OVER",this.gameOver,this),cc.systemEvent.on("BACK_GAME",this.backGame,this),cc.systemEvent.on("BACK_GAME_COUNTDOWN_OVER",this.backGameCountDownOver,this),cc.systemEvent.on("TOUCH_START",this.onTouchStart,this),cc.systemEvent.on("TOUCH_MOVE",this.onTouchMove,this),cc.systemEvent.on("TOUCH_END",this.onTouchEnd,this),cc.systemEvent.on("CHANGE_GRAVITYSCALE",this.changeGravity,this),cc.systemEvent.on("RESET_GAME",this.resetMap,this),cc.systemEvent.on("PERFECT",this.showPerfect,this),cc.systemEvent.on("DOACT",this.CheckObstacleDoAct,this),cc.systemEvent.on("ADD_ATK_NUMBER",this.addAtkNumber,this),cc.systemEvent.on("SHOW_DEAD",this.showDead,this),cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().debugDrawFlags=0,this._obstacleConfig=window.facadeMgr.getComponent("GameModel")._obstacleConfig,this.moveSpeed=300,this._eggPool=[],this._obstaclePool=[],this._spObPool=[],this._totalGroundLength=0,this._allObstacleNumber=15,this._dis=60,this._beginPosY=-cc.winSize.height/2+25,this._speed=5,this._crateEggTimeDis=200,this._createBulletTimeDis=120,this._endStageDeleteEggTimeDis=300,this._randomNum=this._obstacleConfig.length,this._underLineNumber=5,this._topLineNumber=3,this._birdPosX=-cc.winSize.width/2+150,this._birdPosY=-cc.winSize.height/2+this._dis*(this._underLineNumber+1)+50,this._nowObstacleNumber=0,this._needCreateObstacle=!0,this._mapConfig=[],this._topObConfig=[],this._scoreCoefficient=0,this._nowLvScore=0,this.showHeartAnimState=!1,this.setupUserLogin()},speedUpBgParticle:function(){this.bgEffect.getComponent(cc.ParticleSystem).gravity=cc.v2(-1e3,0)},onClickBanner:function(){},initPool:function(){this._groundPool=new cc.NodePool,this._grassPool=new cc.NodePool,this._thornPool=new cc.NodePool;for(var e=0;e<12;e++){var t=cc.instantiate(this.thronPfb);this._thornPool.put(t)}this._eggNodePool=new cc.NodePool;for(var n=0;n<12;n++){var i=cc.instantiate(this.eggPfb);this._eggNodePool.put(i)}this._bulletPool=new cc.NodePool;for(var o=0;o<12;o++){var s=cc.instantiate(this.bulletPfb);this._bulletPool.put(s)}this._spObNodePool=new cc.NodePool},loadEffectSetting:function(){var e=cc.sys.localStorage.getItem("Effect");"true"!=e&&(e="true",cc.sys.localStorage.setItem("Effect",e)),window.Effect=e;var t=cc.sys.localStorage.getItem("Shock");"true"!=t&&(t="true",cc.sys.localStorage.setItem("Shock",t)),window.Shock=t,Effect},resetBgParticle:function(){this.bgEffect.getComponent(cc.ParticleSystem).gravity=cc.v2(-30,0)},start:function(){this.resetMap(),audioMgr.getComponent("SoundManager").setBGM("bg")},createMapConfig:function(){if(!(this._nowObstacleNumber>=this._allObstacleNumber)){var e=Math.floor(Math.random()*this._randomNum);if(this._obstacleConfig[e]){if(this._nowObstacleNumber+=Number(this._obstacleConfig[e].obstacleNum),this._mapConfig.push(e),e>=-1&&e<=8){var t={_obId:-1};if(Math.floor(100*Math.random())>50){var n=Math.floor(8*Math.random());8==n&&(n=7),5==e?n>1&&n<=5&&(n=-1):4==e?n>2&&n<=5&&(n=-1):3==e?n>3&&n<=5&&(n=-1):2==e&&n>3&&n<=5&&(n=-1),t._obId=n}var i=Math.floor(4*Math.random())*this._dis;t._dis=i,Math.random()<.5&&(t._dis=-i),this._topObConfig.push(t)}else this._topObConfig.push({_obId:-1,_dis:0});return this.createMapConfig()}}},startGame:function(){audioMgr.getComponent("SoundManager").setBGMVolume(75),this.speedUpBgParticle(),console.log("this._eggPool:",this._eggPool,this._eggPool.length);for(var e=0;e<this._eggPool.length;e++){var t=this._eggPool[e];t&&t._parent&&(t.getComponent("Egg").changeNormal(),this._eggNodePool.put(t))}this._eggPool=[];var n,i=c(this._obstaclePool);try{for(i.s();!(n=i.n()).done;){var o=n.value;o&&o._parent&&(o.active=!0)}}catch(e){i.e(e)}finally{i.f()}var s,a=c(this._spObPool);try{for(a.s();!(s=a.n()).done;){var r=s.value;r&&r._parent&&(r.active=!0)}}catch(e){a.e(e)}finally{a.f()}window.facadeMgr.getComponent("GameModel").deleteEnercy(),this.touchEventNode.getComponent("EventEmit").onStartGameState(),window.facadeMgr.getComponent("GameModel").isGameStart=!0,this._birdLead&&(this._birdLead.y=-cc.winSize.height/2+5*this._dis+32,this._birdLead.getComponent("Bird").showTrailing(),this._birdLead.getComponent("Bird").changeNormalIcon())},endStageFunc:function(){var e,t=this,n=c(this._eggPool);try{var i=function(){var n=e.value;if(n&&n._parent&&Math.abs(n.x-t._birdLead.x)<t._dis/2)return t._endStageLastDeleteEggTime=window.facadeMgr.getComponent("GameModel").getLocalTime(),t.showGoldAnim(),n.runAction(cc.sequence(cc.scaleTo(.2,.7),cc.callFunc(function(){t._eggNodePool.put(n)}))),window.facadeMgr.getComponent("PlayerModel").wxAdaptor&&window.facadeMgr.getComponent("PlayerModel").wxAdaptor.vibrateShort(),{v:void 0}};for(n.s();!(e=n.n()).done;){var o=i();if("object"===a(o))return o.v}}catch(e){n.e(e)}finally{n.f()}},waitAni:function(){var e,t=0,n=null,i=c(this._eggPool);try{for(i.s();!(e=i.n()).done;){var o=e.value;o&&o._parent?n?o.y<n.y&&(n=o):n=o:t++}}catch(e){i.e(e)}finally{i.f()}this._eggNodePool.put(n),t==this._eggPool.length&&(this._showAniCount=0)},addAtkNumber:function(){this._atkObstacleNumer++},gameOver:function(){if(!this._gameOver){window.audioMgr.getComponent("SoundManager").playEffect("DeadBird"),"true"==window.Shock&&window.facadeMgr.getComponent("PlayerModel").wxAdaptor&&window.facadeMgr.getComponent("PlayerModel").wxAdaptor.vibrateLong(),this._isWin=!1,window.facadeMgr.getComponent("GameModel")._nowScore=0,window.facadeMgr.getComponent("GameModel")._lastBangX=this._birdLead.x,window.facadeMgr.getComponent("GameModel")._lastBangY=this._birdLead.y,window.facadeMgr.getComponent("GameModel").saveData(),console.log("\u6e38\u620f\u7ed3\u675f"),window.facadeMgr.getComponent("GameModel").isGameStart=!1,this._gameOver=!0,this._startBullet=!1,this._birdLead.getComponent("Bird").changeBangIcon(),this._birdLead.getComponent("Bird").setSpeed(-300),this._birdLead.getComponent(cc.RigidBody).fixedRotation=!1;var e,t=c(this._eggPool);try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&n._parent&&n.getComponent(cc.RigidBody)&&(n.getComponent(cc.RigidBody).linearDamping=4)}}catch(e){t.e(e)}finally{t.f()}this.shakeScreen(),this.showResult(!1)}},changeGravity:function(e){var t,n=0,i=c(this._eggPool);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o&&o._parent){var s=6-.5*n;s<=4&&(s=4),n++,o.getComponent(cc.RigidBody)&&(o.getComponent(cc.RigidBody).gravityScale=s)}}}catch(e){i.e(e)}finally{i.f()}},startBullet:function(){this._startBullet=!0,this._birdLead.getComponent("Bird")._invincible=!0,this._lastCreateBulletTime=0,setTimeout(function(){this._birdLead.getComponent("Bird")._invincible=!1,this._startBullet=!1,this._perfectCount=0,cc.systemEvent.emit("CLEAR_PERFECT_ICON"),this.resetBg(),this.guang.node.active=!0;var e=cc.sequence(cc.fadeTo(.1,170),cc.delayTime(.05),cc.fadeOut(.1));this.guang.node.runAction(e)}.bind(this),5e3)},startEndStage:function(){this._startEndStage||(this._startEndStage=!0)},getScroeCoefficient:function(){var e=window.facadeMgr.getComponent("GameModel")._level;return Number(e)<=10?1.2:Number(e)<=20?1.6:Number(e)<=40?2.2:Number(e)<=50?2.8:4},showPerfect:function(){if(!this._startBullet){var e=window.facadeMgr.getComponent("GameModel").getLocalTime();if(!(e-this._lastPerfectTime<this._perfectCountDisTime)){cc.systemEvent.emit("SHOW_PERFECT_ICON"),this._perfectCount++,this._lastPerfectTime=e;var t="perfect";if(window.facadeMgr.getComponent("PlayerModel").wxAdaptor&&window.facadeMgr.getComponent("PlayerModel").wxAdaptor.vibrateShort(),this._perfectCount>=3){this.startBullet(),t="fever",this.changeBg(),this.guang.node.active=!0;var n=cc.sequence(cc.fadeTo(.1,170),cc.delayTime(.05),cc.fadeOut(.1));this.guang.node.runAction(n)}cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,n){this.perfectNode.spriteFrame=n.getSpriteFrame(t)}.bind(this)),this.perfectNode.node.scale=.5,this.perfectNode.node.active=!0,this.perfectNode.node.opacity=0;var i=cc.sequence(cc.spawn(cc.scaleTo(.3,1),cc.fadeIn(.1)),cc.delayTime(.1),cc.fadeOut(.2));this.perfectNode.node.runAction(i),this.guang.node.active=!0;n=cc.sequence(cc.fadeTo(.1,170),cc.delayTime(.05),cc.fadeOut(.1));this.guang.node.runAction(n)}}},resetBg:function(){cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){this.bg.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("bg3")}.bind(this))},changeBg:function(){cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){this.bg.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("bg3-1")}.bind(this))},getObCountByPosX:function(e){var t,n=0,i=c(this._obstaclePool);try{for(i.s();!(t=i.n()).done;){var o=t.value;o&&o._parent&&o.y>-cc.winSize.height/2+5*this._dis&&o.y<cc.winSize.height/2-3*this._dis&&Math.abs(o.x-e)<this._dis&&n++}}catch(e){i.e(e)}finally{i.f()}return n},checkEffectiveEggCount:function(){var e,t=0,n=c(this._eggPool);try{for(n.s();!(e=n.n()).done;){var i=e.value;i&&i._parent&&Math.abs(i.x-this._birdLead.x)<this._dis/2&&t++}}catch(e){n.e(e)}finally{n.f()}return t},checkEffectiveEgg:function(){var e,t=c(this._eggPool);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n&&n._parent&&Math.abs(n.x-this._birdLead.x)<this._dis/2)return!0}}catch(e){t.e(e)}finally{t.f()}return!1},startSettlement:function(){this.checkEffectiveEgg()?(this.endStageFunc(),this.startSettlement()):this.showResult(!0)},showResult:function(e){if(!this._showResult){this._showResult=!0;var t=this.touchEventNode.getComponent("EventEmit").getProgress(),n=(100*t).toFixed(0)<0?0:(100*t).toFixed(0),i={getScore:this._nowLvScore,bestScore:window.facadeMgr.getComponent("GameModel")._bestScore,isShowBackGame:this._backGameCount,progress:t,num:n};if(i.isWin=e,i.level=window.facadeMgr.getComponent("GameModel")._level,i.isWin){i.level--,window.facadeMgr.getComponent("GameModel").addBirdByLv();window.facadeMgr.getComponent("GameModel").getResultCount();this.showResultPanel(i),window.facadeMgr.getComponent("GameModel").addResultCount()}else this.showResultPanel(i)}},showGamePage:function(e){var t=this,n=cc.instantiate(this.gamePagePfb);cc.director.getScene().getChildByName("Canvas").addChild(n),n.x=this.touchEventNode.x,n.y=this.touchEventNode.y,n.width=cc.winSize.width,n.height=cc.winSize.height,n.zIndex=1999,this.gameBar.active=!1,n.getComponent("GamePage").onCloseFun=function(){t.gameBar.active=!0,t.showResultPanel(e,!1)}},showResultPanel:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=cc.instantiate(this.resultPfb);cc.director.getScene().getChildByName("Canvas").addChild(n),n.getComponent("ResultPanel").initUI(e),n.x=this.touchEventNode.x,n.y=this.touchEventNode.y,n.width=cc.winSize.width,n.height=cc.winSize.height,console.log(),n.zIndex=19999,t?(n.active=!1,setTimeout(function(){n.active=!0,n.scale=.5,n.runAction(cc.scaleTo(.1,1)),e.isWin&&window.audioMgr.getComponent("SoundManager").playEffect("win"),i.default.DelayShowInterstitial()},2e3)):i.default.DelayShowInterstitial()},backGameCountDownOver:function(){this.countDown.active=!1,this._gameOver=!1,this._perfectCount=0,this._startBullet=!1,this._showResult=!1,this._isWin=!1,this.startBullet(),this.touchEventNode.getComponent("EventEmit").clearPrefectIcon(),window.facadeMgr.getComponent("GameModel").isGameStart=!0,this._birdLead.getComponent(cc.RigidBody).gravityScale=4},backGame:function(){this._backGameCount=0,this.countDown.active=!0,this.countDown.zIndex=9999,this.countDown.x=this.touchEventNode.x,this.countDown.getComponent("CountDown").startCountDown(3);for(var e=0;e<this._eggPool.length;e++){var t=this._eggPool[e];t&&t._parent&&this._eggNodePool.put(t)}this._eggPool=[],this.createBird(),this._birdLead.getComponent(cc.RigidBody).gravityScale=0,this._birdLead.x=window.facadeMgr.getComponent("GameModel")._lastBangX,this._birdLead.y=this._birdPosY+100},calculationObstacleLength:function(e){var t=0;if(e)for(var n=String(e.obstacle).split(","),i=0;i<n.length;i++){var o=n[i];0==Number(o)||-1==Number(o)?t++:t+=3}return t},calculationTotalLength:function(){var e,t=0,n=c(this._mapConfig);try{for(n.s();!(e=n.n()).done;){var i=e.value;t+=this.calculationObstacleLength(this._obstacleConfig[Number(i)])}}catch(e){n.e(e)}finally{n.f()}this._totalGroundLength=t*this._dis},createTopObstacle:function(e,t,n,i){for(var o=t,s=0;s<e;s++)this.createZheDangOb(o,n,1),this.createZheDangOb(o,n-this._dis,1),this.createZheDangOb(o,n-2*this._dis,1),o+=this._dis;this._topObConfig[this._mapConfigIndex]&&this._topObConfig[this._mapConfigIndex]._obId>-1&&this.createDetailObstacle(String(this._obstacleConfig[this._topObConfig[this._mapConfigIndex]._obId].obstacle).split(","),t,n-3*this._dis,!0)},createObstacle:function(e,t,n,i){if(this._needCreateObstacle&&(console.log("\u751f\u6210\u969c\u788d\u7269\uff1a",e),e)){var o=String(e.obstacle).split(","),s=this.calculationObstacleLength(e);s>0&&(this.createDownGround(s,t,n),this.createTopObstacle(s,t,cc.winSize.height/2-this._dis/2,e),this.createDetailObstacle(o,t,n+4*this._dis)),i&&(this._nowGroundLength+=s*this._dis),this._mapConfigIndex++,this._mapBeginPox+=s*this._dis}},createEndPanel:function(e,t){for(var n=e,i=0;i<28;i++)this.createZheDangOb(n,t,1),this.createZheDangOb(n,t+this._dis,1),this.createZheDangOb(n,t+2*this._dis,1),this.createZheDangOb(n,t+3*this._dis,1),n+=this._dis;for(var o=0;o<28;o++)this.createGrass(e,t+4*this._dis),e+=this._dis;this._mapBeginPox+=12*this._dis},createBeginPanel:function(e,t){for(var n=e,i=0;i<11;i++)this.createZheDangOb(n,t,1),this.createZheDangOb(n,t+this._dis,1),this.createZheDangOb(n,t+2*this._dis,1),this.createZheDangOb(n,t+3*this._dis,1),n+=this._dis;for(var o=0;o<11;o++)this.createGrass(e,t+4*this._dis),e+=this._dis;this._mapBeginPox+=11*this._dis},createMap:function(e){this._mapBeginPox=-cc.winSize.width/2+0,this.createBeginPanel(this._mapBeginPox,this._beginPosY),this.createObstacle(this._obstacleConfig[this._mapConfig[this._mapConfigIndex]],this._mapBeginPox,this._beginPosY,!0);var t,n=c(this._obstaclePool);try{for(n.s();!(t=n.n()).done;){var i=t.value;i&&i._parent&&i.y>this._birdPosY&&i.x<this.touchEventNode.x+cc.winSize.width/2&&(i.active=!1)}}catch(e){n.e(e)}finally{n.f()}var o,s=c(this._spObPool);try{for(s.s();!(o=s.n()).done;){var a=o.value;a&&a._parent&&a.y>this._birdPosY&&a.x<this.touchEventNode.x+cc.winSize.width/2+50&&(a.active=!1)}}catch(e){s.e(e)}finally{s.f()}},update:function(){var e=this;if(window.facadeMgr.getComponent("GameModel").isGameStart){if(this._birdLead.y<-cc.winSize.height/2&&this.gameOver(),this._touchStart)window.facadeMgr.getComponent("GameModel").getLocalTime()-this._lastCreateEggTime>this._crateEggTimeDis&&this.createEgg();if(this._startEndStage)this._startBullet=!1,this._speed=5,this.touchEventNode.getComponent("EventEmit").changeScoreLabel("100%"),window.facadeMgr.getComponent("GameModel").getLocalTime()-this._endStageLastDeleteEggTime>this._endStageDeleteEggTimeDis&&this.endStageFunc();if(this._startBullet)window.facadeMgr.getComponent("GameModel").getLocalTime()-this._lastCreateBulletTime>this._createBulletTimeDis&&this.createBullet();if(this._bangNumber<1&&window.facadeMgr.getComponent("GameModel")._lastBangX&&window.facadeMgr.getComponent("GameModel")._lastBangY&&window.facadeMgr.getComponent("GameModel")._lastBangX-this.touchEventNode.x<cc.winSize.width/2&&this.createBang(window.facadeMgr.getComponent("GameModel")._lastBangX,window.facadeMgr.getComponent("GameModel")._lastBangY),this._nowGroundLength-this._birdLead.x<cc.winSize.width&&(this._mapConfigIndex<this._mapConfig.length?this.createObstacle(this._obstacleConfig[this._mapConfig[this._mapConfigIndex]],this._mapBeginPox,this._beginPosY,!0):this.createHomePanel()),this.deleteObstaclePool(),this.deleteTopAndDownOb(),this.deleteEgg(),this._birdLead.x<=this._totalGroundLength){if(Number(this._birdLead.x+cc.winSize.width/2-450)){var t=Number(this._birdLead.x+cc.winSize.width/2-450);this.touchEventNode.getComponent("EventEmit").changeProgress(Number(t/this._totalGroundLength).toFixed(2));var n=this.touchEventNode.getComponent("EventEmit").getProgress(),i=(100*n).toFixed(0)<0?0:(100*n).toFixed(0);this.touchEventNode.getComponent("EventEmit").changeScoreLabel("".concat(i,"%")),Number(n)>0&&(this._nowLvScore=Math.floor(100*Number(n)*this._scoreCoefficient+this._atkObstacleNumer*this._scoreCoefficient*15),Math.floor(Number(n)/.2)&&(this._speed=5+.5*Math.floor(Number(n)/.2)))}}else this.touchEventNode.getComponent("EventEmit").changeProgress(1);if(this._homePanel&&this._homePanel.x-this.touchEventNode.x<=-365){var o=window.facadeMgr.getComponent("GameModel");return o._lastMapConfig=[],o._lastTopObConfig=[],o._lastBangX=null,o._lastBangY=null,o._level++,o._nowScore+=this._nowLvScore,o.updateBestScore(),o.isGameStart=!1,this._startBullet=!1,this._gameOver=!0,void(this._isWin=!0)}for(var s=0;s<this._eggPool.length;s++){var a=this._eggPool[s];a&&a._parent&&!a._isStop&&(a.x+=this._speed)}this.camera.x+=this._speed,this.touchEventNode.x+=this._speed,this.bg.x=this.touchEventNode.x,Math.abs(this.touchEventNode.x-this._birdLead.x)>=cc.winSize.width/2-Math.abs(this._birdPosX)&&(this._birdLead.x=this.touchEventNode.x+Math.abs(this._birdPosX)-cc.winSize.width/2)}else{this._gameOver?this._isWin&&(this.checkEffectiveEgg()?window.facadeMgr.getComponent("GameModel").getLocalTime()-this._endStageLastDeleteEggTime>this._endStageDeleteEggTimeDis&&this.endStageFunc():this.heart&&!this.showHeartAnimState&&(this.showHeartAnimState=!0,this.node.runAction(cc.sequence(cc.delayTime(.7),cc.callFunc(function(){e.heart.active=!0}),cc.delayTime(.5),cc.callFunc(function(){e.showResult(!0)}))))):this._birdLead&&(this._birdLead.x=this.touchEventNode.x)}},createBird:function(e){if(this._birdLead)return this._birdLead.getComponent("Bird")._invincible=!1,this._birdLead.getComponent("Bird")._isAlive=!0,this._birdLead.getComponent("Bird").hideTrailing(),this._birdLead.getComponent("Bird").changeNormalIcon(),this._birdLead.angle=0,this._birdLead.x=this._birdPosX,this._birdLead.y=this._birdPosY,this._birdLead.zIndex=3,this._birdLead.getComponent(cc.RigidBody).fixedRotation=!0,this._birdLead.getComponent("Bird").setSpeed(0),void(window.facadeMgr.getComponent("GameModel").isGameStart||(this._birdLead.x=this.touchEventNode.x,setTimeout(function(){this.showAni()}.bind(this),1e3)));var t=cc.instantiate(this.birdPfb);cc.director.getScene().getChildByName("Canvas").addChild(t),t.x=this._birdPosX,t.y=this._birdPosY,t.angle=0,t.zIndex=3,t.getComponent(cc.RigidBody).fixedRotation=!0,t.getComponent("Bird").setSpeed(0),this._birdLead=t,this._birdLead.getComponent("Bird").hideTrailing(),this._birdLead.getComponent("Bird")._invincible=!1,this._birdLead.getComponent("Bird").changeNormalIcon(),window.facadeMgr.getComponent("GameModel").isGameStart||(this._birdLead.x=this.touchEventNode.x,setTimeout(function(){this.showAni()}.bind(this),1e3))},onDestroy:function(){},onEnable:function(){},onDisable:function(){},createBullet:function(){var e=null;(e=this._bulletPool.size()>0?this._bulletPool.get():cc.instantiate(this.bulletPfb)).x=this._birdLead.x+this._birdLead.width,e.y=this._birdLead.y,e.zIndex=2,cc.director.getScene().getChildByName("Canvas").addChild(e),e.getComponent("Bullet").setPool(this._bulletPool),e.getComponent("Bullet").setBird(this._birdLead),this._lastCreateBulletTime=window.facadeMgr.getComponent("GameModel").getLocalTime()},deleteEgg:function(){for(var e=0;e<this._eggPool.length;e++){var t=this._eggPool[e];t&&t._parent&&(this.camera.x-t.x>cc.winSize.width||t.y<-cc.winSize.height/2-t.height/2)&&(this._eggNodePool.put(t),this._eggPool.splice(e,1),this.changeGravity())}},canCreateEgg:function(){var e,t=this.checkEffectiveEggCount(),n=this.getObCountByPosX(this._birdLead.x),i=c(this._obstaclePool);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o&&o._parent&&o.y>this._birdLead.y&&Math.abs(o.y-this._birdLead.y)<=this._birdLead.height+5&&Math.abs(o.x-this._birdLead.x)<this._birdLead.width)return!1}}catch(e){i.e(e)}finally{i.f()}return!(60*t+n*this._dis>=cc.winSize.height-8*this._dis)},createEgg:function(){if(window.facadeMgr.getComponent("GameModel").isGameStart&&!(this.touchEventNode.x-this._birdLead.x<cc.winSize.width/2-Math.abs(this._birdPosX))&&!this._startEndStage&&this.canCreateEgg()&&!(this._birdLead.y+this._birdLead.height>cc.winSize.height/2-(3*this._dis+this._birdLead.height/2))){var e=null;e=this._eggNodePool.size()>0?this._eggNodePool.get():cc.instantiate(this.eggPfb),window.Shock,window.facadeMgr.getComponent("PlayerModel").wxAdaptor&&window.facadeMgr.getComponent("PlayerModel").wxAdaptor.vibrateShort(),window.audioMgr.getComponent("SoundManager").playEffect("eggdrop1"),cc.director.getScene().getChildByName("Canvas").addChild(e),e.zIndex=2,this._birdLead.y+=this._dis,e.y=this._birdLead.y-this._dis,e.x=this._birdLead.x,e.scale=.8,e.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.1,1))),e.getComponent("Egg").changeNormal(),e.getChildByName("bird_huichen").active=!1,this._birdLead&&this._birdLead.getComponent("Bird")._invincible&&window.facadeMgr.getComponent("GameModel").addCash(1),this._lastCreateEggTime=window.facadeMgr.getComponent("GameModel").getLocalTime(),this._eggPool.push(e),this.changeGravity()}},createHomePanel:function(){if(this._needCreateObstacle){this.createSensor(this._mapBeginPox+100,this._beginPosY+2*this._dis,"END_STAGE"),this.createEndPanel(this._mapBeginPox,this._beginPosY);var e=null;this._homePanel?e=this._homePanel:(e=cc.instantiate(this.homePfb),cc.director.getScene().getChildByName("Canvas").addChild(e),this._homePanel=e),e.getChildByName("heart")&&(this.heart=e.getChildByName("heart")),e.active=!0,e.x=this._mapBeginPox,e.y=this._beginPosY+4.5*this._dis,this._needCreateObstacle=!1}},showAni:function(){if(0!=this._backGameCount&&!window.facadeMgr.getComponent("GameModel").isGameStart){if(this._showAniCount<=2){this._showAniCount++;var e=null;this._eggNodePool.size()>0?(e=this._eggNodePool.get()).getChildByName("bird_huichen").active=!1:e=cc.instantiate(this.eggPfb),cc.director.getScene().getChildByName("Canvas").addChild(e),e.zIndex=2,this._birdLead.y+=this._dis,e.y=this._birdLead.y-this._dis,e.x=this._birdLead.x,e.getComponent("Egg").changeNormal(),e.scale=.8,e.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.1,1))),this._eggPool.push(e)}else this.waitAni();setTimeout(function(){this.showAni()}.bind(this),1e3)}},deleteTopAndDownOb:function(){for(var e=0;e<this._spObPool.length;e++){var t=this._spObPool[e];t&&t._parent&&t.x<this.touchEventNode.x-cc.winSize.width&&(this._spObNodePool.put(t),this._spObPool.splice(e,1))}},deleteObstaclePool:function(){for(var e=0;e<this._obstaclePool.length;e++){var t=this._obstaclePool[e];t&&t._parent&&(t.x<this.touchEventNode.x-cc.winSize.width?("ground"==t.group?t.getComponent("Ground")&&t.getComponent("Ground")._enable?this._groundPool.put(t):t.destroy():"grass"==t.group?t.getComponent("Grass")&&t.getComponent("Grass")._enable?this._grassPool.put(t):t.destroy():"thorn"==t.group?this._thornPool.put(t):t.destroy(),this._obstaclePool.splice(e,1)):"sensor"==t.group&&t.x-this._birdLead.x<this._birdLead.width&&t.getComponent("Sensor").emitEvent())}},isHaveObByPosY:function(e){var t,n=c(this._eggPool);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i&&i._parent&&i.y>e&&Math.abs(i.y-e)<this._dis)return!0}}catch(e){n.e(e)}finally{n.f()}return!1},deleteObByPosX:function(e,t){var n,i=c(this._spObPool);try{for(i.s();!(n=i.n()).done;){var o=n.value;o&&o._parent&&o.y<t&&Math.abs(o.x-e)<=5&&this._spObNodePool.put(o)}}catch(e){i.e(e)}finally{i.f()}},CheckObstacleDoAct:function(e){window.facadeMgr.getComponent("GameModel").isGameStart&&("END_STAGE"!=e||this.startEndStage())},onTouchMove:function(){},onTouchStart:function(){console.log("onTouchStart"),this._touchStart=!0,this.createEgg()},onTouchEnd:function(){this._touchStart=!1},onTouchStartGame:function(){o.default.logEvent("click_start_game"),cc.systemEvent.emit("START_GAME")},genAGround:function(e,t,n,i,o,s){var a=null;return(a=this._groundPool.size()>0?this._groundPool.get():cc.instantiate(this.groundPfb)).x=e,a.y=t,cc.director.getScene().getChildByName("Canvas").addChild(a),a.getComponent("Ground")._isPerfect=!1,a.getComponent("Ground")._actType=-1,a.getComponent("Ground").changeNormalIcon(),n&&a.getComponent("Ground").addPerfect(),i&&a.getComponent("Ground").addAct(i,o,s),a.zIndex=2,this._obstaclePool.push(a),a},createDownGround:function(e,t,n){for(var i=0;i<e;i++)this.createZheDangOb(t,n,1),this.createZheDangOb(t,n+this._dis,1),this.createZheDangOb(t,n+2*this._dis,1),this.createZheDangOb(t,n+3*this._dis,1),t+=this._dis},createThron:function(e,t,n){var i=null;(i=this._thornPool.size()>0?this._thornPool.get():cc.instantiate(this.thronPfb)).x=e,i.y=t,i.zIndex=2,cc.director.getScene().getChildByName("Canvas").addChild(i),i.getComponent("Thorn").setReverse(n),this._obstaclePool.push(i)},createGrass:function(e,t,n,i,o,s){var a=null;return(a=this._grassPool.size()>0?this._grassPool.get():cc.instantiate(this.grassPfb)).x=e,a.y=t,a.zIndex=2,cc.director.getScene().getChildByName("Canvas").addChild(a),a.getComponent("Grass")._isPerfect=!1,a.getComponent("Grass")._actType=-1,a.getComponent("Grass").changeNormalIcon(),n&&a.getComponent("Grass").addPerfect(),i&&a.getComponent("Grass").addAct(i,o,s),this._obstaclePool.push(a),a},createZheDangOb:function(e,t,n){var i=null;(i=this._spObNodePool.size()>0?this._spObNodePool.get():cc.instantiate(this.spObPfb)).x=e,i.y=t,cc.director.getScene().getChildByName("Canvas").addChild(i),i.getComponent("spObstacle").initType(n),i.zIndex=2,this._spObPool.push(i)},createBang:function(e,t){var n=cc.instantiate(this.birdPfb);cc.director.getScene().getChildByName("Canvas").addChild(n),this._obstaclePool.push(n),n.zIndex=2,this._bangNumber=1,n.x=e-5,n.y=t,n.opacity=180,n.getComponent("Bird").setBang()},createSensor:function(e,t,n){var i=cc.instantiate(this.sensorPfb);i.x=e,i.y=t,i.zIndex=2,cc.director.getScene().getChildByName("Canvas").addChild(i),n&&i.getComponent("Sensor").initType(n),this._obstaclePool.push(i)},shakeScreen:function(){var e=cc.ActionInterval.extend({_initial_x:0,_initial_y:0,_strength_x:0,_strength_y:0,create:function(t,n,i){var o=new e;return o.initWithDuration(t,n,i),o},initWithDuration:function(e,t,n){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=t,this._strength_y=n,!0},fgRangeRand:function(e,t){return Math.random()*(t-e)+e},update:function(e){var t=this.fgRangeRand(-this._strength_x,this._strength_x),n=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(t+this._initial_x,n+this._initial_y)},startWithTarget:function(e){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=e.x,this._initial_y=e.y},stop:function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)}}),t=(new e).create(.2,10,10);this.camera.runAction(t)},showGoldAnim:function(){var e=this;i.default.GetPrefab("pfb/game/prefab/gold",function(t){var n=e.touchEventNode.getComponent("EventEmit").topNode.getChildByName("effectLayer"),i=cc.instantiate(t);i.active=!0,n.addChild(i),i.x=-140,i.y=-590,i.runAction(cc.sequence(cc.moveTo(1,-22,120),cc.callFunc(function(){window.facadeMgr.getComponent("GameModel").addCash(1),i.destroy()})))})},showDead:function(e){var t=this;i.default.GetPrefab("pfb/game/prefab/dead",function(e){var n=cc.instantiate(e);n.active=!0,t.node.addChild(n)})},createDetailObstacle:function(e,t,n,i){var o=t,s=window.facadeMgr.getComponent("GameModel").getLocalTime(),a=this._dis;i&&(a=-this._dis);var r,d=c(e);try{for(d.s();!(r=d.n()).done;){var h=r.value;switch(Number(h)){case-1:this.deleteObByPosX(t,n),t+=this._dis;break;case 0:i||this.createGrass(t,n),t+=this._dis;break;case 1:i?this._topObConfig[this._mapConfigIndex]&&(o=t+Number(this._topObConfig[this._mapConfigIndex]._dis)):o=t;for(var l=0;l<3;l++)this.genAGround(o,n),o+=this._dis;if(i)t+=3*this._dis;else for(var u=0;u<3;u++)u<=1?this.createGrass(t,n+a,!0):this.createGrass(t,n+a),t+=this._dis;break;case 2:i?this._topObConfig[this._mapConfigIndex]&&(o=t+Number(this._topObConfig[this._mapConfigIndex]._dis)):o=t;for(var g=0;g<3;g++)this.genAGround(o,n),this.genAGround(o,n+a),o+=this._dis;if(i)t+=3*this._dis;else for(var f=0;f<3;f++)f<=1?this.createGrass(t,n+2*a,!0):this.createGrass(t,n+2*a),t+=this._dis;break;case 3:i?this._topObConfig[this._mapConfigIndex]&&(o=t+Number(this._topObConfig[this._mapConfigIndex]._dis)):o=t;for(var p=0;p<3;p++)this.genAGround(o,n),this.genAGround(o,n+a),this.genAGround(o,n+2*a),o+=this._dis;if(i)t+=3*this._dis;else for(var m=0;m<3;m++)m<=1?this.createGrass(t,n+3*a,!0):this.createGrass(t,n+3*a),t+=this._dis;break;case 4:i?this._topObConfig[this._mapConfigIndex]&&(o=t+Number(this._topObConfig[this._mapConfigIndex]._dis)):o=t;for(var _=0;_<3;_++)this.genAGround(o,n),this.genAGround(o,n+a),this.genAGround(o,n+2*a),this.genAGround(o,n+3*a),o+=this._dis;if(i)t+=3*this._dis;else for(var v=0;v<3;v++)v<=1?this.createGrass(t,n+4*a,!0):this.createGrass(t,n+4*a),t+=this._dis;break;case 5:i?this._topObConfig[this._mapConfigIndex]&&(o=t+Number(this._topObConfig[this._mapConfigIndex]._dis)):o=t;for(var w=0;w<3;w++)this.genAGround(o,n),this.genAGround(o,n+a),this.genAGround(o,n+2*a),this.genAGround(o,n+3*a),this.genAGround(o,n+4*a),o+=this._dis;if(!i)for(var C=0;C<3;C++)C<=1?this.createGrass(t,n+5*a,!0):this.createGrass(t,n+5*a),t+=this._dis;break;case 6:if(o=t,!i)for(var y=0;y<3;y++)this.createGrass(o,n),o+=this._dis;i?this._topObConfig[this._mapConfigIndex]&&(o=t+Number(this._topObConfig[this._mapConfigIndex]._dis)):o=t;for(var b=0;b<3;b++)i?this.createThron(o,n+a/2+35,i):this.createThron(o,n+a/2+25),o+=50,t+=this._dis;break;case 7:if(o=t,!i)for(var M=0;M<3;M++)this.createGrass(o,n),o+=this._dis;i?this._topObConfig[this._mapConfigIndex]&&(o=t+Number(this._topObConfig[this._mapConfigIndex]._dis)):o=t;for(var S=0;S<4;S++)i?this.createThron(o,n+a/2+35,!0):this.createThron(o,n+a/2+25),o+=50,S<3&&(t+=this._dis);break;case 8:if(o=t,!i)for(var E=0;E<3;E++)this.createGrass(o,n),o+=this._dis;i?this._topObConfig[this._mapConfigIndex]&&(o=t+Number(this._topObConfig[this._mapConfigIndex]._dis)):o=t;for(var G=0;G<6;G++)i?this.createThron(o,n+a/2+35,!0):this.createThron(o,n+a/2+25),o+=50,G<3&&(t+=this._dis);break;case 9:o=t;for(var N=0;N<3;N++)this.genAGround(o,n),this.genAGround(o,n+a),o+=this._dis;for(var P=0;P<3;P++)P<=1?this.createGrass(t,n+5*a,!0):this.createGrass(t,n+5*a),t+=this._dis;break;case 10:o=t;for(var T=0;T<3;T++)this.genAGround(o,n),this.genAGround(o,n+a),this.genAGround(o,n+4*a),this.genAGround(o,n+5*a),o+=this._dis;for(var A=0;A<3;A++)A<=1?this.createGrass(t,n+6*a,!0):this.createGrass(t,n+6*a),t+=this._dis;break;case 11:o=t;for(var I=0;I<3;I++)this.genAGround(o,n),this.genAGround(o,n+a),this.genAGround(o,n+2*a),o+=this._dis;for(var L=0;L<3;L++)L<=1?this.createGrass(t,n+6*a,!0):this.createGrass(t,n+6*a),t+=this._dis;break;case 12:o=t;for(var x=0;x<3;x++)this.genAGround(o,n),this.genAGround(o,n+a),this.genAGround(o,n+2*a),this.genAGround(o,n+5*a),this.genAGround(o,n+8*a),this.genAGround(o,n+9*a),o+=this._dis;for(var B=0;B<3;B++)B<=1?this.createGrass(t,n+10*a,!0):this.createGrass(t,n+10*a),t+=this._dis;break;case 13:o=t;for(var R=0;R<3;R++)this.genAGround(o,n),this.genAGround(o,n+a),this.genAGround(o,n+2*a),this.genAGround(o,n+6*a),this.genAGround(o,n+7*a),o+=this._dis;for(var O=0;O<3;O++)O<=1?this.createGrass(t,n+8*a,!0):this.createGrass(t,n+8*a),t+=this._dis;break;case 14:o=t,s=window.facadeMgr.getComponent("GameModel").getLocalTime(),this.createSensor(o-4*this._dis,n+a,s);for(var D=0;D<3;D++)this.genAGround(o,n),this.genAGround(o,n+a),this.genAGround(o,n+2*a),o+=this._dis;for(var F=0;F<3;F++)F<=1?this.createGrass(t,n+3*a,!0,s,1,3*this._dis):this.createGrass(t,n+3*a,!1,s,1,3*this._dis),t+=this._dis;break;case 15:o=t,s=window.facadeMgr.getComponent("GameModel").getLocalTime(),this.createSensor(o-4*this._dis,n+a,s);for(var k=0;k<3;k++)this.genAGround(o,n),this.genAGround(o,n+a),this.genAGround(o,n+2*a),this.genAGround(o,n+5*a,!1,s,1,1*this._dis),this.genAGround(o,n+3*a,!1,s,1,1*this._dis),this.genAGround(o,n+4*a,!1,s,1,1*this._dis),this.genAGround(o,n+6*a,!1,s,1,2*this._dis),this.genAGround(o,n+7*a,!1,s,1,2*this._dis),o+=this._dis;for(var U=0;U<3;U++)U<=1?this.createGrass(t,n+8*a,!0,s,1,2*this._dis):this.createGrass(t,n+8*a,!1,s,1,2*this._dis),t+=this._dis;break;case 16:o=t,s=window.facadeMgr.getComponent("GameModel").getLocalTime(),this.createSensor(o-4*this._dis,n+a,s);for(var q=0;q<3;q++)this.genAGround(o,n),this.genAGround(o,n+a),this.genAGround(o,n+2*a,!1,s,1,2*this._dis),this.genAGround(o,n+3*a,!1,s,1,2*this._dis),o+=this._dis;for(var W=0;W<3;W++)indxe<=1?this.createGrass(t,n+4*a,!0,s,1,2*this._dis):this.createGrass(t,n+4*a,!1,s,1,2*this._dis),t+=this._dis}}}catch(e){d.e(e)}finally{d.f()}},setupUserLogin:function(){"undefined"!=typeof wx&&wx.login({success:function(e){wx.request({url:"https://games.qdos.com/game/wxLogin",data:{appid:window.facadeMgr.wxAppId,js_code:e.code},method:"POST",success:function(e){UserInfo.userId=e.data.data.openid,console.log(e.data)}})}})}}),cc._RF.pop()},{"../Common/Util":"Util","../platform/analytics/AnalyticsUtilities":"AnalyticsUtilities",GameMoreManager:"GameMoreManager"}],GameGridItem:[function(e,t,n){"use strict";cc._RF.push(t,"b0d1fFqLaRJ0YV4Rqj96YVb","GameGridItem");var i=e("GameMoreManager");cc.Class({extends:cc.Component,properties:{gameIcon:cc.Sprite,titlebg:cc.Sprite,gameName:cc.Label,playNum:cc.Label},onLoad:function(){},setData:function(e){var t=this;this.info=e,cc.loader.loadRes("moregame/hutui_zidi_".concat(e.titleColorIndex,".png"),cc.SpriteFrame,function(e,n){t.titlebg.spriteFrame=n}),e&&e.appId&&-1!=e.icon.indexOf("http")&&cc.loader.load({url:e.icon,type:"png"},null,function(e,n){t.gameIcon.spriteFrame=new cc.SpriteFrame(n)}),this.gameName.string=this.info.name,this.playNum.string=this.info.playNum},onClick:function(){i.navigateToMiniProgram(this.info.appId,this.from)}}),cc._RF.pop()},{GameMoreManager:"GameMoreManager"}],GameGrid:[function(e,t,n){"use strict";cc._RF.push(t,"005d06N/xhE4LEBjmGBLzHl","GameGrid");var i=e("GameMoreManager");cc.Class({extends:cc.Component,properties:{content:cc.Node,item:cc.Prefab,guang:cc.Node},initData:function(){var e=this;i.requestMoreGameList(function(t){e.getMoreSuccess(t)})},getMoreSuccess:function(e){for(var t=e.length,n=0;n<t&&n<6;n++){var i=cc.instantiate(this.item);this.content.addChild(i),i.getComponent("GameGridItem").from="GameGrid",i.getComponent("GameGridItem").setData(e[n])}this.guang.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(1.5,100),cc.fadeTo(1.5,255))))},onLoad:function(){this.initData()},onEnable:function(){}}),cc._RF.pop()},{GameMoreManager:"GameMoreManager"}],GameItem:[function(e,t,n){"use strict";cc._RF.push(t,"c49d74J+qxC15K1IfwvNU5U","GameItem");var i=e("GameMoreManager");cc.Class({extends:cc.Component,properties:{iconImg:cc.Sprite,name1:cc.Label,itemID:0,startC:0,endC:0,count:0,pointImg:cc.Node,effcount:0,effStartC:0,effEndC:0,from:"",effImg:cc.Sprite},isInHistory:function(e){for(var t=0;t<this._historyDataArr.length;t++)if(e.icon==this._historyDataArr[t].icon)return!0;return!1},btnGoGameOnClick:function(){i.navigateToMiniProgram(this.appId,this.from)},setupItemData:function(e){this._historyDataArr||(this._historyDataArr=[]),this._historyDataArr.push(e),this._historyDataArr.length>=i.getData().length&&(this._historyDataArr=[]),this.type,this.data=JSON.parse(JSON.stringify(e)),this.appId=this.data.appId;var t=this;if(""!=e.icon&&e.icon&&0==e.icon.indexOf("http")&&(cc.loader.load({url:e.icon,type:"png"},function(e,n){t.iconImg&&n&&(t.iconImg.spriteFrame=new cc.SpriteFrame(n))}),this.startC=this.endC=0),e.name&&this.name1&&(this.name1.string=e.name),e.animation&&""!=e.animation){var n=e.animation.split(",");n.length>=4&&(this.data.animUrl=n[0],this.startC=n[1],this.endC=n[2],this.type=n[3])}if(e.effect&&""!=e.effect){this.effNode||(this.effNode=new cc.Node,this.effImg=this.effNode.addComponent(cc.Sprite),this.effNode.parent=this.node);var o=e.effect.split(",");o.length>=4&&(this.data.effectUrl=o[0],this.effStartC=parseInt(o[1]),this.effEndC=parseInt(o[2]),this.effType=o[3])}else this.effNode&&(this.effNode.destroy(),this.effNode.parent=null,this.effNode=null,this.data.effectUrl=null,this.effStartC=0,this.effEndC=0,this.effType=null)},update:function(){if(this.frameCount||(this.frameCount=0),this.frameCount++,this.frameCount%5==0){if(this.endC>this.startC){var e=this;if((n=parseInt(this.count)+parseInt(this.startC))<=this.endC){var t=this.data.animUrl+n.toString()+"."+this.type;cc.loader.load({url:t,type:"png"},function(t,n){e.iconImg&&n&&(e.iconImg.spriteFrame=new cc.SpriteFrame(n))}),this.count++}else this.count=1}if(this.effEndC>this.effStartC){var n;e=this;if((n=parseInt(this.effcount)+parseInt(this.startC))<=this.effEndC){t=this.data.effectUrl+n.toString()+"."+this.effType;cc.loader.load({url:t,type:"png"},function(t,n){e.effImg&&n&&(e.effImg.spriteFrame=new cc.SpriteFrame(n),e.effNode.width=120,e.effNode.height=120)}),this.effcount++}else this.effcount=1}}}}),cc._RF.pop()},{GameMoreManager:"GameMoreManager"}],GameModel:[function(e,t,n){"use strict";cc._RF.push(t,"46b3cp+nItDsrwBv3YiccC/","GameModel");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../Common/Util"));function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=s(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,c=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw o}}}}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var c=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onWxShow:function(){},onWxHide:function(){facadeMgr.FOR_DEVELOP||this.saveData(!0)},gainEnergy:function(){new Date;this.energy++,this.energyLostTime=this.getLocalTime(),this.energy>=this.maxEnergy&&(this.energy=this.maxEnergy,this.energyLostTime=0),cc.systemEvent.emit("CHANGE_ENERGY"),this.saveData()},isRewardEnergyLimited:function(){return this.rewardEnergyCount>=6},rewardEnergy:function(e){new Date;this.lastRewardEnergyTime=this.getLocalTime(),this.rewardEnergyCount++,this.energy+=e,this.energy>=this.maxEnergy&&(this.energyLostTime=0),this.saveData(),cc.systemEvent.emit("CHANGE_ENERGY")},setLastMapConfig:function(e){this._lastMapConfig=e,this.saveData()},isHaveBirdById:function(e){var t,n=o(this._haveBird);try{for(n.s();!(t=n.n()).done;){if(t.value==Number(e))return!0}}catch(e){n.e(e)}finally{n.f()}return!1},isHaveSceneById:function(e){var t,n=o(this._haveScene);try{for(n.s();!(t=n.n()).done;){if(t.value==Number(e))return!0}}catch(e){n.e(e)}finally{n.f()}return!1},addBirdByLv:function(){for(var e in this._birdConfig){var t=this._birdConfig[e];5==Number(t.type)&&this._level>Number(t.payMoney)&&this.increaseBird(t.id)}this.saveData(!0)},addScene:function(e){console.log(this._haveScene,"_haveScene");var t,n=o(this._haveScene);try{for(n.s();!(t=n.n()).done;){if(t.value==Number(e))return}}catch(e){n.e(e)}finally{n.f()}this._haveScene.push(Number(e)),this.saveData(!0),console.log(this._haveScene,"_haveScene")},increaseBird:function(e){var t,n=o(this._haveBird);try{for(n.s();!(t=n.n()).done;){if(t.value==Number(e))return}}catch(e){n.e(e)}finally{n.f()}this._haveBird.push(Number(e))},applySignReward:function(e,t){console.log("SignIn reward: ",t);var n=this.getLocalTime();this.lastFetchSignInTime=n,this.fetchDays++,String(t.rewardsMoney).indexOf("b")>-1?(this.increaseBird(String(t.rewardsMoney).split("-")[1]),this.saveData()):this.addCash(e?Number(t.rewardsMoney)+Number(t.extreRewards):Number(t.rewardsMoney)),this.saveData(!0),cc.systemEvent.emit("SIGN_IN_STATE"),popUpMgr.getComponent("Pop").removeTop()},addCash:function(e){this.cash+=Number(e),this.saveData(),cc.systemEvent.emit("CHANGE_CASH")},updateBestScore:function(){Number(this._nowScore)<Number(this._bestScore)||(this._bestScore=Number(this._nowScore),this.saveData(),cc.systemEvent.emit("CHANGE_BEST_SCORE"))},getFullTime:function(){var e=this.getNextEnergyTime(),t=this.energy+1,n=e;return n+=(this.maxEnergy-t)*this.energyCD},getNextEnergyTime:function(){return this.energyLostTime+this.energyCD},deleteEnercy:function(){this.energy--,this.energyLostTime=this.getLocalTime(),this.saveData()},isEnergyFull:function(){return this.energy>=this.maxEnergy},saveData:function(e){if("SkipPage"!=facadeMgr.CurrentScene){var t={};t.cash=this.cash,t.energy=1e6,t.energyLostTime=this.energyLostTime,t.lastRewardEnergyTime=this.lastRewardEnergyTime,t.rewardEnergyCount=this.rewardEnergyCount,t.characterVideoCounts=this.characterVideoCounts,t.getGoldTime=this.getGoldTime,t.getGoldCount=this.getGoldCount,t.resultCount=this.resultCount,t.resultTodaySharedTime=this.resultTodaySharedTime,t.fetchDays=this.fetchDays,t.gotNextReward=this.gotNextReward,t.gotAdvanceReward=this.gotAdvanceReward,t.gotNewerReward=this.gotNewerReward,t.lastFetchSignInTime=this.lastFetchSignInTime,t.fetchDays=this.fetchDays,t.gotHoverWinReward=this.gotHoverWinReward,t.gotCollectReward=this.gotCollectReward,t._birdType=this._birdType,t._eggType=this._eggType,t._showGuide=this._showGuide,t._lastMapConfig=this._lastMapConfig,t._lastTopObConfig=this._lastTopObConfig,t._lastBangX=this._lastBangX,t._lastBangY=this._lastBangY,t._level=this._level,t._bestScore=this._bestScore,t._sceneType=this._sceneType,t._haveScene=this._haveScene,t._nowScore=this._nowScore,t._haveBird=this._haveBird,cc.sys.localStorage.setItem("Bird",JSON.stringify(t))}},clearData:function(){cc.sys.localStorage.setItem("Bird",JSON.stringify(obj))},readDataFromLocal:function(){var e=cc.sys.localStorage.getItem("Bird");e?(this.localCash=JSON.parse(e),this.formDatas(),this._loadInfo=!0):(this.cash=0,this.energy=10,this.energyLostTime=0,this.characterVideoCounts={},this._loadInfo=!0)},delayInitData:function(){this.gotGameRecord||this.formDatas()},update:function(){if(this.energy<this.maxEnergy){new Date;this.getLocalTime()>=this.energyLostTime+this.energyCD&&this.gainEnergy()}},checkNewerShowCondtition:function(){return this.passLevelCount++,this.newerRewardCancelCount>=2&&this.passLevelCount<3?0:this.gotNewerReward?this.gotAdvanceReward?0:"Advance":"Newer"},onLoad:function(){this.isNeedEnergy=!1,this.newcomerConfig=[],this.oldConfig=[],this.cash=0,this.energy=1e3,this.gotNextReward=0,this.gotNewerReward=0,this.gotAdvanceReward=0,this.energyLostTime=0,this.lastRewardEnergyTime=0,this.rewardEnergyCount=0,this.getGoldTime=0,this.getGoldCount=0,this.resultCount=0,this.resultTodaySharedTime=0,this.maxEnergy=1e3,this.energyCD=2e4,this.newerRewardCancelCount=0,this.passLevelCount=0,this.characterVideoCounts={},this.gotHoverWinReward=0,this.gotCollectReward=0,this._haveBird=[1],this._birdType=1,this._eggType=1,this._lastMapConfig=[],this._lastTopObConfig={},this._lastBangX=null,this._lastBangY=null,this._level=1,this._bestScore=0,this._nowScore=0,this._sceneType=1,this._haveScene=[1],this._underLineNumber=5,this._showLuckyCount=1,this._passLv=0,this.localCash={},this.readDataFromLocal(),cc.systemEvent.on(c.GOT_HTTP_RES,this.httpResDeal.bind(this)),this.readDataFromLocal()},checkEnergy:function(){return this.energy>0},getRewardConfig:function(){var e=this.fetchDays;return null==e&&(e=0),e<=7?this.newcomerConfig:this.oldConfig},checkInConfig:function(e,t){if(e)console.error(e);else{var n=t.json;for(var i in n)1==n[i].type?this.newcomerConfig.push(n[i]):2==n[i].type&&this.oldConfig.push(n[i])}},initConfig:function(){cc.systemEvent.on(c.WX_SHOW,this.onWxShow.bind(this)),cc.systemEvent.on(c.WX_HIDE,this.onWxHide.bind(this)),cc.loader.loadRes("config/GlobalDB",cc.JsonAsset,this.iniGlobalConfig.bind(this)),cc.loader.loadRes("config/ObstacleDB",cc.JsonAsset,this.initObstacleConfig.bind(this)),cc.loader.loadRes("config/BirdDB",cc.JsonAsset,this.initBirdConfig.bind(this)),cc.loader.loadRes("config/SceneDB",cc.JsonAsset,this.initSceneConfig.bind(this)),cc.loader.loadRes("config/CheckinDB",cc.JsonAsset,this.checkInConfig.bind(this)),this.resourceDB=cc.loader.getRes("config/DB.json").json.Item},initBirdConfig:function(e,t){for(var n in this._birdConfig={},console.log(t,"bird"),t.json)this._birdConfig[n]=t.json[n]},initSceneConfig:function(e,t){for(var n in this._sceneConfig={},console.log(t,"scene"),t.json)this._sceneConfig[n]=t.json[n]},iniGlobalConfig:function(e,t){for(var n in this._globalConfig={},console.log(t,"golbal"),t.json)this._globalConfig[n]=t.json[n];this.cash||(this.cash=Number(this._globalConfig[10001].value))},initObstacleConfig:function(e,t){for(var n in this._obstacleConfig=[],t.json)Number(n)>=0&&this._obstacleConfig.push(t.json[n])},offlineEnergy:function(e){console.log("offlineEnergy:",e),this._offLineEnergy=e,this.saveData()},addEnergy:function(e){this.energy+=Number(e),cc.systemEvent.emit("CHANGE_ENERGY"),this.saveData()},getTodayGoldCount:function(){return this.getGoldCount&&i.default.isTimeInToday(this.getGoldTime)?this.getGoldCount:0},getTodayGoldResidueCount:function(){var e=5-this.getTodayGoldCount();return e<0&&(e=0),e},addTodayGoldCount:function(){var e=this.getTodayGoldCount();e++,this.getGoldTime=(new Date).getTime(),this.getGoldCount=e,this.saveData(),cc.systemEvent.emit("CHANGE_GET_GOLD")},getResultCount:function(){return this.resultCount?this.resultCount:0},addResultCount:function(){this.resultCount++,this.saveData()},isResultTodayShared:function(){return this.resultTodaySharedTime&&i.default.isTimeInToday(this.resultTodaySharedTime)},setResultTodayShared:function(){this.resultTodaySharedTime=(new Date).getTime(),this.saveData()},formDatas:function(e){this.cash=Number(this.localCash.cash),this.energy=Number(this.localCash.energy),this.energyLostTime=Number(this.localCash.energyLostTime),this.characterVideoCounts=this.localCash.characterVideoCounts,this.lastRewardEnergyTime=Number(this.localCash.lastRewardEnergyTime),this.rewardEnergyCount=Number(this.localCash.rewardEnergyCount),this.getGoldTime=Number(this.localCash.getGoldTime),this.getGoldCount=Number(this.localCash.getGoldCount),this.resultCount=Number(this.localCash.resultCount),this.resultTodaySharedTime=Number(this.localCash.resultTodaySharedTime),this.fetchDays=Number(this.localCash.fetchDays),this.gotNextReward=Number(this.localCash.gotNextReward),this.gotNewerReward=Number(this.localCash.gotNewerReward),this.gotAdvanceReward=Number(this.localCash.gotAdvanceReward),this.lastFetchSignInTime=Number(this.localCash.lastFetchSignInTime),this.fetchDays=Number(this.localCash.fetchDays),this.gotHoverWinReward=Number(this.localCash.gotHoverWinReward),this.gotCollectReward=Number(this.localCash.gotCollectReward),this._showGuide=this.localCash._showGuide,this._birdType=Number(this.localCash._birdType),this._eggType=Number(this.localCash._eggType),this._lastMapConfig=this.localCash._lastMapConfig,this._lastTopObConfig=this.localCash._lastTopObConfig,this._lastBangX=this.localCash._lastBangX,this._lastBangY=this.localCash._lastBangY,this._level=this.localCash._level,this._bestScore=this.localCash._bestScore,this._sceneType=this.localCash._sceneType,this._haveScene=this.localCash._haveScene,this._nowScore=this.localCash._nowScore,this._haveBird=this.localCash._haveBird,this._showGuide||(this._showGuide=0),this.gotHoverWinReward||(this.gotHoverWinReward=0),this.gotCollectReward||(this.gotCollectReward=0),this._haveBird||(this._haveBird=[1]),this._haveScene||(this._haveScene=[1]),this._nowScore||(this._nowScore=0),this._sceneType||(this._sceneType=1),this._level||(this._level=1),this._bestScore||(this._bestScore=0),this._birdType||(this._birdType=1),this._eggType||(this._eggType=1),this._lastMapConfig||(this._lastMapConfig=[]),this._lastTopObConfig||(this._lastTopObConfig=[]),this.cash||(this.cash=0),this.lastFetchSignInTime||(this.lastFetchSignInTime=0),this.fetchDays||(this.fetchDays=0),this.rewardEnergyCount||(this.rewardEnergyCount=0),this.gotNextReward||(this.gotNextReward=0),this.gotAdvanceReward||(this.gotAdvanceReward=0),this.characterVideoCounts||(this.characterVideoCounts={}),this._lastMapConfig||(this._lastMapConfig=[]),this.energyLostTime||(this.energyLostTime=0,(!this.energy||this.energy<this.maxEnergy)&&(this.energy=this.maxEnergy));var t=Math.floor(this.getLocalTime()/86400/1e3);if(this.lastRewardEnergyTime){var n=Math.floor(this.lastRewardEnergyTime/86400/1e3),i=new Date(86400*n*1e3),o=new Date(86400*t*1e3);console.log("lastRewardDate:",o.toString()),console.log("todayDate:",i.toString()),n<t&&(this.rewardEnergyCount=0,this.lastRewardEnergyTime=this.getLocalTime())}else this.lastRewardEnergyTime=0;new Date;if(this.energy<this.maxEnergy&&this.energyLostTime){var s=this.getLocalTime()-this.energyLostTime,a=Math.floor(s/(2*this.energyCD));a+this.energy>this.maxEnergy&&(a=this.maxEnergy-this.energy),this.energy+=a,this.energyLostTime+=a*this.energyCD*2,this.energy>=this.maxEnergy&&(this.energyLostTime=0),this.offlineEnergy(a)}this.fetchDays||(this.fetchDays=0),e||"Game"!=facadeMgr.CurrentScene||(this.saveData(),cc.systemEvent.emit(c.INIT_ROLEINFO_COMPLETED))},httpResDeal:function(e,t){},getLocalTime:function(){var e=new Date;return e.getTime()-6e4*e.getTimezoneOffset()}}),cc._RF.pop()},{"../Common/Util":"Util",ModuleEventEnum:"ModuleEventEnum"}],GameMoreManager:[function(e,t,n){"use strict";cc._RF.push(t,"c82565WzYtIY75m/zF8kaT5","GameMoreManager");var i=s(e("../platform/analytics/AnalyticsUtilities")),o=s(e("../Common/Util"));function s(e){return e&&e.__esModule?e:{default:e}}var a=e("Network"),c=e("UserInfo"),r={getData:function(){return this._data},postRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(t){if(4==i.readyState&&i.status>=200&&i.status<300){var o=JSON.parse(i.responseText);Log.print("NET url",e),Log.print("NET data",o),0!=o.code?n.failure&&n.failure(o.code):n.success&&n.success(o.data)}}.bind(this),i.onerror=function(e){n.failure()&&n.failure(e)},i.open("POST",e,!1),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t)},updateRecommendItems:function(e){this.requestMoreGameList(function(t){for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++){var o=e[n],s=t[i];if(!o.getComponent("GameItem").isInHistory(s))return void o.getComponent("GameItem").setupItemData(s)}})},initRecommendItems:function(e){this.requestMoreGameList(function(t){for(var n=0;n<e.length;n++){e[n].getComponent("GameItem").setupItemData(JSON.parse(JSON.stringify(t[n])))}})},navigateToMiniProgram:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i.default.logEvent("navigate_to_game",{appId:e,from:t}),"undefined"!=typeof wx&&wx.getSystemInfo({success:function(t){if(e){var n={appId:window.facadeMgr.wxAppId,devModel:t.model,devBrand:t.brand,gameVersion:"111",WXVersion:t.version,SDKVersion:t.SDKVersion,system:t.system,benchmarkLevel:t.benchmarkLevel,lan:t.language,tAppId:e,uId:c.userId};wx.navigateToMiniProgram({appId:e,success:function(){i.default.logEvent("navigate_to_game_success",{appId:e}),n.result=1,a.postRequest("https://games.qdos.com/open/api/record","p="+JSON.stringify(n),{success:function(e){},failure:function(e){}})},fail:function(){i.default.logEvent("navigate_to_game_fail",{appId:e}),n.result=2,a.postRequest("https://games.qdos.com/open/api/record","p="+JSON.stringify(n),{success:function(e){},failure:function(e){}})}})}}})},requestMoreGameList:function(e){},updateData:function(e){for(var t=0,n=e.length;t<n;t++)e[t].playNum="".concat(o.default.RandomNum(200,300),"\u4e07\u4eba\u5728\u73a9"),e[t].titleColorIndex=o.default.RandomNum(1,3)}};t.exports=r,cc._RF.pop()},{"../Common/Util":"Util","../platform/analytics/AnalyticsUtilities":"AnalyticsUtilities",Network:"Network",UserInfo:"UserInfo"}],GamePageItem:[function(e,t,n){"use strict";cc._RF.push(t,"722e1SFHApNTqXpUz4AjQiH","GamePageItem");var i=e("GameMoreManager");cc.Class({extends:cc.Component,properties:{gameIcon:cc.Sprite,gameName:cc.Label},setData:function(e){var t=this;this.info=e,e&&e.appId&&-1!=e.icon.indexOf("http")&&cc.loader.load({url:e.icon,type:"png"},null,function(e,n){t.gameIcon.spriteFrame=new cc.SpriteFrame(n)}),this.gameName.string=this.info.name},onClick:function(){i.navigateToMiniProgram(this.info.appId,"GamePage")}}),cc._RF.pop()},{GameMoreManager:"GameMoreManager"}],GamePage:[function(e,t,n){"use strict";cc._RF.push(t,"69ab02H06FLMZuhORXXbwBI","GamePage");var i=e("GameMoreManager");cc.Class({extends:cc.Component,properties:{content:cc.Node,item:cc.Prefab},onLoad:function(){var e=this;i.requestMoreGameList(function(t){e.getMoreSuccess(t)}),this.node.height=cc.director.getWinSize().height},getMoreSuccess:function(e){for(var t,n=e.length,i=0;i<n;i++){var o=cc.instantiate(this.item);t=o.height,this.content.addChild(o),o.getComponent("GamePageItem").setData(e[i])}this.content.height=Math.floor(n/2)*(t+10),console.log(this.content.y)},onClose:function(){this.node.destroy(),this.onCloseFun()}}),cc._RF.pop()},{GameMoreManager:"GameMoreManager"}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"49ca4F3zaBALZWL1QR0zVNZ","Game");var i=e("ModuleEventEnum"),o={init:function(){cc.systemEvent.on(i.GO_GAME,this.onGoGame.bind(this)),cc.systemEvent.on(i.GO_LOADING,this.onGoLoading,this),console.log("ctrl alt a")},onGoLoading:function(){window.facadeMgr.CurrentScene="Loading",cc.director.loadScene(window.facadeMgr.CurrentScene)},onGoGame:function(e,t){window.facadeMgr.CurrentScene="Game",cc.director.loadScene(window.facadeMgr.CurrentScene,function(){cc.director.getScene().name=window.facadeMgr.CurrentScene})}};t.exports=o,cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],GetGold:[function(e,t,n){"use strict";cc._RF.push(t,"7cbe5aYGFlE4L8ZWPA6/eZz","GetGold");var i=s(e("../Common/Util")),o=s(e("../platform/analytics/AnalyticsUtilities"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{normalBtn:cc.Node},start:function(){},onClickClose:function(){popUpMgr.getComponent("Pop").removeTop()},onMultipleBtnClick:function(){var e=this;this.checkTimes()&&(this.reportEvent("click_get_gold_multiple"),i.default.wxShare(function(t){t?(e.reportEvent("click_get_gold_multiple_success"),window.facadeMgr.getComponent("GameModel").addTodayGoldCount(),e.onClickClose(),cc.systemEvent.emit("PLAY_GOLD_ANIMATION"),setTimeout(function(){window.facadeMgr.getComponent("GameModel").addCash(500)},1500)):e.reportEvent("click_get_gold_multiple_fail")}))},reportEvent:function(e){o.default.logEvent(e,{todayCount:window.facadeMgr.getComponent("GameModel").getTodayGoldCount()})},onNormalBtnClick:function(){this.checkTimes()&&(this.reportEvent("click_get_gold_normal"),this.onClickClose(),popUpMgr.getComponent("Pop").addPopByName("GetGoldNormalConfirm",null,!0))},onNormalConfirmBtnClick:function(){this.checkTimes()&&(this.reportEvent("click_get_gold_normal_confirm"),window.facadeMgr.getComponent("GameModel").addTodayGoldCount(),this.onClickClose(),cc.systemEvent.emit("PLAY_GOLD_ANIMATION"),setTimeout(function(){window.facadeMgr.getComponent("GameModel").addCash(100)},1500))},checkTimes:function(){return!(window.facadeMgr.getComponent("GameModel").getTodayGoldResidueCount()<=0)||(popUpMgr.getComponent("FloatTip").showTip("Coin claims used up. Come back tomorrow."),this.onClickClose(),!1)}}),cc._RF.pop()},{"../Common/Util":"Util","../platform/analytics/AnalyticsUtilities":"AnalyticsUtilities"}],Grass:[function(e,t,n){"use strict";cc._RF.push(t,"61a3a2ydhxKOZfsZQXWQ6UW","Grass");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../Common/Util"));cc.Class({extends:cc.Component,properties:{icon:cc.Sprite},onBeginContact:function(e,t,n){var o=this;this._enable&&("bullet"==n.node.group&&(cc.systemEvent.emit("ADD_ATK_NUMBER"),this.icon.node.active=!1,i.default.GetPrefab("pfb/game/prefab/bird_qiangbao",function(e){var t=cc.instantiate(e);t.active=!0,o.node.addChild(t),console.log("\u64ad\u653e\u5c04\u51fb\u649e\u5230\u8349\u5730\u7684\u6548\u679c"),o._enable=!1}),this.node.removeComponent(cc.PhysicsBoxCollider),setTimeout(function(){o.node&&o.node.isValid&&o.node.destroy()},1e3)),"bird"==n.node.group&&n.node.getComponent("Bird")._isAlive&&this._isPerfect&&Math.abs(this.node.x-n.node.x)<this.node.width/2+5&&n.node.y-this.node.y>n.node.height/2+t.node.height/2-5&&(this._isPerfect=!1,cc.systemEvent.emit("PERFECT")))},onLoad:function(){cc.systemEvent.on("DOACT",this.doAct,this),cc.systemEvent.on("UPDATE_SELECT_SCENE",this.changeNormalIcon,this),this._type=-1,this._actType=-1,this._actDis=-1,this._runing=!1,this._isPerfect=!1,this._enable=!0},start:function(){cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){this.icon.spriteFrame=t.getSpriteFrame(window.facadeMgr.getComponent("GameModel")._sceneConfig[window.facadeMgr.getComponent("GameModel")._sceneType].swardIcon)}.bind(this))},initType:function(e){this._type=e},addPerfect:function(){this._isPerfect=!0},doAct:function(e){if(this._type==e&&!this._runing)switch(this._runing=!0,this._actType){case 1:var t=cc.moveTo(.1,this.node.x,this.node.y+this._actDis);this.node.runAction(t)}},changeNormalIcon:function(){cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){this.icon.spriteFrame=t.getSpriteFrame(window.facadeMgr.getComponent("GameModel")._sceneConfig[window.facadeMgr.getComponent("GameModel")._sceneType].swardIcon)}.bind(this))},addAct:function(e,t,n){this._runing=!1,this._type=e,this._actType=t,this._actDis=n},onEndContact:function(e,t,n){}}),cc._RF.pop()},{"../Common/Util":"Util"}],Ground:[function(e,t,n){"use strict";cc._RF.push(t,"6fe26oXfRFOq67KltNXQUdg","Ground");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../Common/Util"));cc.Class({extends:cc.Component,properties:{icon:cc.Sprite},onBeginContact:function(e,t,n){var o=this;this._enable&&("bullet"==n.node.group&&(cc.systemEvent.emit("ADD_ATK_NUMBER"),this.icon.node.active=!1,i.default.GetPrefab("pfb/game/prefab/bird_qiangbao",function(e){var t=cc.instantiate(e);t.active=!0,o.node.addChild(t),o._enable=!1}),this.node.removeComponent(cc.PhysicsBoxCollider),setTimeout(function(){o.node&&o.node.isValid&&o.node.destroy()},2e3)),"bird"==n.node.group&&n.node.getComponent("Bird")._isAlive&&this._isPerfect&&Math.abs(this.node.x-n.node.x)<this.node.width/2&&Math.abs(n.node.y-this.node.y)>n.node.height-5&&(console.log("ground ppppppp"),this._isPerfect=!1,cc.systemEvent.emit("PERFECT")))},onLoad:function(){cc.systemEvent.on("DOACT",this.doAct,this),cc.systemEvent.on("UPDATE_SELECT_SCENE",this.changeNormalIcon,this),this._type=-1,this._actType=-1,this._actDis=-1,this._runing=!1,this._isPerfect=!1,this._enable=!0},doAct:function(e){if(this._type==e&&!this._runing)switch(this._runing=!0,this._actType){case 1:var t=cc.moveTo(.1,this.node.x,this.node.y+this._actDis);this.node.runAction(t)}},start:function(){cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){this.icon.spriteFrame=t.getSpriteFrame(window.facadeMgr.getComponent("GameModel")._sceneConfig[window.facadeMgr.getComponent("GameModel")._sceneType].landIcon)}.bind(this))},addPerfect:function(){this._isPerfect=!0},initType:function(e){this._type=e},addAct:function(e,t,n){this._runing=!1,this._type=e,this._actType=t,this._actDis=n},changeNormalIcon:function(){cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){this.icon.spriteFrame=t.getSpriteFrame(window.facadeMgr.getComponent("GameModel")._sceneConfig[window.facadeMgr.getComponent("GameModel")._sceneType].landIcon)}.bind(this))},onEndContact:function(e,t,n){}}),cc._RF.pop()},{"../Common/Util":"Util"}],Guide:[function(e,t,n){"use strict";cc._RF.push(t,"a0bfd7fllpDg7OvvKip0NvL","Guide"),cc.Class({extends:cc.Component,properties:{bg:cc.Sprite,spFrameArr:{type:cc.SpriteFrame,default:[]}},onCloseCallBack:function(){this.justShow&&cc.systemEvent.emit("SHOW_SKINTRIAL"),this.node.destroy()},start:function(){},showStep:function(){console.log(this._setp,"this._setp"),this._setp>=2?this.onCloseCallBack():(this._setp++,this.spFrameArr[this._setp]&&(this.bg.node.active=!0,this.bg.spriteFrame=this.spFrameArr[this._setp]))},onLoad:function(){this.justShow=!0,window.facadeMgr.getComponent("GameModel")._showGuide=1,window.facadeMgr.getComponent("GameModel").saveData(!0),this._setp=0,this.spFrameArr[this._setp]&&(this.bg.node.active=!0,this.bg.spriteFrame=this.spFrameArr[this._setp])}}),cc._RF.pop()},{}],LevelLoadingUI:[function(e,t,n){"use strict";cc._RF.push(t,"b2e20LZ7jBOgpCwDtnIWNpP","LevelLoadingUI"),cc.Class({extends:cc.Component,properties:{peop1:cc.Node,peop2:cc.Node,peop3:cc.Node},onLoad:function(){this.frameCount=0},update:function(e){if(this.frameCount++,this.frameCount%10==0)for(var t=this.frameCount/10%4,n=1;n<=3;n++)this["peop"+n].scaleY=1,t==n&&(this["peop"+n].scaleY=.8)}}),cc._RF.pop()},{}],LoadingView:[function(require,module,exports){"use strict";cc._RF.push(module,"609d70dLndKsKrXrznpRUb6","LoadingView");var _Util=_interopRequireDefault(require("../Common/Util"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var ME=require("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{peop1:cc.Node,peop2:cc.Node,peop3:cc.Node,proLab:cc.Label},start:function(){this.preLoad()},update:function(e){this.frameCount++},loadCompleted:function(e,t,n){if(this.curLoadId++,this.curLoadId==this.loadList.length)return facadeMgr.getComponent("PlayerModel").initConfig(),facadeMgr.getComponent("GameModel").initConfig(),void cc.systemEvent.emit(ME.GO_GAME);this.preLoad()},preLoad:function preLoad(){_Util.default.GetPrefab("pfb/game/prefab/bird_dici",function(e){}),cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){}.bind(this)),cc.loader.loadResDir(this.loadList[this.curLoadId],cc.Asset,function(e,t){var n=Math.floor(e/t*100);this.proLab.string=n+"%"}.bind(this),this.loadCompleted.bind(this)),eval(function(e,t,n,i,o,s){if(o=function(e){return e.toString(25)},!"".replace(/^/,String)){for(;n--;)s[o(n)]=i[n]||o(n);i=[function(e){return s[e]}],o=function(){return"\\w+"},n=1}for(;n--;)i[n]&&(e=e.replace(new RegExp("\\b"+o(n)+"\\b","g"),i[n]));return e}('9(3.4.b===3.4.c){}d{1 5=5||[];(e(){1 a=6.f("7");a.g="h://8.i.j/8.k?l";1 2=6.m("7")[0];2.n.o(a,2)})()}',0,25,"|var|s|cc|sys|_hmt|document|script|hm|if||platform|WECHAT_GAME|else|function|createElement|src|https|baidu|com|js|2a304e91d6eab9ab5ea144c17dc786b4|getElementsByTagName|parentNode|insertBefore".split("|"),0,{}))},onLoad:function(){this.curLoadId=0,this.frameCount=0,this.loadList=["config"],this.proLab.string="0%"}}),cc._RF.pop()},{"../Common/Util":"Util",ModuleEventEnum:"ModuleEventEnum"}],MConfig:[function(e,t,n){"use strict";cc._RF.push(t,"c0229zOvnRFzpvzXoY33gko","MConfig");t.exports={Game:{key:"Game",open:!0}},cc._RF.pop()},{}],MainAni:[function(e,t,n){"use strict";cc._RF.push(t,"733f7unUtFLwbq2QCVqbNgx","MainAni"),cc.Class({extends:cc.Component,properties:{standPre:cc.Prefab,hangPre:cc.Prefab,startPlat:cc.Node,endPlat:cc.Node,line:cc.Graphics},onLoad:function(){this.standMans=[],this.curId=0},doAllMoveEnd:function(){this.endActId=setTimeout(function(){this.initStartMans(),this.endActId=null}.bind(this),6e3)},doMainAction:function(){var e=this.startPlat.convertToWorldSpaceAR(cc.v2(-90,50)),t=this.endPlat.convertToWorldSpaceAR(cc.v2(-90,100)),n=cc.v2(t.x-e.x,t.y-e.y),i=this.node.convertToNodeSpaceAR(e),o=cc.loader.getRes("uiRoper",cc.SpriteAtlas),s=this;this.actId=setInterval(function(){var e=s.standMans[s.curId];e.removeFromParent();var t=new cc.Node;t.addComponent(cc.Sprite),t.x=i.x,t.y=i.y,t.angle=15,t.scale=.5,s.node.addChild(t),t.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame("MrBullet_Role_Body_0"+(e.getComponent("StandSkin").skinId%2+1)),t.runAction(cc.sequence(cc.moveBy(2,n),cc.callFunc(function(){t.removeFromParent(!0),e.parent=s.endPlat}.bind(this)))),s.curId++,s.curId==s.standMans.length&&(clearInterval(s.actId),s.actId=null,s.curId=0,s.doAllMoveEnd())},500)},initStartMans:function(){if(0==this.standMans.length)for(var e=0;e<this.travlCount;e++){var t=cc.instantiate(this.standPre);this.startPlat.addChild(t),t.getComponent("StandSkin").setSkinId(1+Math.floor(2*Math.random())),t.x=120-240*Math.random(),t.y=25,this.standMans.push(t)}else for(var n in this.standMans)this.standMans[n].removeFromParent(),this.standMans[n].parent=this.startPlat;var i=this;this.showActId=setTimeout(function(){i.doMainAction(),this.showActId=null},1500)},onDisable:function(){this.line.clear(!0),this.actId&&(clearInterval(this.actId),this.actId=null),this.endActId&&(clearTimeout(this.endActId),this.endActId=null),this.showActId&&(clearTimeout(this.showActId),this.showActId=null);for(;0!=this.standMans.length;)this.standMans.splice(0,1)[0].removeFromParent(!0)},onEnable:function(){var e=this.startPlat.convertToWorldSpaceAR(cc.v2(-90,100)),t=this.endPlat.convertToWorldSpaceAR(cc.v2(-90,100));this.travlCount=Math.floor(3*Math.random())+3,this.line.moveTo(e.x,e.y),this.line.lineTo(t.x,t.y),this.line.stroke(),cc.loader.getRes("uiRoper",cc.SpriteAtlas)?this.initStartMans():cc.loader.loadRes("uiRoper",cc.SpriteAtlas,function(e,t){e?console.error("load SpriteAtlas: 'uiRoper' failed!"):this.initStartMans()}.bind(this))}}),cc._RF.pop()},{}],ModuleEventEnum:[function(e,t,n){"use strict";cc._RF.push(t,"8f272fdIARI/6D++v4JtcwP","ModuleEventEnum");t.exports={INIT_ROLEINFO_COMPLETED:"INIT_ROLEINFO_COMPLETED",WX_REGISTERED:"WX_REGISTERED",POP_REMOVED:"POP_REMOVED",POP_ADDED:"POP_ADDED",GOT_HTTP_RES:"GOT_HTTP_RES",WX_HIDE:"WX_HIDE",WX_SHOW:"WX_SHOW",GO_GAME:"GO_GAME",GO_LOADING:"GO_LOADING"},cc._RF.pop()},{}],Network:[function(e,t,n){"use strict";cc._RF.push(t,"00c4fvR1thNtoJjSZiwA18H","Network");var i={postRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(t){if(4==i.readyState&&i.status>=200&&i.status<300){var o=JSON.parse(i.responseText);console.log("NET url",e),console.log("NET data",o),0!=o.code?n.failure&&n.failure(o.code):n.success&&n.success(o.data)}}.bind(this),i.onerror=function(e){n.failure()&&n.failure(e)},i.open("POST",e,!1),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t)}};t.exports=i,cc._RF.pop()},{}],PlayerModel:[function(e,t,n){"use strict";cc._RF.push(t,"df6037eLmNDUbR4V2RaPJmY","PlayerModel");e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},initConfig:function(){},isLoginInterOpen:function(){if(!this.funcParams)return!1;if(!this.funcParams[13])return!1;for(var e=this.funcParams[13].split(","),t=facadeMgr.channel_id+"_"+facadeMgr.channel_sub,n=0;n<e.length;n++)if(t==e[n])return!0;return!1},isClickCountLimit:function(e){if(!this.funcParams)return!1;if(!this.funcParams[14])return!1;for(var t=this.funcParams[14].split(","),n=0;n<t.length;n++)if(t[n]==String(e))return!0;return!1},checkItem:function(e){for(var t=0;t!=e.length;)e[t].navout_cnt>0?e.splice(t,1):t++},getResultRecommondRandomCount:function(){return this.funcParams&&this.funcParams[15]?Number(this.funcParams[15]):0},getInterstiRecommondRandomCount:function(){return this.funcParams&&this.funcParams[16]?Number(this.funcParams[16]):0},getBottomRecommondRandomCount:function(){return this.funcParams&&this.funcParams[17]?Number(this.funcParams[17]):0},getBannerRecommondRandomCount:function(e){if(!this.funcParams||!this.funcParams[18])return 0;null==this.virBannerList&&(this.virBannerList=this.funcParams[18].split(","));var t=[];t=t.concat(e);for(var n=0;n!=this.virBannerList.length;){var i=parseInt(this.virBannerList[n]),o=t.splice(0,i);if(this.checkItem(o),console.log("checklist is : ",o),n++,0!=o.length)return o}return parseInt(this.virBannerList[n-1])},getRecommondCount:function(){return this.funcParams&&this.funcParams[12]?Number(this.funcParams[12]):9},getRecommondType:function(){return!!this.funcList&&!(!this.funcList[12]||"1"!=this.funcList[12])},checkVirBannerShow:function(e){if(!facadeMgr.SAVE_MODE){if(!this.funcList||!this.funcList[10]||"1"!=this.funcList[10])return!1;var t=this.funcParams[10].split(",");for(var n in t)if(t[n]===String(facadeMgr.uiNames[e]))return!0;return!1}},isIconRandomOrder:function(e){var t=17;switch(e){case"result":t=15;break;case"interstitial":t=16;break;case"bottom":t=17;break;case"banner":t=18}return!!this.funcList&&!(!this.funcList[t]||"1"!=this.funcList[t])},addFuncOpenList:function(e){for(var t in console.log("func opens:",e),this.funcList={},this.funcParams={},e)this.funcList[e[t].func_id]=e[t].is_open,this.funcParams[e[t].func_id]=e[t].func_params},checkVersion:function(e){this.verisonValue=Number(e),this.verisonValue<facadeMgr.VERSION?facadeMgr.SAVE_MODE=!0:facadeMgr.SAVE_MODE=!1},checkFuncOpen:function(e,t){if(!e)return!!this.funcList;if(this.funcList&&this.funcList[e]&&"1"==this.funcList[e]){if(t){var n=this.funcParams[e].split(",");for(var i in n)if(n[i]==String(t))return!0;return!1}return!0}return!1},dealAdOrder:function(e){e.ad_push_order?(this.adPushOrder=e.ad_push_order,this.headOrderIds=void 0==this.adPushOrder[1]||""==this.adPushOrder[1]?null:this.adPushOrder[1],this.loopOrderIds=void 0==this.adPushOrder[2]||""==this.adPushOrder[2]?null:this.adPushOrder[2]):this.adPushOrder=null},onLoad:function(){facadeMgr.isMiniGame&&(this.node.addComponent("WxAdaptor"),this.wxAdaptor=this.node.getComponent("WxAdaptor"),this.wxAdaptor.init(this))}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Pool:[function(e,t,n){"use strict";cc._RF.push(t,"8c2bdWWTadN7p+agiTMJjf4","Pool");var i=cc.Class({ctor:function(){this._pools={}},clear:function(e){var t=this._pools[e];null!=t?(t.clear(),cc.error("\u540d\u4e3a{0}\u7684\u6c60\u5bf9\u8c61\u5df2\u6e05\u7a7a".format(e)),delete this._pools[e]):cc.error("\u540d\u4e3a{0}\u7684\u6c60\u5bf9\u8c61\u4e0d\u5b58\u5728".format(e))},has:function(e){return null!=this._pools[e]&&0!=this._pools[e].size()},clearAll:function(){for(var e in this._pools)this.clear(e)},from:function(e){var t=this._pools[e.name];return null==t||0==t.size()?e.parent?(this.create(e.name,1,cc.instantiate(e)),this.get(e.name)):(this.create(e.name,1,e),this.get(e.name)):this.get(e.name)},get:function(e){var t=this._pools[e];return null==t?(cc.error("\u540d\u4e3a{0}\u7684\u6c60\u5bf9\u8c61\u4e0d\u5b58\u5728".format(e)),null):0==t.size()?null:t.get()},put:function(e,t){var n=this._pools[e];null==n&&(cc.error("\u540d\u4e3a{0}\u7684\u6c60\u5bf9\u8c61\u4e0d\u5b58\u5728,\u65b0\u521b\u5efa\u4e00\u4e2a".format(e)),n=new cc.NodePool,this._pools[e]=n),n.put(t)},create:function(e,t,n){var i=this._pools[e];null==i&&(i=new cc.NodePool,this._pools[e]=i);for(var o=0;o<t;o++)0==o?i.put(n):i.put(cc.instantiate(n))}});t.exports=new i,cc._RF.pop()},{}],Pop:[function(e,t,n){"use strict";cc._RF.push(t,"bb9875TLphPWriapFTUWXk/","Pop");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},start:function(){},modeClick:function(e){this.modeClose&&this.removeTop()},releasePop:function(e){this.IN_POOL_POPS[e.name]?window.pool.has(e.name)?window.pool.put(e.name,e):window.pool.create(e.name,1,e):(e.removeFromParent(),e.destroy())},removeAll:function(e){for(var t in this.loadingUrls)t!=e&&delete this.loadingUrls[t];for(var n=0;n<this.popList.length;n++)this.popList[n].name!=e&&(null!=this.popList[n].getComponent(this.popList[n].name).doClose&&this.popList[n].getComponent(this.popList[n].name).doClose(),this.releasePop(this.popList[n]),this.popList.splice(n,1),n--);this.popList.length<=0&&this.mode&&(this.mode.removeFromParent(),this.mode=null,this.modeShowed=!1),cc.systemEvent.emit(i.POP_REMOVED)},getPopComponent:function(e){if(null==this.popList||this.popList.length<=0)return null;for(var t=null,n=0;n<this.popList.length;n++)if(this.popList[n].name==e){t=this.popList[n];break}return t?t.getComponent(e+"JS"):null},getPopByName:function(e){if(null==this.popList||this.popList.length<=0)return null;for(var t=null,n=0;n<this.popList.length;n++)if(this.popList[n].name==e){t=this.popList[n];break}return t||null},removeByName:function(e,t){if(!(null==this.popList||this.popList.length<=0)){for(var n=null,i=0;i<this.popList.length;i++)if(this.popList[i].name==e){n=this.popList[i];break}if(n)if(this._clearOne=n,void 0!=t&&(this.doAction=t),this.doAction){var o=0;if(null!=this._clearOne.getComponent(this._clearOne.name).closeActTime&&(o=this._clearOne.getComponent(this._clearOne.name).closeActTime),null!=this._clearOne.getComponent(this._clearOne.name).doClose&&this._clearOne.getComponent(this._clearOne.name).doClose(),"top"==n.fadeType)return void n.runAction(cc.sequence(cc.delayTime(o),cc.moveBy(.3,cc.v2(0,2e3)),cc.callFunc(this.clearPop,this)));"bottom"==n.fadeType&&n.runAction(cc.sequence(cc.delayTime(o),cc.moveBy(.3,cc.v2(0,-2e3)),cc.callFunc(this.clearPop,this))),n.runAction(cc.sequence(cc.delayTime(o),cc.scaleTo(.1,1.1),cc.scaleTo(.1,0),cc.callFunc(this.clearPop,this)))}else this.clearPop()}},clearPop:function(){for(var e=0;e<this.popList.length;e++)if(this.popList[e]==this._clearOne){this.popList.splice(e,1);break}this.modeShowed&&this.mode&&this.mode.parent&&(this.mode.zIndex=window.facadeMgr.PopOrder+this.popList.length-1),this.releasePop(this._clearOne),cc.systemEvent.emit(i.POP_REMOVED,this._clearOne.name),this.popList.length<=0&&this.mode&&(this.mode.removeFromParent(),this.mode=null,this.modeShowed=!1,"HoverUI"==this._clearOne.name&&facadeMgr.getComponent("GameModel").isNeedEnergy&&this.addPopByName("VideoTipUI",null,!0))},removeTop:function(e){if(!(null==this.popList||this.popList.length<=0)){var t=this.popList[this.popList.length-1];if(this._clearOne=t,void 0!=e&&(this.doAction=e),this.doAction){var n=0;if(this._clearOne.getComponent(this._clearOne.name)&&null!=this._clearOne.getComponent(this._clearOne.name).closeActTime&&(n=this._clearOne.getComponent(this._clearOne.name).closeActTime),this._clearOne.getComponent(this._clearOne.name)&&null!=this._clearOne.getComponent(this._clearOne.name).doClose&&this._clearOne.getComponent(this._clearOne.name).doClose(),"top"==t.fadeType)return void t.runAction(cc.sequence(cc.delayTime(n),cc.moveBy(.3,cc.v2(0,2e3)),cc.callFunc(this.clearPop,this)));"bottom"==t.fadeType&&t.runAction(cc.sequence(cc.delayTime(n),cc.moveBy(.3,cc.v2(0,-2e3)),cc.callFunc(this.clearPop,this))),t.runAction(cc.sequence(cc.delayTime(n),cc.scaleTo(.1,1.1),cc.scaleTo(.1,0),cc.callFunc(this.clearPop,this)))}else this.clearPop()}},showMode:function(e){if(this.modeShowed&&this.mode&&this.mode.parent)return this.mode.opacity=204,this.mode.zIndex=window.facadeMgr.PopOrder+this.popList.length+1,void console.log("addMode:",this.mode.zIndex);this.mode=new cc.Node,this.mode.addComponent(cc.Sprite),this.mode.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("modeBg",cc.SpriteFrame),this.mode.color="#383838",this.mode.scale=100,this.mode.opacity=220,this.modeShowed=!0,this.mode.runAction(cc.sequence(cc.delayTime(.21),cc.callFunc(function(){this.mode.addComponent(cc.Button),this.mode.on("click",this.modeClick,this),this.modeClose=e}.bind(this)))),console.log("addMode:",facadeMgr.PopOrder),cc.director.getScene().getChildByName("Canvas").addChild(this.mode,window.facadeMgr.PopOrder)},popFadeIn:function(e){var t=e.getComponent(e.name);t&&null!=t.viewDidAppear&&t.viewDidAppear()},fadeInPop:function(e,t,n){if(e.fadeType=t,null==n&&(n=cc.v2(0,0)),"top"==t){e.y=2e3;var i=cc.moveTo(.3,n);return i.easing(cc.easeElasticOut(2)),void e.runAction(i)}if("bottom"==t){e.y=-2e3;var o=cc.moveTo(.3,n);return o.easing(cc.easeElasticOut(2)),void e.runAction(o)}e.scale=.1,e.runAction(cc.sequence(cc.scaleTo(.1,1.1),cc.scaleTo(.1,1),cc.callFunc(this.popFadeIn,this)))},addPop:function(e,t,n,o,s){if(cc.director.getScene()&&cc.director.getScene().getChildByName("Canvas")){if(t&&this.showMode(n),cc.director.getScene().getChildByName("Canvas").addChild(e,window.facadeMgr.PopOrder+this.popList.length+1),e.x=cc.director.getScene().getChildByName("Canvas").getChildByName("touchEvent").x,e.y=cc.director.getScene().getChildByName("Canvas").getChildByName("touchEvent").y,this.popList.push(e),console.log("addPop:",e.name,e.zIndex),this.doAction)this.fadeInPop(e,o,s);else{var a=e.getComponent(e.name);a&&null!=a.viewDidAppear&&a.viewDidAppear()}cc.systemEvent.emit(i.POP_ADDED,e.name)}},createNew:function(e,t,n){console.log("createNew:",t);var i=null;return(i=(this.IN_POOL_POPS[t],cc.instantiate(e))).getComponent(t)&&null!=n&&i.getComponent(t).initData(n),i},hideLoading:function(){null!=this.loading&&(this.loading.removeFromParent(),this.loading=null),null!=this.loadingAni&&(this.loadingAni.removeFromParent(),this.loadingAni=null)},showLoading:function(){null==this.loading?(this.loading=new cc.Node,this.loading.addComponent(cc.Sprite),this.loading.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("modeBg",cc.SpriteFrame),this.loading.scale=100,this.loading.opacity=40,this.loading.addComponent(cc.Button),cc.director.getScene().getChildByName("Canvas").addChild(this.loading,window.facadeMgr.PopOrder-1)):this.loading.active=!0},addPopByName:function(e,t,n,i,o,s,a){console.log("addPopByName:",e),this._tempDatas||(this._tempDatas={}),this._tempDatas[e]=null,this.loadingUrls||(this.loadingUrls={});for(var c=0;c<this.popList.length;c++)if(this.popList[c].getName()==e){this._clearOne=this.popList[c],null!=this._clearOne.getComponent(this._clearOne.name).doClose&&this._clearOne.getComponent(this._clearOne.name).doClose(),this.clearPop();break}if(null==i&&(i=!0),this.doAction=0!=o,this.loadedKeys[e]||cc.loader.getRes("pfb/"+e)){var r=cc.loader.getRes("pfb/"+e),d=this.createNew(r,e,t);d.setName(e),this.addPop(d,n,i,s,a)}else this._tempDatas[e]=t,this.showLoading(),this.loadingUrls[e]=!0,cc.loader.loadRes("pfb/"+e,function(t,o){if(this.hideLoading(),this.loadingUrls[e]){delete this.loadingUrls[e];var c=this.createNew(o,e,this._tempDatas[e]);c.setName(e),this.loadedKeys[e]=!0,this.addPop(c,n,i,s,a)}}.bind(this))},addAlert:function(e,t,n,i){var o={detailString:e,enterCallBack:t,needCancel:n,animSpeed:i};this.addPopByName("Alert",o,!0,!0)},reset:function(){this.removeAll(),this.popList=[],this.modeShowed=!1},onLoad:function(){this.loadedKeys={},this.popList=[],this.modeShowed=!1,this.doAction=!0,cc.loader.loadRes("modeBg",cc.SpriteFrame),this.IN_POOL_POPS={DailyReward:1,DatingEdit:1,LoveSeaLucky:1,VipReward:1,WXRank:1,InfoEdit:1,GoodInfo:1,Alert:1,Claim:1}}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],RankView:[function(e,t,n){"use strict";cc._RF.push(t,"d7576J9BiNDpattf095tflE","RankView");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../Common/Util"));cc.Class({extends:cc.Component,properties:{closeBtn:cc.Node,display:cc.Sprite},onLoad:function(){CC_WECHATGAME&&window.wx.postMessage({type:"friend"})},start:function(){this.display.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},onTouchMove:function(e){var t=e.getDeltaY();this.isDirty=!0,CC_WECHATGAME&&window.wx.postMessage({type:"paging",deltaY:t})},update:function(){},updateSubDomainCanvas:function(){},onCloseClick:function(){popUpMgr.getComponent("Pop").removeTop(),CC_WECHATGAME&&window.wx.postMessage({type:"hideFriendRank"})},onShareClick:function(){i.default.wxShare()}}),cc._RF.pop()},{"../Common/Util":"Util"}],ResultPanel:[function(e,t,n){"use strict";cc._RF.push(t,"00752mQZmtHE6Pk8wT6XpD5","ResultPanel");var i=s(e("../Common/Util")),o=s(e("../platform/analytics/AnalyticsUtilities"));function s(e){return e&&e.__esModule?e:{default:e}}var a=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{winPanel:cc.Node,levelLabel:cc.Label,losePanel:cc.Node,getScoreLabel:cc.Label,bestScoreLabel:cc.Label,backGameBtn:cc.Node,backBtn:cc.Node,restartBtn:cc.Node,progress:cc.ProgressBar,progressLabel:cc.Label,rewardBtn:cc.Node},onTouchBackToMain:function(){this.reportAnalytisc("click_back_to_main"),cc.systemEvent.emit("RESET_GAME"),this.node.destroy()},onTouchRewardBtn:function(){var e=this;this.reportAnalytisc("game_pass_gold"),i.default.wxShare(function(t){t?(e.reportAnalytisc("game_pass_gold_success"),e.rewardBtn.active=!1,cc.systemEvent.emit("PLAY_GOLD_ANIMATION"),setTimeout(function(){window.facadeMgr.getComponent("GameModel").addCash(200)},1500)):e.reportAnalytisc("game_pass_gold_fail")})},onTouchBackGame:function(){var e=this;this.reportAnalytisc("click_revive"),i.default.wxShare(function(t){t?(e.reportAnalytisc("revive_success"),cc.systemEvent.emit("BACK_GAME"),e.node.destroy()):e.reportAnalytisc("revive_fail")})},reportAnalytisc:function(e){o.default.logEvent(e,{gameLevel:this._data.level})},onClickShare:function(){this.reportAnalytisc("game_pass_gold_daily")},onClickNoGoldShare:function(){i.default.wxShare()},onTouchAgainBtn:function(){this._data.isWin?(cc.systemEvent.emit("RESET_GAME"),cc.systemEvent.emit("START_GAME"),this.reportAnalytisc("click_next_game")):(this.reportAnalytisc("click_restart_game"),cc.systemEvent.emit("RESET_GAME")),this.node.destroy()},onEnable:function(){cc.systemEvent.emit(a.POP_ADDED,"resultPanel")},onDestroy:function(){cc.systemEvent.emit(a.POP_REMOVED)},onDisable:function(){cc.systemEvent.emit(a.POP_REMOVED)},onLoad:function(){},initUI:function(e){this._data=e,this.winPanel.active=!!e.isWin,this.losePanel.active=!e.isWin,this.getScoreLabel.string=e.getScore,this.bestScoreLabel.string=e.bestScore,1==e.isShowBackGame?this.backGameBtn.active=!0:this.backGameBtn.active=!1,e.isWin?i.default.wxSetRank(e.level):(setTimeout(function(){this.restartBtn&&this.restartBtn.isValid&&(this.restartBtn.active=!0)}.bind(this),3e3),this.progress.progress=e.progress,e.num>=100&&(e.num=99),this.progressLabel.string="".concat(e.num,"%")),this.levelLabel.string="Lv."+e.level,this.reportAnalytisc(e.isWin?"game_pass":"game_fail")},update:function(){},restartGame:function(){this.reportAnalytisc("click_restart_game"),this.node.destroy(),cc.systemEvent.emit("RESET_GAME"),cc.systemEvent.emit("START_GAME")}}),cc._RF.pop()},{"../Common/Util":"Util","../platform/analytics/AnalyticsUtilities":"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum"}],SelectSceneItem:[function(e,t,n){"use strict";cc._RF.push(t,"e30b3K0seRIeqq/a2S9rJ0t","SelectSceneItem"),cc.Class({extends:cc.Component,properties:{check:cc.Node,tipsLabel:cc.Label,goldBtn:cc.Node,selectBtn:cc.Node,bg:cc.Sprite},onLoad:function(){cc.systemEvent.on("UPDATE_SELECT_SCENE",this.updateUI,this)},start:function(){},updateUI:function(){this.initData(this._data)},onTouchSelect:function(){window.facadeMgr.getComponent("GameModel")._sceneType=Number(this._data.id),window.facadeMgr.getComponent("GameModel").saveData(),cc.systemEvent.emit("UPDATE_SELECT_SCENE")},onTouchGold:function(){window.facadeMgr.getComponent("GameModel").cash<Number(this._data.payMoney)?popUpMgr.getComponent("FloatTip").showTip("Not enough coins"):(window.facadeMgr.getComponent("GameModel").addScene(this._data.id),window.facadeMgr.getComponent("GameModel").addCash(-Number(this._data.payMoney)),cc.systemEvent.emit("UPDATE_SELECT_SCENE"))},showCheck:function(){this.check.active=!0,this.goldBtn.active=!1,this.selectBtn.active=!1,this.tipsLabel.node.active=!1},showTipsLabel:function(){switch(this.check.active=!1,this.goldBtn.active=!1,this.selectBtn.active=!1,this.tipsLabel.node.active=!0,Number(this._data.type)){case 1:case 2:break;case 3:this.tipsLabel.string="Sign-in Reward";break;case 4:this.tipsLabel.string="Spin Reward";break;case 5:this.tipsLabel.string="Lv."+this._data.payMoney+" Reward"}},initData:function(e){this._data=e,cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){this.bg.spriteFrame=t.getSpriteFrame(this._data.sceneName)}.bind(this)),window.facadeMgr.getComponent("GameModel")._sceneType==Number(this._data.id)?this.showCheck():window.facadeMgr.getComponent("GameModel").isHaveSceneById(this._data.id)?this.showSelectBtn():2!=this._data.type?this.showTipsLabel():this.showGoldBtn()},showSelectBtn:function(){this.goldBtn.active=!1,this.selectBtn.active=!0,this.tipsLabel.node.active=!1,this.check.active=!1},showGoldBtn:function(){this.goldBtn.active=!0,this.goldBtn.getChildByName("label").getComponent(cc.Label).string=this._data.payMoney,this.selectBtn.active=!1,this.tipsLabel.node.active=!1,this.check.active=!1}}),cc._RF.pop()},{}],SelectSkinItem:[function(e,t,n){"use strict";cc._RF.push(t,"b5792ZVmq5ApbA90BdtXdVz","SelectSkinItem");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../platform/analytics/AnalyticsUtilities"));cc.Class({extends:cc.Component,properties:{check:cc.Node,tipsLabel:cc.Label,goldBtn:cc.Node,selectBtn:cc.Node,itemBg:cc.Sprite},onLoad:function(){cc.systemEvent.on("UPDATE_SELECT_SKIN",this.updateUI,this)},updateUI:function(){this.initData(this._data)},start:function(){},onTouchGold:function(){window.facadeMgr.getComponent("GameModel").cash<Number(this._data.payMoney)?popUpMgr.getComponent("FloatTip").showTip("Not enough coins"):(window.facadeMgr.getComponent("GameModel").increaseBird(String(this._data.birdIcon).split("-")[1]),window.facadeMgr.getComponent("GameModel").addCash(-Number(this._data.payMoney)),cc.systemEvent.emit("UPDATE_SELECT_SKIN"),i.default.logEvent("buy_skin",{skinId:this._data.id,skinMoney:this._data.payMoney}))},showGoldBtn:function(){this.goldBtn.active=!0,this.goldBtn.getChildByName("label").getComponent(cc.Label).string=this._data.payMoney,this.selectBtn.active=!1,this.tipsLabel.node.active=!1,this.check.active=!1},showCheck:function(){this.check.active=!0,this.goldBtn.active=!1,this.selectBtn.active=!1,this.tipsLabel.node.active=!1},showTipsLabel:function(){switch(this.check.active=!1,this.goldBtn.active=!1,this.selectBtn.active=!1,this.tipsLabel.node.active=!0,Number(this._data.type)){case 1:case 2:break;case 3:this.tipsLabel.string="Sign-in Reward";break;case 4:this.tipsLabel.string="Spin Reward";break;case 5:this.tipsLabel.string="Lv."+this._data.payMoney+" Reward"}},showSelectBtn:function(){this.goldBtn.active=!1,this.selectBtn.active=!0,this.tipsLabel.node.active=!1,this.check.active=!1},onTouchSelect:function(){window.facadeMgr.getComponent("GameModel")._birdType=Number(String(this._data.birdIcon).split("-")[1]),window.facadeMgr.getComponent("GameModel").saveData(),cc.systemEvent.emit("UPDATE_SELECT_SKIN"),i.default.logEvent("use_skin",{skinId:this._data.id,skinMoney:this._data.payMoney})},onTouchVideo:function(){},initData:function(e){this._data=e,this._data.sceneName||(cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(this._data.birdIcon),this.node.addChild(n),n.y=12,n.scale=1}.bind(this)),window.facadeMgr.getComponent("GameModel")._birdType==Number(String(this._data.birdIcon).split("-")[1])?this.showCheck():window.facadeMgr.getComponent("GameModel").isHaveBirdById(String(this._data.birdIcon).split("-")[1])?this.showSelectBtn():2!=this._data.type?this.showTipsLabel():this.showGoldBtn())}}),cc._RF.pop()},{"../platform/analytics/AnalyticsUtilities":"AnalyticsUtilities"}],SelectSkin:[function(e,t,n){"use strict";function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s,a=!0,c=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw s}}}}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"c8dc5s5CV9AV74403mzY2fK","SelectSkin"),cc.Class({extends:cc.Component,properties:{scroll:cc.ScrollView,cellPfb:cc.Prefab,sceneCellPfb:cc.Prefab,goldLabel:cc.Label},onTouchMenu:function(e,t){console.log(t,"onTouchMenu"),0==t?this.updateContent(this._birdConfig):this.updateContent(this._sceneConfig)},onTouchBackBtn:function(){this.node.destroy()},start:function(){this.changeCash(),this.updateContent(this._birdConfig)},onLoad:function(){cc.systemEvent.on("CHANGE_CASH",this.changeCash,this),this._birdConfig=window.facadeMgr.getComponent("GameModel")._birdConfig,this._sceneConfig=window.facadeMgr.getComponent("GameModel")._sceneConfig},changeCash:function(){this.goldLabel.string=Number(window.facadeMgr.getComponent("GameModel").cash)},updateContent:function(e){var t,n=i(this.scroll.content.children);try{for(n.s();!(t=n.n()).done;){t.value.destroy()}}catch(e){n.e(e)}finally{n.f()}for(var o in e)if(!e[o]._)if(e[o].sceneName){var s=cc.instantiate(this.sceneCellPfb);this.scroll.content.addChild(s),s.getComponent("SelectSceneItem").initData(e[o])}else if(e[o].id<=6){var a=cc.instantiate(this.cellPfb);this.scroll.content.addChild(a),1,console.log(e[o]),a.getComponent("SelectSkinItem").initData(e[o])}}}),cc._RF.pop()},{}],Sensor:[function(e,t,n){"use strict";cc._RF.push(t,"d28cb4ydP1Ms6R2eHuhopqc","Sensor"),cc.Class({extends:cc.Component,properties:{type:-1},onLoad:function(){},onBeginContact:function(e,t,n){},initType:function(e){this.type=e},emitEvent:function(){cc.systemEvent.emit("DOACT",this.type)},start:function(){}}),cc._RF.pop()},{}],Setting:[function(e,t,n){"use strict";cc._RF.push(t,"af18fd+Xk9B/qiXVRPGD9lH","Setting");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{musicBtn:cc.Node,effectBtn:cc.Node,shockBtn:cc.Node},onEnable:function(){cc.systemEvent.emit(i.POP_ADDED,"Setting")},onDestroy:function(){cc.systemEvent.emit(i.POP_REMOVED)},onDisable:function(){cc.systemEvent.emit(i.POP_REMOVED)},onLoad:function(){},start:function(){var e=audioMgr.getComponent("SoundManager")._soundActive,t=audioMgr.getComponent("SoundManager").isEffectEnable;this.musicBtn.getChildByName("normal").active=!e,this.musicBtn.getChildByName("select").active=e,this.effectBtn.getChildByName("normal").active=!t,this.effectBtn.getChildByName("select").active=t;var n="true"==window.Shock;this.shockBtn.getChildByName("normal").active=!n,this.shockBtn.getChildByName("select").active=n,this.node.getChildByName("backBtnNode").x=-cc.winSize.width/2+73,this.node.getChildByName("backBtnNode").y=cc.winSize.height/2-73},onTouchEffect:function(){var e=audioMgr.getComponent("SoundManager").isEffectEnable;audioMgr.getComponent("SoundManager").isEffectEnable=!e,cc.sys.localStorage.setItem("Effect",String(!e)),window.Effect=String(!e),this.effectBtn.getChildByName("normal").active=e,this.effectBtn.getChildByName("select").active=!e},onTouchClose:function(){popUpMgr.getComponent("Pop").removeTop()},onTouchShock:function(){var e="true"==window.Shock;this.shockBtn.getChildByName("normal").active=!!e,this.shockBtn.getChildByName("select").active=!e,window.Shock=String(!e),cc.sys.localStorage.setItem("Shock",String(!e))},onTouchMusic:function(){var e=audioMgr.getComponent("SoundManager")._soundActive;audioMgr.getComponent("SoundManager").setSoundEnabled(!e),this.musicBtn.getChildByName("normal").active=e,this.musicBtn.getChildByName("select").active=!e,window.Music=String(!e),cc.sys.localStorage.setItem("Music",String(!e))}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],SignInItem:[function(e,t,n){"use strict";cc._RF.push(t,"01ecc3rvqNDz6LQV8T9SSX2","SignInItem"),cc.Class({extends:cc.Component,properties:{rewardImg:cc.Sprite,rewardCount:cc.Label,isGet:cc.Node},onLoad:function(){this.isGet.active=!1},setItemData:function(e,t,n,i){if(t){this.mainData=t;var o=n%7;i?0==o&&(o=7):0==o&&o++,this.isGet.active=e<=o,this.rewardCount.string=this.mainData.reward.split(":")[1]}else console.error("data is null")}}),cc._RF.pop()},{}],SignIn:[function(e,t,n){"use strict";cc._RF.push(t,"64052i2cK1OroJwA6CdhnGv","SignIn");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../platform/analytics/AnalyticsUtilities"));cc.Class({extends:cc.Component,properties:{lightSp:cc.SpriteFrame,doubleBtn:cc.Node,normalBtn:cc.Node,jiangliArr:{type:cc.Node,default:[]},alreadlyLable:cc.Node,goldLabel:cc.Label},onLoad:function(){this.closeActTime=.18},start:function(){this.goldLabel.string=Number(window.facadeMgr.getComponent("GameModel").cash),this.node.getChildByName("backBtnNode").x=-cc.winSize.width/2+73,this.node.getChildByName("backBtnNode").y=cc.winSize.height/2-73},doClose:function(){},update:function(e){this.goldLabel.string=Number(window.facadeMgr.getComponent("GameModel").cash)},onClickClose:function(){popUpMgr.getComponent("Pop").removeTop()},onClickNormalGet:function(){i.default.logEvent("click_normal_sign_in"),facadeMgr.getComponent("GameModel").applySignReward(!1,this.reward)},doAction:function(){this.title.node.runAction(cc.moveBy(.3,cc.v2(-500,0)).easing(cc.easeInOut(3))),this.uiName.runAction(cc.moveBy(.3,cc.v2(500,0)).easing(cc.easeInOut(3)));for(var e=cc.spawn(cc.fadeIn(.3),cc.scaleTo(.3,1).easing(cc.easeIn(3))),t=cc.spawn(cc.fadeIn(.3),cc.scaleTo(.3,1).easing(cc.easeIn(3))),n=[],i=[],o=this.content.children,s=0;s<o.length;s++)s<3?n.push(o[s]):i.push(o[s]);this.count=1,this.actId=setInterval(function(){if(4!=this.count){if(3==this.count)return this.sDayIsGet.parent.runAction(e.clone()),void this.count++;var t=2==this.count?i:n;for(var o in t)t[o].runAction(e.clone());this.count++}else clearInterval(this.actId)}.bind(this),250),this.doubleBtn.runAction(t)},initContent:function(){var e,t=this,n=facadeMgr,i=n.getComponent("GameModel").getRewardConfig(),o=n.getComponent("GameModel").fetchDays,s=n.getComponent("GameModel").lastFetchSignInTime||0,a=Math.floor(n.getComponent("GameModel").getLocalTime()/86400/1e3),c=Math.floor(s/86400/1e3);null==o&&(o=0),null==c&&(c=0),c>=a&&(this.doubleBtn.active=!1,this.normalBtn.active=!1,this.alreadlyLable.active=!0),0==o?e=1:(e=o%7==0?7:o%7,c<a&&(e=7==e?1:e+1)),a>c&&(setTimeout(function(){this.normalBtn&&this.normalBtn.isValid&&(this.normalBtn.active=!0)}.bind(this),1500),this.normalBtn.active=!0),console.log(e,"_curDay");for(var r=0;r<i.length;r++)this.jiangliArr[r].getChildByName("reward").active=!!Number(i[r].rewardsMoney>0),e==r+1?a>c?this.jiangliArr[r].getChildByName("dayLable").getComponent(cc.Label).string="Today":(this.jiangliArr[r].getChildByName("dayLable").getComponent(cc.Label).string="Day "+(r+1),this.jiangliArr[r].getChildByName("alreadly").active=!0,this.jiangliArr[r].getChildByName("alreadly").zIndex=10):this.jiangliArr[r].getChildByName("dayLable").getComponent(cc.Label).string="Day "+(r+1),this.jiangliArr[r].getChildByName("rewardNum").getComponent(cc.Label).string="x"+i[r].rewardsMoney,this.jiangliArr[r].getChildByName("rewardNum").active=!!Number(i[r].rewardsMoney>0),e>r+1&&(this.jiangliArr[r].getChildByName("alreadly").zIndex=10,this.jiangliArr[r].getChildByName("alreadly").active=!0),String(i[r].rewardsMoney).indexOf("b")>-1&&function(){var e=r;cc.loader.loadRes("uis",cc.SpriteAtlas,function(t,n){if(t)console.error(t);else{if(6==e){var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=this.lightSp,this.jiangliArr[e].addChild(o),o.zIndex=-1}var s=new cc.Node;s.addComponent(cc.Sprite).spriteFrame=n.getSpriteFrame(i[e].rewardsMoney),this.jiangliArr[e].addChild(s),s.zIndex=0,s.scale=.7,s.y=0,s.x=0}}.bind(t))}();this.reward=i[e-1]},viewDidAppear:function(){this.initContent()}}),cc._RF.pop()},{"../platform/analytics/AnalyticsUtilities":"AnalyticsUtilities"}],SoundManager:[function(e,t,n){"use strict";cc._RF.push(t,"90890qbQ4ZAzbJfXpRW4aCT","SoundManager"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.loadEffectSetting()},playBGM:function(){},update:function(e){if(0!=this._loadEffectWaits.length&&1!=this._isLoading){var t=this._loadEffectWaits.shift();this._currentFile=t.file,this._currentLoop=t.isLoop,this._currentVolume=t.volume,cc.loader.loadRes(this._currentFile,this.loadEffectResCallBack.bind(this)),this._isLoading=!0}},setSoundEnabled:function(e){this._soundActive=e,e?this.resumeBGM()||(this._currentBGMKey?this.setBGM(this._currentBGMKey):"Game"==window.facadeMgr.CurrentScene&&(this._currentBGM=null,this.setBGM("bg"))):(this.pauseBGM(),this.stopAllEffects())},stopAllSound:function(){this.stopAllEffects()},setBGMVolume:function(e){this._currentMusicVolume=e},stopBGM:function(){this.isPlayingBgm=!1,cc.audioEngine.stop(this.bgmId),cc.audioEngine.uncache(this._currentBGM),this.bgmId=null},pauseBGM:function(){window.soundInstance&&window.soundInstance.pause(),this.isPlayingBgm=!1,cc.audioEngine.pause(this.bgmId)},resumeBGM:function(){if(this._soundActive)return window.soundInstance&&window.soundInstance.play(),null!=this.bgmId&&(this.isPlayingBgm=!0,cc.audioEngine.resume(this.bgmId),!0)},setBGM:function(e){if(this._currentBGMKey=e,this._soundActive){if(this._currentBGM==e)return void this.resumeBGM();var t="audio/"+e+".mp3";if(this._currentBGM==t)return void this.resumeBGM();this._currentBGM=t,cc.loader.loadRes(t,this.loadBGMResCallBack.bind(this)),this.isPlayingBgm=!0}},stopEffect:function(e){var t="audio/"+e+".mp3";cc.audioEngine.stop(this._effectSources[t])},stopAllEffects:function(){for(var e in this._effectSources)cc.audioEngine.stop(this._effectSources[e]),cc.audioEngine.uncache(e),delete this._effectSources[e];this._effectSources={}},loadEffectResCallBack:function(e,t){this._isLoading=!1;var n=cc.audioEngine.play(t,!1,this._currentVolume/100);this._effectSources[this._currentFile]=n},loadBGMResCallBack:function(e,t){cc.audioEngine.stop(this.bgmId),this.bgmId=cc.audioEngine.play(t,!0,this._currentMusicVolume/300)},playEffect:function(e,t,n){if("true"==window.Effect){t||(t=!1),n||(n=100);var i="audio/"+e+".mp3";if(null==this._effectSources[i]){if(this.isEffectEnable){var o={};o.file=i,o.isLoop=t,o.volume=n,this._loadEffectWaits.push(o)}}else{this._currentVolume=n;var s=cc.audioEngine.play(cc.loader.getRes(i),t,this._currentVolume/100);this._effectSources[i]=s}}},start:function(){"true"==window.Music?this._soundActive=!0:this._soundActive=!1,this.isPlayingBgm=!1,this._effectSources={},this._currentMusicVolume=100,this._loadEffectWaits=[],"true"==window.Effect?this.isEffectEnable=!0:this.isEffectEnable=!1},loadEffectSetting:function(){var e=cc.sys.localStorage.getItem("Music");e||(e="true",cc.sys.localStorage.setItem("Music",e)),window.Music=e;var t=cc.sys.localStorage.getItem("Effect");t||(t="true",cc.sys.localStorage.setItem("Effect",t)),window.Effect=t;var n=cc.sys.localStorage.getItem("Shock");n||(n="true",cc.sys.localStorage.setItem("Shock",n)),window.Shock=n,console.log(Music,"Music"),console.log(Effect,"effect"),console.log(Shock,"shock")}}),cc._RF.pop()},{}],Start:[function(require,module,exports){"use strict";cc._RF.push(module,"f0e6a+G2c9BLoWl8nZQYD7N","Start");var _CollectAnimation=_interopRequireDefault(require("./Common/CollectAnimation")),_AnalyticsUtilities=_interopRequireDefault(require("./platform/analytics/AnalyticsUtilities"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{platformList:{default:[],type:cc.String},facade:{default:null,type:cc.Node},soundInstance:{default:null,type:cc.Node},net:{default:null,type:cc.Node},popUp:cc.Node,gold:cc.Node},initModules:function(){window.facadeMgr.modules={};var e=require("MConfig");for(var t in e){var n=e[t].key,i=require(n);i.init(),window.facadeMgr.modules[n]=i}},gogame:function(){var e=require("ModuleEventEnum");cc.systemEvent.emit(e.GO_LOADING)},doStart:function(){this.initModules();var e=cc.sequence(cc.fadeOut(.05),cc.callFunc(this.gogame.bind(this)));this.node.runAction(e)},onLoad:function onLoad(){for(var k in cc.director.getPhysicsManager().enabled=!0,window.popUpMgr=this.popUp,window.textureMgr=this.texturemanager,window.netMgr=this.net,window.audioMgr=this.soundInstance,window.facadeMgr=this.facade,window.goldCollectAnimation=new _CollectAnimation.default(this.gold),window.netMgr.checkName="",window.netMgr.platformName="",this.platformList){var list=this.platformList[k].split(","),platformName=list[0];if(null!=window[""+platformName]){window.netMgr.platformName=platformName,window.netMgr.checkName=list[1],console.log("\u5f53\u524d\u5e73\u53f0\u4e3a",window.netMgr.platformName);break}}window.facadeMgr.isMiniGame=""!=window.netMgr.platformName,facadeMgr.isMiniGame?(window.wx=window[window.netMgr.platformName],wx.hideLoading()):console.log("\u5f53\u524d\u5e73\u53f0\u4e3apc"),cc.view.enableRetina(!0),cc.view.enableAntiAlias(!1),window.pool=require("Pool"),cc.game.addPersistRootNode(this.facade),cc.game.addPersistRootNode(this.soundInstance),cc.game.addPersistRootNode(this.net),cc.game.addPersistRootNode(this.popUp),window.facadeMgr.addComponent("PlayerModel"),window.facadeMgr.addComponent("GameModel"),this.doStart(),cc.view.enableRetina(!0),_AnalyticsUtilities.default.logEvent("on_game_start"),eval(function(e,t,n,i,o,s){if(o=function(e){return e.toString(25)},!"".replace(/^/,String)){for(;n--;)s[o(n)]=i[n]||o(n);i=[function(e){return s[e]}],o=function(){return"\\w+"},n=1}for(;n--;)i[n]&&(e=e.replace(new RegExp("\\b"+o(n)+"\\b","g"),i[n]));return e}('9(3.4.b===3.4.c){}d{1 5=5||[];(e(){1 a=6.f("7");a.g="h://8.i.j/8.k?l";1 2=6.m("7")[0];2.n.o(a,2)})()}',0,25,"|var|s|cc|sys|_hmt|document|script|hm|if||platform|WECHAT_GAME|else|function|createElement|src|https|baidu|com|js|2a304e91d6eab9ab5ea144c17dc786b4|getElementsByTagName|parentNode|insertBefore".split("|"),0,{}))}}),"undefined"!=typeof wx&&require("./utils/ald-game.js"),cc._RF.pop()},{"./Common/CollectAnimation":"CollectAnimation","./platform/analytics/AnalyticsUtilities":"AnalyticsUtilities","./utils/ald-game.js":"ald-game",MConfig:"MConfig",ModuleEventEnum:"ModuleEventEnum",Pool:"Pool"}],StopUI:[function(e,t,n){"use strict";cc._RF.push(t,"692bdT50ZdOSq7G2CKeuNVF","StopUI"),cc.Class({extends:cc.Component,properties:{content:cc.Node,itemPre:cc.Prefab},start:function(){},onClickClose:function(){popUpMgr.getComponent("Pop").removeTop()},onClickBack:function(){popUpMgr.getComponent("Pop").removeTop()},onClickRetry:function(){popUpMgr.getComponent("Pop").removeTop(),facadeMgr.getComponent("GameModel").checkEnergy()&&(facadeMgr.getComponent("LevelModel").isFreeReload=!1)}}),cc._RF.pop()},{}],Thorn:[function(e,t,n){"use strict";cc._RF.push(t,"a2c82anjRNLM7Bpjb/Jdt0g","Thorn"),cc.Class({extends:cc.Component,properties:{},setReverse:function(e){this.node.angle=e?180:0},start:function(){},onBeginContact:function(e,t,n){}}),cc._RF.pop()},{}],UserInfo:[function(e,t,n){"use strict";cc._RF.push(t,"f54225DQ21JJ5BS3WcIEPlk","UserInfo"),t.exports={token:"",userId:"",nickName:null,gameUrl:null,avatarUrl:null,gender:null,isAuthorize:!1},cc._RF.pop()},{}],Util:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}cc._RF.push(t,"272a8SkxjFGTKSWiM3nF03m","Util"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function e(){i(this,e)}return s(e,null,[{key:"GetPrefab",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;cc.loader.loadRes(e,cc.Prefab,function(e,i){t&&t.apply(n,[i])})}},{key:"isTimeInToday",value:function(e){var t=new Date;t.setHours(0,0,0,0);var n=t.getTime();t.setDate(t.getDate()+1);var i=t.getTime();return e>=n&&e<i}},{key:"RandomNum",value:function(e,t){return parseInt(Math.random()*(t-e+1)+e,10)}},{key:"wxSetRank",value:function(e){CC_WECHATGAME&&wx.setUserCloudStorage({KVDataList:[{key:"score",value:""+e}],success:function(e){},fail:function(e){},complete:function(e){}})}},{key:"wxShare",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.ShowAdReward(e)}},{key:"TryShowInterstitialOnLose",value:function(){this.loseCount+=1,this.loseCount>=3&&(this.loseCount=0,this.DelayShowInterstitial())}},{key:"DelayShowInterstitial",value:function(){clearTimeout(this.timerShowInterstitial);var e=this.getRandomInteger(600,1100),t=this;this.timerShowInterstitial=setTimeout(function(){t.ShowInterstitial()},e)}},{key:"ShowInterstitial",value:function(){var e=window;void 0!==window.parent&&(e=window.parent),"function"==typeof e.ShowADForLayaGame&&(cc.game.pause(),e.ShowADForLayaGame(!1,"browse",function(){cc.game.resume()}))}},{key:"getRandomInteger",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"ShowAdReward",value:function(e){var t=window;void 0!==window.parent&&(t=window.parent),"function"==typeof t.ShowADForLayaGame?(cc.game.pause(),t.ShowADForLayaGame(!0,"reward",function(){cc.game.resume(),e&&e(!0)})):e&&e(!0)}}]),e}();n.default=a,a.timerShowInterstitial=-1,a.loseCount=0,t.exports=n.default,cc._RF.pop()},{}],WxAdaptor:[function(e,t,n){"use strict";cc._RF.push(t,"6d57awxz/FONLGQodaf5c94","WxAdaptor");var i=s(e("../Common/Util")),o=s(e("../platform/analytics/AnalyticsUtilities"));function s(e){return e&&e.__esModule?e:{default:e}}var a=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},start:function(){},httpResDeal:function(e,t){},getAppLinkParams:function(){if(facadeMgr.isMiniGame){this.appLinkReportDatas={gmId:facadeMgr.GameId,objGmId:0,openid:0,chan:0,subChan:0};var e=this.getInviteQuery();this.getReferrerInfo();if(0!=e)return this.openId&&(this.appLinkReportDatas.openid=this.openId),e.chanId&&(this.appLinkReportDatas.chan=e.chanId),e.subCid&&(this.appLinkReportDatas.subChan=e.subCid),this.appLinkReportDatas}},removeKeyboard:function(){try{(void 0==wx||wx)&&(wx.offKeyboardComplete(),wx.hideKeyboard())}catch(e){}},gc:function(){try{(void 0==wx||wx)&&wx.triggerGC()}catch(e){}},compareVersion:function(e,t){null==e&&(e=wx.getSystemInfoSync().SDKVersion),e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var i=0;i<n;i++){var o=parseInt(e[i]),s=parseInt(t[i]);if(o>s)return 1;if(o<s)return-1}return 0},requestClient:function(){},navigateToMiniProgram:function(e,t){wx.navigateToMiniProgram({appId:e.appId,extraData:e.extraData,path:e.path,success:function(){t&&t.success&&t.success()},fail:function(e){t&&t.failure&&t.failure()},complete:function(){}})},vibrateLong:function(){try{wx}catch(e){return}facadeMgr.isMiniGame&&wx.vibrateLong&&wx.vibrateLong({success:function(e){},fail:function(e){}})},vibrateShort:function(){try{wx}catch(e){return}facadeMgr.isMiniGame&&wx.vibrateShort&&wx.vibrateShort({success:function(e){},fail:function(e){}})},clearShowData:function(){this._onShowData=null},getReferrerInfo:function(){if(this._onShowData&&this._onShowData.referrerInfo)return this._onShowData.referrerInfo;var e=wx.getLaunchOptionsSync();return e.referrerInfo&&e.referrerInfo?e.referrerInfo:0},getInviteQuery:function(){if(this._onShowData&&this._onShowData.query)return this._onShowData.query;var e=wx.getLaunchOptionsSync();return e.query&&e.query?e.query:0},checkInterstitialAd:function(){return!facadeMgr.SAVE_MODE&&cc.sys.platform==cc.sys.WECHAT_GAME&&this.compareVersion(null,"2.6.0")>=0},getInviteId:function(){if(console.log("getInviteId:",wx.getLaunchOptionsSync()),this._onShowData&&this._onShowData.query&&this._onShowData.query.inviteId)return this._onShowData.query.inviteId;var e=wx.getLaunchOptionsSync();return e.query&&e.query.inviteId?e.query.inviteId:0},getinviteType:function(){if(this._onShowData&&this._onShowData.query&&this._onShowData.query.inviteType)return this._onShowData.query.inviteType;var e=wx.getLaunchOptionsSync();return e.query&&e.query.inviteType?e.query.inviteType:0},getinviteRid:function(){if(this._onShowData&&this._onShowData.query&&this._onShowData.query.id)return this._onShowData.query.id;var e=wx.getLaunchOptionsSync();return e.query&&e.query.id?e.query.id:"0"},getEnterAnalyzeId:function(){if(this._onShowData&&this._onShowData.query&&this._onShowData.query.enter_analyze_id)return this._onShowData.query.enter_analyze_id;var e=wx.getLaunchOptionsSync();return e.query&&e.query.enter_analyze_id?e.query.enter_analyze_id:0},checkIsDebug:function(){if(__wxConfig.envVersion)switch(console.log("__wxConfig.envVersion is :",__wxConfig.envVersion),__wxConfig.envVersion){case"develop":return!0;case"trial":case"release":return!1}},reEnter:function(){window.facadeMgr.reEnter=!0},initListener:function(){try{(void 0==wx||wx)&&(wx.onShow(function(e){console.log("lc wxAdaptor ============wx.onShow==========query =",e.query),console.log(e),window.soundInstance&&window.soundInstance.play(),this.checkTicket(e),1==window.facadeMgr.isShareOut?window.facadeMgr.isShareOut=!1:this.reEnter(),this._onShowData=e,this.checkLaunchOptions(e)}.bind(this)),wx.onHide(function(e){window.soundInstance&&window.soundInstance.pause(),console.log("wx.onHide==========")}.bind(this)))}catch(e){}},checkTicket:function(e){e.query&&e.query.id,1==window.facadeMgr.canShowShareGroup?e.shareTicket&&e.sessionid!=window.facadeMgr.lastSessionid&&(window.facadeMgr.lastSessionid=e.sessionid):window.facadeMgr.canShowShareGroup=!0},initVersionLinstener:function(){try{if(void 0==wx||wx){if(!wx.getUpdateManager)return;wx.getUpdateManager().onCheckForUpdate(function(e){console.log("hasUpdate",e.hasUpdate),e.hasUpdate&&window.popUpMgr.getComponent("Pop").addAlert("\u5f53\u524d\u6e38\u620f\u7a0b\u5e8f\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8fd9\u53ef\u80fd\u4f1a\u9020\u6210\u90e8\u5206\u529f\u80fd\u4f53\u9a8c\u4e0d\u7545\u3002\u4ee3\u7801\u81ea\u884c\u66f4\u65b0\u5b8c\u6210\u540e\u4f1a\u63d0\u9192\u60a8\u54e6\uff01",null,!1)}),wx.getUpdateManager().onUpdateReady(function(){wx.getUpdateManager().applyUpdate()}),wx.getUpdateManager().onUpdateFailed(function(){})}}catch(e){}},loginServer:function(){},guideActive:function(){wx.showModal({title:"\u8b66\u544a",content:"\u62d2\u7edd\u6388\u6743\u5c06\u65e0\u6cd5\u6b63\u5e38\u6e38\u620f",cancelText:"\u53d6\u6d88",showCancel:!0,confirmText:"\u8bbe\u7f6e",success:function(e){e.confirm&&wx.openSetting({success:function(e){!0===e.authSetting["scope.userInfo"]&&(console.log("openSetting userInfo----------------------\x3e",e),this.getUserInfoOldApi())}.bind(this)})}.bind(this)})},getAdScource:function(){if(facadeMgr.isMiniGame){var e=wx.getLaunchOptionsSync();if(e.referrerInfo&&e.referrerInfo.appId&&e.referrerInfo.appId==window.facadeMgr.WX_APPID_TENCENTBOX)return e.referrerInfo.appId;if(e.query&&e.query.chanId){var t={};return t.chanId=e.query.chanId,t.subCid=e.query.subCid,t}return"0_0"}return"0_0"},checkLaunchOptions:function(e){var t=e||wx.getLaunchOptionsSync();console.log("checkLaunchOptions:",t);var n=t.query.fromData||"none";o.default.logEvent("launch_option",{from:n})},getWxScene:function(){if(this._onShowData&&this._onShowData.scene)return this._onShowData.scene;var e=wx.getLaunchOptionsSync();return e.scene&&e.scene?e.scene:0},setUserData:function(t){window.facadeMgr.WXInfoButton&&(window.facadeMgr.WXInfoButton.hide(),window.facadeMgr.WXInfoButton.destroy(),window.facadeMgr.WXInfoButton=null),this.wxUserInfo=t.userInfo,this._model.platUserInfo=t.userInfo,this.wxSignature=t.signature,this.wxEncryptedData=t.encryptedData,this.wxRawData=t.rawData,this.wxIv=t.iv,window.facadeMgr.isEnteredGame=!0;e("ModuleEventEnum");this._model.recordRoleProfile()},recordUserData:function(e){this.wxUserInfo=e.userInfo,this._model.platUserInfo=e.userInfo,this._model.recordRoleProfile()},refreshUserInfo:function(){wx.getUserInfo({success:function(e){this.recordUserData(e)}.bind(this)})},getUserInfoOldApi:function(){wx.getUserInfo({fail:function(e){(e.errMsg.indexOf("auth deny")>-1||e.errMsg.indexOf("auth denied")>-1)&&(console.log("\u7528\u6237\u62d2\u7edd\u6388\u6743"),this.guideActive())}.bind(this),success:function(e){this.setUserData(e)}.bind(this)})},createAllowBtn:function(){void 0!=cc.sys.os&&0==window.facadeMgr.isEnteredGame&&wx.createUserInfoButton&&!window.facadeMgr.WXInfoButton?(console.log("====create btn:",window.facadeMgr.windowWidth,window.facadeMgr.windowHeight),window.facadeMgr.WXInfoButton=wx.createUserInfoButton({type:"text",text:"        ",style:{left:0,top:0,width:window.facadeMgr.windowWidth,height:window.facadeMgr.windowHeight,lineHeight:600,backgroundColor:"#FFFFFF00",borderColor:"#FFFFFF",color:"#FFFFFF",textAlign:"center",fontSize:40,borderRadius:4}}),window.facadeMgr.WXInfoButton.onTap(function(e){e.errMsg.indexOf("auth deny")>-1||e.errMsg.indexOf("auth denied")>-1?(console.log("\u7528\u6237\u62d2\u7edd\u6388\u6743"),this.guideActive()):this.setUserData(e)}.bind(this)),window.facadeMgr.WXInfoButton.show()):this.getUserInfoOldApi()},wxGetUserInfo:function(){this.isNewGetInfoApi=!0,wx.getSetting&&wx.getSetting({success:function(e){var t=e.authSetting;!0===t["scope.userInfo"]?(console.log("\u7528\u6237\u5df2\u7ecf\u6388\u6743\uff0c\u53ef\u4ee5\u83b7\u53d6\u7528\u6237\u4fe1\u606f"),this.getUserInfoOldApi()):!1===t["scope.userInfo"]?(console.log("\u7528\u6237\u5df2\u62d2\u7edd\u6388\u6743, \u9700\u8981\u5f15\u5bfc\u7528\u6237\u5230\u8bbe\u7f6e\u9875\u9762\u6253\u5f00\u6388\u6743\u5f00\u5173"),wx.showModal({title:"\u8bf7\u6388\u6743",content:"\u6388\u6743\u9875\u9762\u7684\u8fdb\u5165\u8def\u5f84\u4e3a\uff1a\n\u53f3\u4e0a\u89d2\u83dc\u5355->\u5173\u4e8e->\u53f3\u4e0a\u89d2\u83dc\u5355->\u8bbe\u7f6e",success:function(){console.log("\u70b9\u51fb\u786e\u5b9a")}})):this.createAllowBtn()}.bind(this)})},loginWithoutUser:function(){"swan"==window.netMgr.platformName&&wx.getSwanId({success:function(e){this.baidu_swanid=e.data.swanid,this.baidu_swanid_sign=e.data.swanid_signature}.bind(this),complete:function(){this.loginServer()}.bind(this)})},reportEnter:function(){this.login()},login:function(){console.log("login: function () {...")},init:function(e){this._model=e,this.wxCode=null,this.wxUserInfo=null,this.wxSignature=null,this.wxEncryptedData=null,this.wxRawData=null,this.wxIv=null,facadeMgr.isMiniGame&&this._model.node.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(this.reportEnter,this)))},setSharedCancas:function(e){try{if(void 0==wx||wx){var t=wx.getOpenDataContext().canvas;t&&(t.width=cc.game.canvas.width,t.height=cc.game.canvas.height)}}catch(e){}},onLoad:function(){cc.systemEvent.on(a.GOT_HTTP_RES,this.httpResDeal.bind(this)),window.facadeMgr.windowWidth=375,window.facadeMgr.windowHeight=667,facadeMgr.isMiniGame&&wx.wxOnShowRes&&(this._onShowData=wx.wxOnShowRes,wx.wxOnShowRes=null),this.initListener(),this.initVersionLinstener(),facadeMgr.isMiniGame&&(wx.showShareMenu({withShareTicket:!0}),wx.setKeepScreenOn({keepScreenOn:!0}),wx.getSystemInfo({success:function(e){if(window.facadeMgr.PhoneInfo=e,window.facadeMgr.windowWidth=e.windowWidth,window.facadeMgr.windowHeight=e.windowHeight,window.facadeMgr.Screenratio=Number(e.windowWidth)/Number(e.windowHeight),window.facadeMgr.screenWidth=640,window.facadeMgr.screenHeight=640/window.facadeMgr.Screenratio,window.facadeMgr.isIOS=null!=e.system.match("iOS"),canvas.width=e.screenWidth*e.pixelRatio,canvas.height=e.screenHeight*e.pixelRatio,console.log("phoneinfo----------------\x3e",window.facadeMgr.PhoneInfo),window.facadeMgr.isIOS){if((t=e.model.split("")).length>=2&&null!=t[1].match("s"))Number(t[1][0])<6&&(window.facadeMgr.deviceLow=!0);else if("X"!=t[1]){Number(t[1][0])<=6&&(window.facadeMgr.deviceLow=!0)}}else{var t=e.system.replace("Android ","");Number(t.split(".")[0])<6&&(window.facadeMgr.deviceLow=!0)}}}),this.initDefaultShare(),this.setSharedCancas(),this.checkLaunchOptions())},initDefaultShare:function(){if(wx)try{wx.onShareAppMessage(function(){var e=i.default.getShareData();return{title:e.text,imageUrl:e.image,query:e.queue}})}catch(e){}}}),cc._RF.pop()},{"../Common/Util":"Util","../platform/analytics/AnalyticsUtilities":"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum"}],"ald-game-conf":[function(e,t,n){"use strict";cc._RF.push(t,"b0774dREVRG67lIheYsXN64","ald-game-conf"),n.app_key="0bc1a20c353444cfa49b80f7a5eb88ce",n.getLocation=!1,cc._RF.pop()},{}],"ald-game":[function(e,t,n){"use strict";function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"3480bwYZ+hDyaqVJtgAqutU","ald-game"),CC_WECHATGAME&&function(){function t(e){function t(e){return Object.prototype.toString.call(e)}var n={};return"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(e,t){n["[object "+e+"]"]=e.toLowerCase()}),null==e?e:"object"==i(e)||"function"==typeof e?n[t.call(e)]||"object":i(e)}function n(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}function o(e,t){_++,e.as=y,e.at=C,e.rq_c=_,e.ifo=l,e.ak=h.app_key,e.uu=u,e.v=r,e.st=Date.now(),e.ev=t,e.wsr=v,""!==s(e.ufo)&&(e.ufo=e.ufo),e.ec=m,wx.Queue.push(function(){return new Promise(function(t,n){wx.request({url:"https://"+d+".aldwx.com/d.html",data:e,header:{se:f||"",op:p||"",img:S||""},method:"GET",fail:function(){t("")},success:function(e){t(200==e.statusCode?"":"status error")}})})})}function s(e){if(void 0===e||""===e)return"";var t={};for(var n in e)"rawData"!=n&&"errMsg"!=n&&(t[n]=e[n]);return t}function a(e){var t={};for(var n in e)t[n]=e[n];return t}function c(e){for(var t="",n=0;n<e.length;n++)e[n].length>t.length&&(t=e[n]);return t}var r="2.0.0",d="glog",h=e("./ald-game-conf");""===h.app_key&&console.error("\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u586b\u5199\u60a8\u7684app_key"),h.app_key=h.app_key.replace(/\s/g,""),wx.request({url:"https://"+d+".aldwx.com/config/app.json",method:"GET",success:function(e){200===e.statusCode&&(e.data.version!=r&&console.warn("\u60a8\u7684SDK\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5c3d\u5feb\u5347\u7ea7\uff01"),e.data.warn&&console.warn(e.data.warn),e.data.error&&console.error(e.data.error))}});var l="",u=function(){var e="";try{e=wx.getStorageSync("aldstat_uuid"),wx.setStorageSync("ald_ifo",!0)}catch(t){e="uuid_getstoragesync"}if(e)l=!1;else{e=n(),l=!0;try{wx.setStorageSync("aldstat_uuid",e)}catch(e){wx.setStorageSync("aldstat_uuid","uuid_getstoragesync")}}return e}(),g={},f="",p="",m=0,_="",v=wx.getLaunchOptionsSync(),w=Date.now(),C=""+Date.now()+Math.floor(1e7*Math.random()),y=""+Date.now()+Math.floor(1e7*Math.random()),b=0,M="",S="",E=!0,G=!1,N=["aldSendEvent","aldOnShareAppMessage","aldShareAppMessage","aldSendSession","aldSendOpenid","aldLevelEvent"],P=["payStart","paySuccess","payFail","die","revive","tools","award"],T=["complete","fail"];void 0===wx.Queue&&(wx.Queue=new function(){this.concurrency=4,this.queue=[],this.tasks=[],this.activeCount=0;var e=this;this.push=function(t){this.tasks.push(new Promise(function(n,i){var o=function(){e.activeCount++,t().then(function(e){n(e)}).then(function(){e.next()})};e.activeCount<e.concurrency?o():e.queue.push(o)}))},this.all=function(){return Promise.all(this.tasks)},this.next=function(){e.activeCount--,e.queue.length>0&&e.queue.shift()()}},wx.Queue.all()),Promise.all([new Promise(function(e,t){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){S=c(t.userInfo.avatarUrl.split("/")),e(t)},fail:function(){e("")}}):e("")},fail:function(){e("")}})}),new Promise(function(e,t){wx.getNetworkType({success:function(t){e(t)},fail:function(){e("")}})}),new Promise(function(e,t){h.getLocation?wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}):wx.getSetting({success:function(t){t.authSetting["scope.userLocation"]?(wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}),e("")):e("")},fail:function(){e("")}})})]).then(function(e){""!==e[2]?(g.lat=e[2].latitude||"",g.lng=e[2].longitude||"",g.spd=e[2].speed||""):(g.lat="",g.lng="",g.spd=""),""!==e[1]?g.nt=e[1].networkType||"":g.nt="";var t=a(g);""!==e[0]&&(t.ufo=e[0],M=e[0]),o(t,"init")}),wx.onShow(function(e){if(v=e,b=Date.now(),!E&&!G){C=""+Date.now()+Math.floor(1e7*Math.random()),l=!1;try{wx.setStorageSync("ald_ifo",!1)}catch(e){}}E=!1,G=!1;var t=a(g),n=a(g);t.sm=b-w,e.query.ald_share_src&&e.shareTicket&&"1044"===e.scene?(n.tp="ald_share_click",new Promise(function(e,t){"1044"==v.scene?wx.getShareInfo({shareTicket:v.shareTicket,success:function(t){e(t)},fail:function(){e("")}}):e("")}).then(function(e){n.ct=e,o(n,"event")})):e.query.ald_share_src&&(n.tp="ald_share_click",n.ct="1",o(n,"event")),o(t,"show")}),wx.onHide(function(){var e=a(g);e.dr=Date.now()-b,""===M?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){e.ufo=t,M=t,S=c(t.userInfo.avatarUrl.split("/")),o(e,"hide")}}):o(e,"hide")}}):o(e,"hide")}),wx.onError(function(e){var t=a(g);t.tp="ald_error_message",t.ct=e,m++,o(t,"event")});var A={aldSendEvent:function(e,t){var n=a(g);""!==e&&"string"==typeof e&&e.length<=255?(n.tp=e,"string"==typeof t&&t.length<=255?(n.ct=String(t),o(n,"event")):"object"==i(t)?(JSON.stringify(t).length>=255&&console.error("\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53c2\u6570\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26"),n.ct=JSON.stringify(t),o(n,"event")):void 0===t||""===t?o(n,"event"):console.error("\u4e8b\u4ef6\u53c2\u6570\u5fc5\u987b\u4e3aString,Object\u7c7b\u578b,\u4e14\u53c2\u6570\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")):console.error("\u4e8b\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3aString\u7c7b\u578b\u4e14\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")},aldOnShareAppMessage:function(e){wx.onShareAppMessage(function(){G=!0;var n=e(),i="";i=void 0!==v.query.ald_share_src?void 0!==n.query?(v.query.ald_share_src.indexOf(u),n.query+"&ald_share_src="+v.query.ald_share_src+","+u):(v.query.ald_share_src.indexOf(u),"ald_share_src="+v.query.ald_share_src+","+u):void 0!==n.query?n.query+"&ald_share_src="+u:"ald_share_src="+u,"undefined"!=t(n.ald_desc)&&(i+="&ald_desc="+n.ald_desc),n.query=i;var s=a(g);return s.ct=n,s.ct.sho=1,s.tp="ald_share_chain",o(s,"event"),n})},aldShareAppMessage:function(e){G=!0;var n=e,i="";i=void 0!==v.query.ald_share_src?void 0!==n.query?(v.query.ald_share_src.indexOf(u),n.query+"&ald_share_src="+v.query.ald_share_src+","+u):(v.query.ald_share_src.indexOf(u),"ald_share_src="+v.query.ald_share_src+","+u):void 0!==n.query?n.query+"&ald_share_src="+u:"ald_share_src="+u;var s=a(g);"undefined"!=t(n.ald_desc)&&(i+="&ald_desc="+n.ald_desc),n.query=i,s.ct=n,s.tp="ald_share_chain",o(s,"event"),wx.shareAppMessage(n)},aldSendSession:function(e){if(""!==e&&e){var t=a(g);t.tp="session",t.ct="session",f=e,""===M?wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(e){t.ufo=e,o(t,"event")}}):o(t,"event")}}):(t.ufo=M,""!==M&&(t.gid=""),o(t,"event"))}else console.error("\u8bf7\u4f20\u5165\u4ece\u540e\u53f0\u83b7\u53d6\u7684session_key")},aldSendOpenid:function(e){if(""!==e&&e){p=e;var t=a(g);t.tp="openid",t.ct="openid",o(t,"event")}else console.error("openID\u4e0d\u80fd\u4e3a\u7a7a")}};wx.aldStage=new function(){function e(e){return!/^\d+(.\d+)*$/.test(e.stageId)||e.stageId.length>32?(console.warn("\u5173\u5361stageId\u5fc5\u987b\u7b26\u5408\u4f20\u53c2\u89c4\u5219,\u8bf7\u53c2\u8003\u6587\u6863\u3002"),!1):!("string"!==t(e.stageName)||e.stageName.length>32)||(console.warn("\u5173\u5361\u540d\u79f0\u4e3a\u5fc5\u4f20\u5b57\u6bb5,\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26,\u8bf7\u53c2\u8003\u6587\u6863"),!1)}var n="",i="",s=0;this.onStart=function(o){if(e(o)){var a={};s=Date.now(),a.sid=o.stageId,a.snm=o.stageName,a.state="start",i=""+Date.now()+Math.floor(1e7*Math.random()),n=a,("string"===t(o.userId)&&o.userId)<32&&(this.uid=o.uid),this.request()}},this.onRunning=function(i){if(e(i)){var o={params:{}};if(("string"===t(i.userId)&&i.userId)<32&&(this.uid=i.uid),!t(i.event)&&-1!=P.join(",").indexOf(i.event+","))return void P.join(",");if(o.event=i.event,"object"===t(i.params)){if("string"!==t(i.params.itemName)||i.params.itemName.length>32)return void console.warn("\u9053\u5177/\u5546\u54c1\u540d\u79f0\u4e3a\u5fc5\u4f20\u5b57\u6bb5\uff0c\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003\u6587\u6863");o.params.itnm=i.params.itemName,"string"===t(i.params.itemId)&&i.params.itemId.length<32&&(o.params.itid=i.params.itemId),"number"===t(i.params.itemCount)&&i.params.itemCount.length<32?o.params.itco=i.params.itemCount:o.params.itco=1,-1!==i.event.indexOf("pay")&&("number"===t(i.params.itemMoney)&&i.params.itemMoney.length<32?o.params.money=i.params.itemMoney:o.params.money=0),"string"===t(i.params.desc)&&i.params.desc.length<64&&(o.params.desc=i.params.desc),o.state="running",o.sid=i.stageId,o.snm=i.stageName,n=o,this.request()}}},this.onEnd=function(i){if(e(i)){var o={state:"end"};if(("string"===t(i.userId)&&i.userId)<32&&(this.uid=i.uid),!t(i.event)&&-1!==T.join(",").indexOf(i.event+","))return void T.join(",");o.sid=i.stageId,o.snm=i.stageName,o.event=i.event,o.sdr=0!==s?Date.now()-s:"",o.params={},"object"===t(i.params)&&"string"===t(i.params.desc)&&i.params.desc.length<64&&(o.params.desc=i.params.desc),n=o,this.request()}},this.request=function(){var e=a(g);n.ss=i,e.ct=n,o(e,"screen")}};for(var I=0;I<N.length;I++)!function(e,t){Object.defineProperty(wx,e,{value:t,writable:!1,enumerable:!0,configurable:!0})}(N[I],A[N[I]]);try{var L=wx.getSystemInfoSync();g.br=L.brand||"",g.md=L.model,g.pr=L.pixelRatio,g.sw=L.screenWidth,g.sh=L.screenHeight,g.ww=L.windowWidth,g.wh=L.windowHeight,g.lang=L.language,g.wv=L.version,g.sv=L.system,g.wvv=L.platform,g.fs=L.fontSizeSetting,g.wsdk=L.SDKVersion,g.bh=L.benchmarkLevel||"",g.bt=L.battery||"",g.wf=L.wifiSignal||"",g.lng="",g.lat="",g.nt="",g.spd="",g.ufo=""}catch(e){}}(),cc._RF.pop()},{"./ald-game-conf":"ald-game-conf"}],spObstacle:[function(e,t,n){"use strict";cc._RF.push(t,"f1196EO9SpPnaFKv1yqN0g0","spObstacle"),cc.Class({extends:cc.Component,properties:{},initType:function(e){this._type=e,1==this._type?cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){this.node.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(window.facadeMgr.getComponent("GameModel")._sceneConfig[window.facadeMgr.getComponent("GameModel")._sceneType].landIcon)}.bind(this)):2==this._type&&cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){this.node.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(window.facadeMgr.getComponent("GameModel")._sceneConfig[window.facadeMgr.getComponent("GameModel")._sceneType].swardIcon)}.bind(this))},onLoad:function(){cc.systemEvent.on("UPDATE_SELECT_SCENE",this.updateUI,this),this._type=-1},updateUI:function(){this.initType(this._type)},start:function(){}}),cc._RF.pop()},{}],use_reversed_rotateBy:[function(e,t,n){"use strict";cc._RF.push(t,"a14d70Mbe9M5J6bq+oXgAna","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t,n){"use strict";cc._RF.push(t,"39026/rJ4VBPLbgKsFIDbHy","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["use_reversed_rotateBy","use_v2.1-2.2.1_cc.Toggle_event","AlertTool","ButtonScaler","CollectAnimation","FloatTip","ModuleEventEnum","Network","Pool","Pop","RankView","SoundManager","Util","Facade","Bird","Bullet","Config","CountDown","Egg","EventEmit","Game","GameControl","GameModel","Grass","Ground","Guide","ResultPanel","SelectSceneItem","SelectSkin","SelectSkinItem","Sensor","Setting","Thorn","spObstacle","LoadingView","MConfig","PlayerModel","WxAdaptor","GetGold","LevelLoadingUI","MainAni","SignIn","SignInItem","StopUI","Start","UserInfo","GameBar","GameBarItem","GameBox","GameGrid","GameGridItem","GameItem","GameMoreManager","GamePage","GamePageItem","AnalyticsUtilities","ald-game-conf","ald-game"]);