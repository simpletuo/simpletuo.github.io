System.register("chunks:///_virtual/AdGetRewardDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./DialogController.ts","./UISprite.ts","./Utils.ts","./Bundle.ts","./Core.ts","./IGame.ts","./TimerInfo.ts","./GameUtils.ts"],(function(e){var t,i,n,o,r,a,l,u,s,c,d,y,g,p,f,m,b,h,_,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Label,u=e.Sprite,s=e.Prefab,c=e.AudioClip},function(e){d=e.AudioMgr},function(e){y=e.DialogController},function(e){g=e.UISprite},function(e){p=e.Utils},function(e){f=e.Bundle},function(e){m=e.Core},function(e){b=e.MaxEnergy},function(e){h=e.TimerInfo},function(e){_=e.loadSpriteFrame,A=e.lookAdVideo}],execute:function(){var D,T,v,w,G,I,L,R,x,z,B;r._RF.push({},"c4b4e01qj1MFbWQyMtw5aux","AdGetRewardDialog",void 0);var C=a.ccclass,E=a.property,F=2e4,M=b;e("AdGetRewardDialog",(D=C("AdGetRewardDialog"),T=E(g),v=E(l),w=E(u),G=E(l),D((R=t((L=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"ico",R,o(t)),n(t,"label",x,o(t)),n(t,"btnBg",z,o(t)),n(t,"btnLabel",B,o(t)),t._moneyType=void 0,t}i(t,e),t._getPrefab=function(){return f.game.get("prefab/ui/adGetRewardDialog",s)};var r=t.prototype;return r._open=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._moneyType=t[0];var n="",o=0;"Gold"===this._moneyType?(n="texture/ui/ico-gold",o=F):"Diamond"===this._moneyType?(n="texture/ui/ico-diamond",o=100):"Energy"===this._moneyType&&(n="texture/ui/ico-energy",o=M),_(this.ico,n),this.label.string="+"+o},r.clickConfirm=function(){var e=this;"Free"===this.btnLabel.string&&A((function(t){t||("Gold"===e._moneyType?(m.userInfo.gold+=F,h.getAdGold=3600):"Diamond"===e._moneyType?(m.userInfo.diamond+=100,h.getAdDiamond=10800):"Energy"===e._moneyType&&(m.userInfo.energy+=M,h.getAdEnergy=3600),e.close(),d.inst.playOneShot(f.audio.get("add-money",c)))}))},r.update=function(e){var t=0;m.userInfo.vip?t=0:"Gold"===this._moneyType?t=h.getAdGold:"Diamond"===this._moneyType?t=h.getAdDiamond:"Energy"===this._moneyType&&(t=h.getAdEnergy);var i=t<=0;this.btnBg.grayscale=!i,this.btnLabel.string=i?"Free":p.formatTime(t,"hh:mm:ss")},t}(y)).prototype,"ico",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(L.prototype,"label",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(L.prototype,"btnBg",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(L.prototype,"btnLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=L))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/AdScript.ts",["cc"],(function(e){var o,t;return{setters:[function(e){o=e.cclegacy,t=e.game}],execute:function(){o._RF.push({},"406495/eJdBfJbCaa+YFgOw","AdScript",void 0);e("default",new(function(){function e(){}var o=e.prototype;return o.createRewardedVideoAd=function(e){console.log("createRewardedVideoAd");var o=window;void 0!==window.parent&&(o=window.parent),"function"==typeof o.ShowADForLayaGame?(t.pause(),o.ShowADForLayaGame(!0,"reward",(function(){console.log("createRewardedVideoAd over"),t.resume(),e&&e(!0)}))):(console.log("createRewardedVideoAd no play"),e&&e(!0))},o.createInterstitialAd=function(e){console.log("createInterstitialAd");var o=window;void 0!==window.parent&&(o=window.parent),"function"==typeof o.ShowADForLayaGame?(t.pause(),o.ShowADForLayaGame(!1,"browse",(function(){console.log("createInterstitialAd over"),t.resume(),e&&e()}))):(console.log("createInterstitialAd no play"),e&&e())},o.delayShowInterstitialAd=function(e){var o=this;setTimeout((function(){o.createInterstitialAd(null)}),1e3*e)},e}()));o._RF.pop()}}}));

System.register("chunks:///_virtual/ArrayConfig.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"65df7RqFxlMuoaLihXpdTMW","ArrayConfig",void 0);n("ArrayConfig",function(){function n(n){this.configs=void 0,this._cache=new Map,this.configs=JSON.parse(decodeURIComponent(n))}return n.prototype.where=function(n,t){var i=String(n)+"="+String(t),e=this._cache.get(i);return e||(e=this.configs.find((function(i){return i[n]===t})))&&this._cache.set(i,e),e},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,o,u,n,e;return{setters:[function(i){t=i.createClass},function(i){o=i.cclegacy,u=i.Node,n=i.director,e=i.AudioSource}],execute:function(){o._RF.push({},"fa460Faj49JQ4kW2F7VK+s5","AudioMgr",void 0);var a=i("AudioMgr",function(){function i(){this._audio=void 0,this._audioMap=new Map;var i=new u("AudioMgr");n.getScene().addChild(i),n.addPersistRootNode(i),this._audio=i.addComponent(e),this._audio.playOnAwake=!0}var o=i.prototype;return o.playOneShot=function(i,t){var o;void 0===t&&(t=.2);var u=Date.now();return u-(null!=(o=this._audioMap.get(i))?o:0)>=1e3*t&&(this._audioMap.set(i,u),this._audio.playOneShot(i),!0)},o.play=function(i){this._audio.stop(),this._audio.clip=i,this._audio.loop=!0,this._audio.play()},o.stop=function(){this._audio.stop()},o.pause=function(){this._audio.pause()},o.resume=function(){this._audio.play()},t(i,[{key:"audio",get:function(){return this._audio}},{key:"volume",get:function(){return this._audio.volume},set:function(i){this._audio.volume=i}}],[{key:"inst",get:function(){return this._inst||(this._inst=new i,this._inst.volume=1),this._inst}},{key:"background",get:function(){return this._background||(this._background=new i,this._background.volume=1),this._background}}]),i}());a._inst=void 0,a._background=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/BackpackPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IConfig.ts","./EquipmentItemController.ts","./ParticleMoveController.ts","./AudioMgr.ts","./VirtualList.ts","./Bundle.ts","./Core.ts","./IGame.ts","./GameUtils.ts","./DegradeMoreDialog.ts","./EquipmentDetailDialog.ts"],(function(e){var t,i,n,a,o,r,u,l,p,s,c,d,f,g,m,h,b,q,_,v,L,y,C,E,I,D,M,k,B,w,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,u=e._decorator,l=e.color,p=e.Node,s=e.Label,c=e.AudioClip,d=e.Component,f=e.instantiate,g=e.Button,m=e.Sprite},function(e){h=e.EquipmentTypes},function(e){b=e.EquipmentItemController},function(e){q=e.ParticleMoveController},function(e){_=e.AudioMgr},function(e){v=e.VirtualList},function(e){L=e.Bundle},function(e){y=e.Core},function(e){C=e.MaxBackpackCount},function(e){E=e.getGamingHeroInfo,I=e.numberToString,D=e.getEquipmentIsEquipped,M=e.sortEquipments,k=e.loadSpriteFrame,B=e.getEquipmentEmptyIco},function(e){w=e.DegradeMoreDialog},function(e){P=e.EquipmentDetailDialog}],execute:function(){var z,F,A,H,S,T,G,N,x,O,R,U,V;r._RF.push({},"b0274wyUflB5IcrFc9LmuH7","BackpackPage",void 0);var j=u.ccclass,K=u.property,J=l("D8CEA8"),Q=l("FF2423");e("BackpackPage",(z=j("BackpackPage"),F=K(p),A=K(v),H=K(s),S=K(s),T=K(s),z((x=t((N=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"equipped",x,a(t)),n(t,"list",O,a(t)),n(t,"countLabel",R,a(t)),n(t,"damageLabel",U,a(t)),n(t,"hpLabel",V,a(t)),t._equippedMap=new Map,t._datas=[],t}i(t,e);var r=t.prototype;return r.onLoad=function(){var e=this,t=this.equipped.children[0];t.parent=null;for(var i=function(){var i=h[n],a=f(t);a.parent=e.equipped,a.on(g.EventType.CLICK,(function(){var t=y.userInfo.equipped[i];if(t){var n=y.userInfo.equipments.find((function(e){return e.uid===t}));P.show(n,(function(){e._reloadList(),e._reloadEquipped()}))}})),e._equippedMap.set(i,a)},n=0;n<h.length;n++)i();this.list.init(null,(function(t,i){var n=e._datas[i];t.getComponent(b).init(n)}),(function(t,i){_.inst.playOneShot(L.audio.get("click",c));var n=e._datas[i];P.show(n,(function(){e._reloadList(),e._reloadEquipped()}))}))},r.onEnable=function(){this._reloadList(),this._reloadEquipped()},r.degradeMore=function(){var e=this;w.show((function(){e._reloadList(),e._reloadEquipped()}))},r._reloadEquipped=function(){for(var e,t=function(){var t,i=e.value,n=i[0],a=i[1],o=a.getChildByName("empty").getComponent(m),r=y.userInfo.equipped[n];r&&(t=y.userInfo.equipments.find((function(e){return e.uid===r}))),o.node.active=!t,t||k(o,B(n));var u=a.getChildByName("equipment-item");(u.active=!!t,t)&&u.getComponent(b).init(t);a.getComponent(q).enabled=!!t&&t.star>0},i=o(this._equippedMap);!(e=i()).done;)t();var n=E();this.damageLabel.string=I(n.Damage),this.hpLabel.string=I(n.Hp)},r._reloadList=function(){this._datas=[].concat(y.userInfo.equipments),this._datas=this._datas.filter((function(e){return!D(e.uid)})),M(this._datas),this.list.num=this._datas.length,this.countLabel.string="["+this._datas.length+"/"+C+"]",this.countLabel.color=this._datas.length>C?Q:J},t}(d)).prototype,"equipped",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(N.prototype,"list",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(N.prototype,"countLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(N.prototype,"damageLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(N.prototype,"hpLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=N))||G));r._RF.pop()}}}));

System.register("chunks:///_virtual/BattlePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HurtEffectController.ts","./MonitorValuesController.ts","./RunScene.ts","./GIFController.ts","./HeroData.ts","./MonsterData.ts","./Core.ts","./IGame.ts","./GameUtils.ts","./AdGetRewardDialog.ts","./DySidebarReward.ts","./OfflineRewardDialog.ts","./SettingDialog.ts","./ShowRewardDialog.ts","./Toast.ts","./WheelController.ts"],(function(e){var t,n,i,o,r,a,l,s,u,c,f,g,p,w,d,v,h,y,b,m,L,C,P,R,B,D,I,E,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Label,s=e.Node,u=e.Button,c=e.isValid,f=e.v3,g=e.tween},function(e){p=e.HurtEffectController},function(e){w=e.MonitorValuesController},function(e){d=e.RunScene},function(e){v=e.GIFController},function(e){h=e.HeroData},function(e){y=e.MonsterData},function(e){b=e.Core},function(e){m=e.MaxEnergy,L=e.SceneName},function(e){C=e.isBackpackFull},function(e){P=e.AdGetRewardDialog},function(e){R=e.DySidebarReward},function(e){B=e.OfflineRewardDialog},function(e){D=e.SettingDialog},function(e){I=e.ShowRewardDialog},function(e){E=e.Toast},function(e){S=e.WheelController}],execute:function(){var z,k,F,G,M,T,x,_,V,W,H,K,A,N,O,j,J,U,Y,q,Q;r._RF.push({},"2a12944d/tDJYNyF5TALyp6","BattlePage",void 0);var X=a.ccclass,Z=a.property;e("BattlePage",(z=X("BattlePage"),k=Z(l),F=Z(l),G=Z(l),M=Z(s),T=Z(s),x=Z(s),_=Z(s),V=Z(s),W=Z(s),z((A=t((K=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"passLevelLabel",A,o(t)),i(t,"passLevelLabel2",N,o(t)),i(t,"energyLabel",O,o(t)),i(t,"energyIco",j,o(t)),i(t,"settingBtn",J,o(t)),i(t,"dyRewardBtn",U,o(t)),i(t,"offlineRewardBtn",Y,o(t)),i(t,"wheelBtn",q,o(t)),i(t,"monsterPreview",Q,o(t)),t}n(t,e);var r=t.prototype;return r.start=function(){var e=this;this.addMonitor({label:this.energyLabel,getValue:function(){return b.userInfo.energy},getValueFormat:function(e){return e+"/"+m},animData:{ico:this.energyIco,count:10},checkShow:function(e){return e===m}}),this.settingBtn.on(u.EventType.CLICK,(function(){D.show()})),this.dyRewardBtn.on(u.EventType.CLICK,(function(){R.show((function(){e.dyRewardBtn.active=!1,b.userInfo.diamond+=50;I.show({diamond:50})}))})),this.offlineRewardBtn.on(u.EventType.CLICK,(function(){B.show()})),this.wheelBtn.on(u.EventType.CLICK,(function(){S.show()})),this.dyRewardBtn.active=!1,R.getVisible((function(){e.dyRewardBtn.active=!0})),this.monsterPreview.active=!1,y.loadRes((function(){if(c(e)&&c(e.node,!0)){e.monsterPreview.active=!0;var t=e.monsterPreview.getComponentInChildren(p);e.monsterPreview.on(u.EventType.CLICK,(function(){t.trigger()}));var n=e.monsterPreview.tempPosition;n.x=-500,e.monsterPreview.position=n;var i=e.monsterPreview.getComponentInChildren(v);i.frame=24,i.init(y.monsterGIFDatas),i.play("Walking",!0),i.node.position=y.monsterOffset,e._monsterPreviewWalking()}})),h.loadRes((function(){}))},r.onEnable=function(){e.prototype.onEnable.call(this),this.passLevelLabel.string="Level",this.passLevelLabel2.string=""+b.userInfo.passLevel},r.clickStart=function(){C()||(b.userInfo.energy<20?E.show("Not Enough Energy! Go get some more!"):(b.userInfo.energy-=20,d.show(L.Game)))},r.clickEnergy=function(){P.show("Energy")},r._monsterPreviewWalking=function(){var e=this,t=this.monsterPreview.position,n=f(t);n.x=t.x>0?-300:300,g(this.monsterPreview).to(15+Math.randomFloat(0,2),{position:n}).call((function(){e._monsterPreviewWalking()})).start();var i=this.monsterPreview.tempScale;i.x=Math.abs(i.x)*(n.x>0?1:-1),this.monsterPreview.scale=i},t}(w)).prototype,"passLevelLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(K.prototype,"passLevelLabel2",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(K.prototype,"energyLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(K.prototype,"energyIco",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(K.prototype,"settingBtn",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(K.prototype,"dyRewardBtn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(K.prototype,"offlineRewardBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(K.prototype,"wheelBtn",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(K.prototype,"monsterPreview",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=K))||H));r._RF.pop()}}}));

System.register("chunks:///_virtual/BottomBlockUnit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IdMgr.ts","./Controller.ts","./Model.ts"],(function(t){var e,i,n,o,r,l,a,s,u,c,h,p,d,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.color,s=t.Enum,u=t.Node,c=t.tween,h=t.Sprite,p=t.Label},function(t){d=t.IdMgr},function(t){f=t.Controller},function(t){y=t.WeaponType}],execute:function(){var b,g,_,v,m,B,w,L,S,W,C,M,z,T;r._RF.push({},"09067O7r3NOHL4OWy+EWeBS","BottomBlockUnit",void 0);var k=l.ccclass,A=l.property,F=l.executeInEditMode,I=t("BottomBlockUnitType",function(t){return t[t.Multiply=0]="Multiply",t[t.Subtract=1]="Subtract",t[t.AddWeapon=2]="AddWeapon",t[t.Gift=3]="Gift",t}({})),R=t("BottomBlockColors",((b={})[I.Multiply]=a("#00FF29"),b[I.Subtract]=a("#000000"),b[I.AddWeapon]=a("#F5FF00"),b[I.Gift]=a("7C95F8"),b));t("BottomBlockUnit",(g=k("BottomBlockUnit"),_=F(!0),v=A({type:s(I)}),m=A({visible:function(){return this.type!==I.AddWeapon}}),B=A({type:u,visible:function(){return this.type===I.AddWeapon}}),w=A({type:s(y),visible:function(){return this.type===I.AddWeapon}}),g(L=_((W=e((S=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"type",W,o(e)),n(e,"value",C,o(e)),n(e,"weaponIco",M,o(e)),n(e,"weaponType",z,o(e)),n(e,"showLine",T,o(e)),e._bg=void 0,e._label=void 0,e._lineLeft=void 0,e._lineRight=void 0,e.uid=void 0,e._bottom=void 0,e._rect=void 0,e}i(e,t);var r=e.prototype;return r.init=function(t){this.uid=d.getId("BottomBlockUnit"),this._bottom=t,this.updateLabel()},r.getRect=function(){return this._rect||(this._rect=this.node.uiTransfrom.getBoundingBoxToWorld()),this._rect},r.updateLabel=function(){this._label.string=this._getStr()},r.remove=function(){var t=this;c(this.node).to(.3,{opacity:0}).call((function(){t.node.destroy()})).start()},r.onLoad=function(){this._bg=this.node.getChildByName("bg").getComponent(h),this._label=this.node.getChildByName("label").getComponent(p),this._lineLeft=this.node.getChildByName("line-left"),this._lineRight=this.node.getChildByName("line-right")},r.start=function(){this._reload()},r.update=function(t){},r.lateUpdate=function(t){this.type===I.Gift&&(this._rect=null)},r._reload=function(){var t=this.node.uiTransfrom.contentSize;this._bg.node.uiTransfrom.contentSize=t,this._bg.color=R[this.type],this._label.node.active=this.type!==I.AddWeapon,this._label.node.active?this._label.string=this._getStr():this.value=1,this._lineLeft.active=this.showLine,this._lineRight.active=this.showLine,this.showLine&&(this._lineLeft.setPosition(-t.width/2,0),this._lineRight.setPosition(t.width/2,0))},r._getStr=function(){var t="";return this.type===I.Multiply?t+="x":this.type!==I.Subtract&&this.type!==I.Gift||(t+="-"),t+=this.value},e}(f)).prototype,"type",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.Multiply}}),C=e(S.prototype,"value",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=e(S.prototype,"weaponIco",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(S.prototype,"weaponType",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.Weapon_1}}),T=e(S.prototype,"showLine",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L=S))||L)||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/BottomBulletUnit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts","./Core.ts","./IGame.ts"],(function(t){var o,e,i,r,n,l,s,a,d,c,p,u,h,y,B;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,s=t.BoxCollider2D,a=t.RigidBody2D,d=t.v2,c=t.isValid,p=t.tween,u=t.v3},function(t){h=t.Controller},function(t){y=t.Core},function(t){B=t.GameState}],execute:function(){var f,v,g,m,_,C,b;n._RF.push({},"47523akDWNDvZUsFvDcTwp5","BottomBulletUnit",void 0);var T=l.ccclass,w=l.property;t("BottomBulletUnit",(f=T("BottomBulletUnit"),v=w(s),g=w(a),f((C=o((_=function(t){function o(){for(var o,e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return o=t.call.apply(t,[this].concat(n))||this,i(o,"collider",C,r(o)),i(o,"rigidBody",b,r(o)),o.blockUids=new Set,o._bottom=void 0,o._sleep=void 0,o._destroyCall=void 0,o}e(o,t);var n=o.prototype;return n.init=function(t,o){this.blockUids.clear(),this._bottom=t,this._sleep=!1,this._destroyCall=o,this.node.setScale(1,1,1),this.rigidBody.applyLinearImpulseToCenter(d(0,5),!0)},n.remove=function(){c(this.node,!0)&&(this._destroyCall&&this._destroyCall(),this.node.destroy())},n.update=function(t){var o=this;if(y.game.state===B.Gaming&&!this._sleep){var e=this._bottom.ventRect;if(this.node.uiTransfrom.getBoundingBox().intersects(e)){this.rigidBody.sleep(),this._sleep=!0;var i=this._bottom.ventToNode.worldPosition;p(this.node).to(.2,{worldPosition:u(i),scale:u(.1,.1)}).call((function(){o._bottom.root.fight.heroController.addBulletCount(),o.remove()})).start()}this.node.position.y>330?this.rigidBody.applyForceToCenter(d(-10,0),!0):this.node.position.y>280&&(this.node.position.x>45?this.rigidBody.applyForceToCenter(d(-5,10),!0):this.node.position.x<-45?this.rigidBody.applyForceToCenter(d(5,10),!0):this.rigidBody.applyForceToCenter(d(0,10),!0))}},o}(h)).prototype,"collider",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=o(_.prototype,"rigidBody",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=_))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/BottomContainer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IConfig.ts","./Controller.ts","./Bundle.ts","./Core.ts","./BottomLayoutController.ts","./FireBottomBulletUnit.ts","./GameUtils.ts"],(function(t){var o,e,i,n,r,a,l,u,s,p,c,b,f,m,g,y,h,d;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,u=t.Label,s=t.Prefab,p=t.instantiate},function(t){c=t.HeroPropertyEnums,b=t.HeroPropertyDescEnums},function(t){f=t.Controller},function(t){m=t.Bundle},function(t){g=t.Core},function(t){y=t.BottomLayoutController},function(t){h=t.FireBottomBulletUnit},function(t){d=t.getEn}],execute:function(){var v,B,C,L,P,N,z,w,T,_,U,x,D,F,R;r._RF.push({},"051bbbzK9xAmYwN+uTW44Ok","BottomContainer",void 0);var E=a.ccclass,H=a.property;t("BottomContainer",(v=E("BottomContainer"),B=H(l),C=H(h),L=H(l),P=H(l),N=H(l),z=H(u),v((_=o((T=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return o=t.call.apply(t,[this].concat(r))||this,i(o,"bulletContainer",_,n(o)),i(o,"fireUnit",U,n(o)),i(o,"bottomLayoutNode",x,n(o)),i(o,"ventNode",D,n(o)),i(o,"ventToNode",F,n(o)),i(o,"heroPropLabel",R,n(o)),o.root=void 0,o.ventRect=void 0,o.bottomLayout=void 0,o}e(o,t);var r=o.prototype;return r.init=function(t){this.root=t,this.ventRect=this.ventNode.uiTransfrom.getBoundingBox();var o=g.game.info.level,e=m.game.get("prefab/gaming/bottom/bottom-layout-"+((o-1)%3+1),s),i=p(e);i.parent=this.bottomLayoutNode,this.bottomLayout=i.getComponent(y),this.bottomLayout.init(this),this.fireUnit.init(this)},r.update=function(t){var o=[this._getPropTip(["攻速","攻击","附加伤害"],"+"),this._getPropTip(["暴击率","暴击伤害"])].join("\n");this.heroPropLabel.string=o},r._getPropTip=function(t,o){void 0===o&&(o=":");for(var e="",i=0;i<t.length;i++){var n=t[i],r=d(n),a=b.indexOf(n),l=c[a];e+="|  "+r+o+g.game.info.heroInfo[l]+"%  "}return e+="|"},o}(f)).prototype,"bulletContainer",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=o(T.prototype,"fireUnit",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=o(T.prototype,"bottomLayoutNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=o(T.prototype,"ventNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=o(T.prototype,"ventToNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=o(T.prototype,"heroPropLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=T))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/BottomFloatGift.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./IGame.ts","./BottomOpenGiftDialog.ts"],(function(t){var o,i,n,e,r,a,s;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,e=t.Component},function(t){r=t.Core},function(t){a=t.GameState},function(t){s=t.BottomOpenGiftDialog}],execute:function(){var u;i._RF.push({},"38221fq0hVLm5IoeNMyLEE9","BottomFloatGift",void 0);var c=n.ccclass;n.property,t("BottomFloatGift",c("BottomFloatGift")(u=function(t){function i(){for(var o,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(o=t.call.apply(t,[this].concat(n))||this)._bottom=void 0,o._direction=1,o._openCount=0,o._value=0,o}o(i,t);var n=i.prototype;return n.init=function(t){this._bottom=t,this._value=10},n.getNewValue=function(){return this._value+=this._openCount,this._value},n.open=function(){this._openCount++,s.show(this._bottom)},n.update=function(t){if(r.game.state===a.Gaming){var o=this.node.tempPosition;o.x<-180?this._direction=1:o.x>180&&(this._direction=-1);var i=Math.min(this._openCount,10)/10*260+40;o.x+=this._direction*i*t,this.node.position=o}},i}(e))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/BottomLayoutController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts","./Core.ts","./IGame.ts","./BottomBlockUnit.ts","./BottomFloatGift.ts","./FireBottomBulletUnit.ts"],(function(t){var o,e,n,i,r,a,l,u,s,c,f,v;return{setters:[function(t){o=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,i=t._decorator,r=t.v2},function(t){a=t.Controller},function(t){l=t.Core},function(t){u=t.GameState},function(t){s=t.BottomBlockUnit,c=t.BottomBlockUnitType},function(t){f=t.BottomFloatGift},function(t){v=t.MaxBulletCount}],execute:function(){var d;n._RF.push({},"de4ddcGJMFPu5+oDO6whQaF","BottomLayoutController",void 0);var p=i.ccclass,h=(i.property,r());t("BottomLayoutController",p("BottomLayoutController")(d=function(t){function n(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(o=t.call.apply(t,[this].concat(n))||this)._animNode=void 0,o._worldRect=void 0,o._bottom=void 0,o._blocks=[],o._weapons=[],o}o(n,t);var i=n.prototype;return i.init=function(t){this._bottom=t,this._blocks=this.getComponentsInChildren(s);for(var o,n=e(this._blocks);!(o=n()).done;){var i=o.value;if(i.type===c.Gift){var r=i.getComponent(f);r.init(t),i.value=r.getNewValue()}else i.type===c.AddWeapon&&this._weapons.push(i.weaponType);i.init(t)}},i.getWeapons=function(){return this._weapons},i.onLoad=function(){this._animNode=this.node.getChildByName("anim"),this._worldRect=this.node.uiTransfrom.getBoundingBoxToWorld()},i.update=function(t){var o=this;if(l.game.state===u.Gaming){for(var n,i=new Map,r=this._bottom.fireUnit.getBullets(),a=e(r);!(n=a()).done;){var s=n.value,d=s.node.worldPosition;if(h.set(d.x,d.y),this._worldRect.contains(h)){for(var p,m=void 0,_=e(this._blocks);!(p=_()).done;){var y=p.value;if(!s.blockUids.has(y.uid)&&y.getRect().contains(h)){m=y;break}}m&&i.set(s,m)}}for(var B,b=r.length>v,g=function(){var t=B.value,e=t[0],n=t[1];if(n.type===c.Multiply){if(!b){e.blockUids.add(n.uid);for(var i=n.value-1,r=0;r<i;r++)o._bottom.fireUnit.createBullet(e)}}else if(n.type===c.Subtract)e.remove(),n.value=Math.max(0,n.value-1),n.updateLabel();else if(n.type===c.AddWeapon){e.remove(),n.value=Math.max(0,n.value-1);var a=n.weaponIco,l=a.worldPosition,u=a.worldScale;a.parent=o._animNode,a.worldPosition=l,a.worldScale=u,o._bottom.root.fight.heroController.activeWeapon(n.weaponType,a,(function(){a.destroy()}))}else if(n.type===c.Gift){if(e.remove(),n.value=Math.max(0,n.value-1),n.value<=0)if(o._bottom.root.fight.heroController.hero.willDie())n.value=1;else{var s=n.getComponent(f);s.open(),n.value=s.getNewValue()}n.updateLabel()}},w=e(i);!(B=w()).done;)g();var C=this._blocks.filter((function(t){return t.value<=0}));this._blocks=this._blocks.filter((function(t){return t.value>0}));for(var k,L=e(C);!(k=L()).done;){k.value.remove()}}},n}(a))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/BottomOpenGiftDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./DialogController.ts","./UISprite.ts","./Bundle.ts","./Core.ts","./IGame.ts","./GameUtils.ts","./Model.ts","./HeroData.ts"],(function(t){var e,o,i,n,a,r,l,s,c,u,f,g,p,d,h,m,v,_,b,y,C,D,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,l=t._decorator,s=t.Node,c=t.Prefab,u=t.AudioClip,f=t.Label,g=t.Button},function(t){p=t.AudioMgr},function(t){d=t.DialogController},function(t){h=t.UISprite},function(t){m=t.Bundle},function(t){v=t.Core},function(t){_=t.GameState},function(t){b=t.lookAdVideo,y=t.loadSpriteFrame,C=t.getEnTitle},function(t){D=t.WeaponNames},function(t){B=t.HeroData}],execute:function(){var G,O,S,P,w;r._RF.push({},"b1e951cSdpJlp0yvmw3OwPk","BottomOpenGiftDialog",void 0);var A=l.ccclass,I=l.property;t("BottomOpenGiftDialog",(G=A("BottomOpenGiftDialog"),O=I(s),G((w=e((P=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"list",w,n(e)),e._bottom=void 0,e._datas=void 0,e}o(e,t),e._getPrefab=function(){return m.game.get("prefab/gaming/bottom/bottomOpenGiftDialog",c)};var r=e.prototype;return r._open=function(t){var e=this;v.game.state=_.Pause,this._bottom=t;var o=this.list.children;this._datas=this._getDatas(o.length);for(var i=function(t){var i=o[t],n=e._datas[t],a=i.getChildByName("ico").getComponent(h);y(a,n.data.ico);var r=C(n.title);i.getChildByName("label").getComponent(f).string=r,i.on(g.EventType.CLICK,(function(){e._get([t])}))},n=0;n<o.length;n++)i(n)},r.onClickGetAll=function(){var t=this;b((function(e){if(!e){var o=t.list.children.map((function(t,e){return e}));t._get(o)}}))},r._get=function(t){for(var e,o=a(t);!(e=o()).done;){var i=e.value,n=this._datas[i];if(-1!==D.indexOf(n.title)||n.title.startsWith("子弹+")){var r=this.list.children[i].getChildByName("ico").getComponent(h).getSprite();n.data.fn(n.title,r)}else n.data.fn(n.title)}v.game.state===_.Pause&&(v.game.state=_.Gaming),p.inst.playOneShot(m.audio.get("up",u),.1),this.close()},r._getDatas=function(t){var e=this._bottom.root.fight.heroController.getWeapons();e=[].concat(e,this._bottom.bottomLayout.getWeapons());var o=new Set(e),i=this._bottom.root.fight.heroController.hero.hpRatio;return B.getRewardBonus(t,i,o)},e}(d)).prototype,"list",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=P))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/BulletUnit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts","./NodePoolMgr.ts","./GIFController.ts","./Bundle.ts","./Model.ts","./HeroData.ts"],(function(t){var o,e,n,i,s,r,a,l,h,d,c,p,_;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.v3,s=t.Vec3,r=t.tween,a=t.Prefab},function(t){l=t.Controller},function(t){h=t.NodePoolMgr},function(t){d=t.GIFController},function(t){c=t.Bundle},function(t){p=t.WeaponType},function(t){_=t.HeroData}],execute:function(){var u;e._RF.push({},"25a7evZPehEvbw5X0OlXNAl","BulletUnit",void 0);var f=n.ccclass,g=(n.property,i());t("BulletUnit",f("BulletUnit")(u=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(o=t.call.apply(t,[this].concat(n))||this)._fight=void 0,o._weaponType=void 0,o._monsterUid=void 0,o._call=void 0,o._targetPos=i(),o}o(e,t);var n=e.prototype;return n.init=function(t,o,e,n){var i=this;this._fight=t,this._weaponType=o,this._monsterUid=e,this._call=n;var a=this._fight.monsterController.getMonster(this._monsterUid);if(this._targetPos.set(a.bulletToNode.worldPosition),this.node.lookPosition(this._targetPos,!0),this._weaponType===p.Weapon_4){var l=s.distance(this.node.worldPosition,this._targetPos),h=this.node.tempScale;h.y=l/100,this.node.scale=h,this.node.opacity=255,r(this.node).delay(.1).to(.1,{opacity:0}).call((function(){i.node.destroy()})).start(),a&&n&&n(a)}},n.update=function(t){if(this._weaponType!==p.Weapon_4){var o=1e3;this._weaponType===p.Weapon_1?o=1e3:this._weaponType===p.Weapon_2?o=600:this._weaponType===p.Weapon_3&&(o=1200);var e=o*t,n=this._fight.monsterController.getMonster(this._monsterUid);n&&this._targetPos.set(n.bulletToNode.worldPosition);var i=g.set(this._targetPos).subtract(this.node.worldPosition);i.length()<e?(n&&this._call&&this._call(n),this._weaponType===p.Weapon_2&&this._showBoom(this._targetPos),this.node.destroy()):this.node.worldPosition=i.normalize().multiplyScalar(e).add(this.node.worldPosition)}},n._showBoom=function(t){var o=c.game.get("prefab/gaming/boom",a),e=h.get(o);e.parent=this._fight.boomContainer,e.worldPosition=t;var n=e.getComponentInChildren(d);n.init(_.boomGIFDatas),n.play("animation",!1,(function(){e.destroy()}))},e}(l))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Bundle.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"bc0c3zXfupA671g4v3pf9lZ","Bundle",void 0);var t=e("Bundle",(function(){}));t.font=void 0,t.audio=void 0,t.game=void 0,t.monster=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/Constant.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"cd551pL9EdMdYsJhp5bRJcD","Constant",void 0);t("ServerTimeUrl",null);e._RF.pop()}}}));

System.register("chunks:///_virtual/Controller.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,r,n;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,n=t.Component}],execute:function(){var l;o._RF.push({},"74e22bivdJGiK1awB6RY9pG","Controller",void 0);var c=r.ccclass;r.property,t("Controller",c("Controller")(l=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.unuse=function(){this.unscheduleAllCallbacks()},o}(n))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/Core.ts",["cc","./SaveProp.ts","./ServerUtils.ts","./Utils.ts","./IConfig2.ts","./UserInfo.ts"],(function(e){var n,t,o,r,s,i;return{setters:[function(e){n=e.cclegacy},function(e){t=e.SaveProp},function(e){o=e.getServerTimestampLoaded},function(e){r=e.Utils},function(e){s=e.AppName},function(e){i=e.UserInfo}],execute:function(){n._RF.push({},"7f743S7+bNCApgvFoObZJ2u","Core",void 0),t.Name=r.hashStr(s);var a=e("Core",(function(){}));a.userInfo=new i,a.game=void 0;e("MainInterval",null);e("MainInterval",setInterval((function(){o()&&a.userInfo.reloadHalfSecond()}),500)),n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DebugBg.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,i,n;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,i=e._decorator,n=e.Sprite}],execute:function(){var r;o._RF.push({},"f3a27Dbb5JJqawy2E4hKCmD","DebugBg",void 0);var u=i.ccclass,c=(i.property,i.executeInEditMode);e("DebugBg",u("DebugBg")(r=c(!0)(r=function(e){function o(){return e.apply(this,arguments)||this}return t(o,e),o.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.sizeMode=n.SizeMode.CUSTOM,this.trim=!1,this.enabled=!1},o}(n))||r)||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/DegradeDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogController.ts","./UISprite.ts","./Bundle.ts","./GameUtils.ts"],(function(e){var i,t,r,o,l,a,n,c,s,u,p,g,f;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,n=e.Label,c=e.Prefab},function(e){s=e.DialogController},function(e){u=e.UISprite},function(e){p=e.Bundle},function(e){g=e.numberToString,f=e.loadSpriteFrame}],execute:function(){var b,d,h,m,D,y,v,_,L;l._RF.push({},"f983aWY41hB9amAW3V57xnr","DegradeDialog",void 0);var S=a.ccclass,w=a.property;e("DegradeDialog",(b=S("DegradeDialog"),d=w(n),h=w(n),m=w(u),b((v=i((y=function(e){function i(){for(var i,t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return i=e.call.apply(e,[this].concat(l))||this,r(i,"goldLabel",v,o(i)),r(i,"compositeLabel",_,o(i)),r(i,"icoSprite",L,o(i)),i._call=void 0,i}t(i,e),i._getPrefab=function(){return p.game.get("prefab/ui/degradeDialog",c)};var l=i.prototype;return l._open=function(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];var r=i[0],o=i[1],l=i[2],a=i[3];this.goldLabel.string=g(r),this.compositeLabel.string=g(o),f(this.icoSprite,"texture/ui/composite-"+l),this._call=a},l.clickConfirm=function(){this._call&&this._call(),this.close()},i}(s)).prototype,"goldLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=i(y.prototype,"compositeLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=i(y.prototype,"icoSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=y))||D));l._RF.pop()}}}));

System.register("chunks:///_virtual/DegradeMoreDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IConfig.ts","./DialogController.ts","./UISprite.ts","./Bundle.ts","./Core.ts","./GameUtils.ts","./ShowRewardDialog.ts"],(function(e){var t,r,a,n,i,o,l,s,d,c,h,u,g,p,f,v,_,m,C,D,y,w,k,b,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,l=e._decorator,s=e.Node,d=e.Prefab,c=e.instantiate,h=e.Label,u=e.Button},function(e){g=e.EquipmentGrades},function(e){p=e.DialogController},function(e){f=e.UISprite},function(e){v=e.Bundle},function(e){_=e.Core},function(e){m=e.getEquipmentIsEquipped,C=e.getDegradeReward,D=e.numberToString,y=e.loadSpriteFrame,w=e.addCompositeCount,k=e.deleteEquipment,b=e.addAchievementCount},function(e){I=e.ShowRewardDialog}],execute:function(){var T,M,q,L,S,E,U;o._RF.push({},"42429PWfqVMFKKqVapWvbrL","DegradeMoreDialog",void 0);var B=l.ccclass,P=l.property;e("DegradeMoreDialog",(T=B("DegradeMoreDialog"),M=P(s),q=P(s),T((E=t((S=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,a(t,"rewards",E,n(t)),a(t,"checks",U,n(t)),t._call=void 0,t._filterTypes=new Set,t._handleDatas=[],t}r(t,e),t._getPrefab=function(){return v.game.get("prefab/ui/degradeMoreDialog",d)};var o=t.prototype;return o.onLoad=function(){var e=this,t=this.checks.children[0];t.parent=null;for(var r=0;r<g.length;r++){var a=g[r];this._configCheck(a,""+a,t)}this._configCheck("NoUpgrade","Lock Upgraded Equipment",t);for(var n,o=this.checks.children,l=function(){var t=n.value,r=t.getValue("type");t.on(u.EventType.CLICK,(function(){e._filterTypes.has(r)?e._filterTypes.delete(r):e._filterTypes.add(r),e._reloadChecks(),e._reload()}))},s=i(o);!(n=s()).done;)l();this._filterTypes.add("NoUpgrade"),this._filterTypes.add("C"),this._reloadChecks()},o._configCheck=function(e,t,r){var a=c(r);return a.parent=this.checks,a.getChildByName("tip").getComponent(h).string=t,a.setValue("type",e),a},o._reloadChecks=function(){for(var e,t=this.checks.children,r=i(t);!(e=r()).done;){var a=e.value,n=a.getValue("type");a.getChildByPath("toggle/ico").active=this._filterTypes.has(n)}},o._open=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0];this._call=a,this._reload()},o._reload=function(){var e=this;this._handleDatas=[].concat(_.userInfo.equipments),this._handleDatas=this._handleDatas.filter((function(e){return!m(e.uid)})),this._handleDatas=this._handleDatas.filter((function(t){var r=t.grade;return(!e._filterTypes.has("NoUpgrade")||!(t.level>1||t.star>0))&&e._filterTypes.has(r)}));for(var t,r=0,a=new Map,n=i(this._handleDatas);!(t=n()).done;){var o,l=t.value,s=C(l.grade,l.star,l.level),d=s.gold,u=s.composite;r+=d;var p=null!=(o=a.get(l.grade))?o:0;p+=u,a.set(l.grade,p)}var v=this.rewards.children[0];this.rewards.removeAllChildren(),v.parent=this.rewards,v.getComponentInChildren(h).string=D(r);for(var w=0;w<g.length;w++){var k=g[w];if(a.has(k)){var b=c(v);b.parent=this.rewards,b.getComponentInChildren(h).string=D(a.get(k));var I=b.getComponentInChildren(f);y(I,"texture/ui/composite-"+k)}}},o.clickConfirm=function(){if(0!==this._handleDatas.length){for(var e,t=0,r=new Map,a=new Map,n=i(this._handleDatas);!(e=n()).done;){var o,l,s=e.value,d=C(s.grade,s.star,s.level),c=d.gold,h=d.composite;t+=c;var u=null!=(o=r.get(s.grade))?o:0;u+=h,r.set(s.grade,u);var p=null!=(l=a.get(s.grade))?l:0;a.set(s.grade,p+h)}_.userInfo.gold+=t;for(var f,v=i(r);!(f=v()).done;){var m=f.value,D=m[0],y=m[1];w(D,y)}var T=this._handleDatas.map((function(e){return e.uid}));k(T),b("degradeEquipment",T.length);for(var M,q={gold:t,composites:{}},L=i(g);!(M=L()).done;){var S,E=M.value,U=null!=(S=a.get(E))?S:0;U>0&&(q.composites[E]=U)}I.show(q),this._call&&this._call(),this.close()}},t}(p)).prototype,"rewards",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(S.prototype,"checks",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=S))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/DialogController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIMgr.ts","./TweenUtils.ts","./Controller.ts"],(function(n){var t,e,o,r,i,l,a,s,c,u,p,f;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){i=n.cclegacy,l=n._decorator,a=n.Node,s=n.instantiate,c=n.BlockInputEvents},function(n){u=n.UIMgr},function(n){p=n.TweenUtils},function(n){f=n.Controller}],execute:function(){var d,y,h,m,g,v,C,_;i._RF.push({},"c554doJUE5Gl6xVL7rPt+6r","DialogController",void 0);var D=l.ccclass,b=l.property,O=function(n){return n.OnClose="OnClose",n.OnDestroy="OnDestroy",n}(O||{});n("DialogController",(d=D("DialogController"),y=b(a),h=b(a),d(((_=function(n){function t(){for(var t,e=arguments.length,i=new Array(e),l=0;l<e;l++)i[l]=arguments[l];return t=n.call.apply(n,[this].concat(i))||this,o(t,"mask",v,r(t)),o(t,"content",C,r(t)),t._fadeInAnim="fromSmall",t}e(t,n),t.show=function(){var n=this._getPrefab(),e=s(n);e.parent=u.instance.dialogParent,e.addUniqueComponent(c);var o=e.getComponent(t);return o.open.apply(o,arguments),o};var i=t.prototype;return i.open=function(){null!==this._fadeInAnim&&(p.fadeIn(this.content,this._fadeInAnim,null,.5),p.modifyOpacity(this.mask,0,255,null,.2)),this._open.apply(this,arguments)},i.close=function(){var n=this;this.node.emit(t.EventType.OnClose),p.fadeOut(this.mask,null,.1),p.fadeOut(this.content,(function(){n.node.emit(t.EventType.OnDestroy),n.node.destroy()}),.1)},t._getPrefab=function(){return null},i._open=function(){},t}(f)).EventType=O,v=t((g=_).prototype,"mask",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(g.prototype,"content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=g))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/DragController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts"],(function(t){var e,i,r,o,n,a,l,c,s,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,l=t.v3,c=t.v2,s=t.Enum,u=t.NodeEventType},function(t){h=t.Controller}],execute:function(){var p,d,f,g,y,D;n._RF.push({},"a24aapOguREoYZPcFq7JPxV","DragController",void 0);var v=a.ccclass,z=a.property,_=a.type,b=t("DragDirection",function(t){return t[t.All=0]="All",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical",t}({})),m=l(),C=l(),P=c();t("DragController",(p=v("DragController"),d=_(s(b)),p((y=e((g=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"direction",y,o(e)),r(e,"outParent",D,o(e)),e}i(e,t);var n=e.prototype;return n.onLoad=function(){this.node.on(u.TOUCH_MOVE,this._onDraged,this)},n.onDestroy=function(){this.node.off(u.TOUCH_MOVE,this._onDraged,this)},n._onDraged=function(t){var e=t.getUIDelta(P),i=this.node.tempPosition;if(this.direction!==b.All&&this.direction!==b.Horizontal||(i.x+=e.x),this.direction!==b.All&&this.direction!==b.Vertical||(i.y+=e.y),!this.outParent&&this.node.parent){var r=this.node.uiTransfrom.contentSize,o=this.node.parent.uiTransfrom.contentSize;m.set(-o.width/2,-o.height/2).add3f(r.width/2,r.height/2,0),C.set(o.width/2,o.height/2).subtract3f(r.width/2,r.height/2,0),i.clampf(m,C)}this.node.position=i,t.propagationStopped=!0},e}(h)).prototype,"direction",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.All}}),D=e(g.prototype,"outParent",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=g))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/DySidebarReward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./DialogController.ts","./Bundle.ts","./IConfig2.ts"],(function(e){var t,i,r,n,a,o,l,c,s,u,f,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Label,c=e.Prefab},function(e){s=e.Core},function(e){u=e.DialogController},function(e){f=e.Bundle},function(e){d=e.AppName}],execute:function(){var b,p,g,h,_,m,y;a._RF.push({},"25ff5Tf5hZOXqc+XbHtw5Bq","DySidebarReward",void 0);var w=o.ccclass,v=o.property;e("DySidebarReward",(b=w("DySidebarReward"),p=v(l),g=v(l),b((m=t((_=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"confirmLabel",m,n(t)),r(t,"appNameLabel",y,n(t)),t._isFromSidebar=!1,t._tt=null,t._call=void 0,t}i(t,e),t.getVisible=function(e){},t._getPrefab=function(){return f.game.get("prefab/ui/dySidebarReward",c)};var a=t.prototype;return a.onConfirm=function(){this._isFromSidebar?this._getAward():this._toSidebar()},a._open=function(){for(var e,t=this,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];var a=r[0];this._call=a,this.appNameLabel.string="「"+d+"」",this._tt=window.tt,null==(e=this._tt)||e.onShow((function(e){t._isFromSidebar="homepage"==e.launch_from&&"sidebar_card"==e.location,t.confirmLabel.string=t._isFromSidebar?"立即领奖":"去首页侧边栏"}))},a._toSidebar=function(){var e;null==(e=this._tt)||e.navigateToScene({scene:"sidebar",success:function(e){console.log("navigate to scene success")},fail:function(e){console.log("navigate to scene fail: ",e),alert("跳转失败，请稍后再试！")}})},a._getAward=function(){s.userInfo.day.dyRewardEnable=!1,this._call&&this._call(),this.close()},t}(u)).prototype,"confirmLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(_.prototype,"appNameLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=_))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/EquipmentConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ArrayConfig.ts"],(function(E){var B,A,C;return{setters:[function(E){B=E.inheritsLoose},function(E){A=E.cclegacy},function(E){C=E.ArrayConfig}],execute:function(){A._RF.push({},"8b28fRTrYhMYJ1feywW+UiR","EquipmentConfig",void 0);E("EquipmentConfig",new(function(E){function A(){return E.apply(this,arguments)||this}return B(A,E),A}(C))("%5B%7B%22id%22%3A1%2C%22name%22%3A%22%E7%8E%84%E9%93%81%E6%88%98%E7%94%B2%22%2C%22type%22%3A%22p1%22%2C%22ico%22%3A%22e1-p1%22%2C%22setName%22%3A%22%E7%8E%84%E9%93%81%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B40%25%2C%E6%94%BB%E5%87%BB%2B10%25%22%2C%22starSkill1%22%3A%22%E7%94%9F%E5%91%BD%2B10%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B10%25%22%2C%22starSkill3%22%3A%22%E7%94%9F%E5%91%BD%2B20%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill5%22%3A%22%E7%94%9F%E5%91%BD%2B30%25%22%7D%2C%7B%22id%22%3A2%2C%22name%22%3A%22%E7%8E%84%E9%93%81%E4%B9%8B%E9%9D%B4%22%2C%22type%22%3A%22p2%22%2C%22ico%22%3A%22e1-p2%22%2C%22setName%22%3A%22%E7%8E%84%E9%93%81%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B40%25%2C%E6%94%BB%E5%87%BB%2B10%25%22%2C%22starSkill1%22%3A%22%E7%94%9F%E5%91%BD%2B10%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B10%25%22%2C%22starSkill3%22%3A%22%E7%94%9F%E5%91%BD%2B20%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill5%22%3A%22%E7%94%9F%E5%91%BD%2B30%25%22%7D%2C%7B%22id%22%3A3%2C%22name%22%3A%22%E7%8E%84%E9%93%81%E4%B9%8B%E6%88%92%22%2C%22type%22%3A%22p3%22%2C%22ico%22%3A%22e1-p3%22%2C%22setName%22%3A%22%E7%8E%84%E9%93%81%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B40%25%2C%E6%94%BB%E5%87%BB%2B10%25%22%2C%22starSkill1%22%3A%22%E6%94%BB%E5%87%BB%2B5%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%22%2C%22starSkill3%22%3A%22%E6%94%BB%E5%87%BB%2B10%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B40%25%22%2C%22starSkill5%22%3A%22%E6%94%BB%E5%87%BB%2B15%25%22%7D%2C%7B%22id%22%3A4%2C%22name%22%3A%22%E7%8E%84%E9%93%81%E9%A1%B9%E9%93%BE%22%2C%22type%22%3A%22p4%22%2C%22ico%22%3A%22e1-p4%22%2C%22setName%22%3A%22%E7%8E%84%E9%93%81%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B40%25%2C%E6%94%BB%E5%87%BB%2B10%25%22%2C%22starSkill1%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B5%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%22%2C%22starSkill3%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B10%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B40%25%22%2C%22starSkill5%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B15%25%22%7D%2C%7B%22id%22%3A5%2C%22name%22%3A%22%E5%B9%BB%E8%93%9D%E6%88%98%E7%94%B2%22%2C%22type%22%3A%22p1%22%2C%22ico%22%3A%22e2-p1%22%2C%22setName%22%3A%22%E5%B9%BB%E8%93%9D%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B40%25%2C%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B10%25%22%2C%22starSkill1%22%3A%22%E7%94%9F%E5%91%BD%2B10%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B10%25%22%2C%22starSkill3%22%3A%22%E7%94%9F%E5%91%BD%2B20%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill5%22%3A%22%E7%94%9F%E5%91%BD%2B30%25%22%7D%2C%7B%22id%22%3A6%2C%22name%22%3A%22%E5%B9%BB%E8%93%9D%E4%B9%8B%E9%9D%B4%22%2C%22type%22%3A%22p2%22%2C%22ico%22%3A%22e2-p2%22%2C%22setName%22%3A%22%E5%B9%BB%E8%93%9D%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B40%25%2C%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B10%25%22%2C%22starSkill1%22%3A%22%E7%94%9F%E5%91%BD%2B10%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B10%25%22%2C%22starSkill3%22%3A%22%E7%94%9F%E5%91%BD%2B20%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill5%22%3A%22%E7%94%9F%E5%91%BD%2B30%25%22%7D%2C%7B%22id%22%3A7%2C%22name%22%3A%22%E5%B9%BB%E8%93%9D%E4%B9%8B%E6%88%92%22%2C%22type%22%3A%22p3%22%2C%22ico%22%3A%22e2-p3%22%2C%22setName%22%3A%22%E5%B9%BB%E8%93%9D%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B40%25%2C%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B10%25%22%2C%22starSkill1%22%3A%22%E6%94%BB%E5%87%BB%2B5%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%22%2C%22starSkill3%22%3A%22%E6%94%BB%E5%87%BB%2B10%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B40%25%22%2C%22starSkill5%22%3A%22%E6%94%BB%E5%87%BB%2B15%25%22%7D%2C%7B%22id%22%3A8%2C%22name%22%3A%22%E5%B9%BB%E8%93%9D%E9%A1%B9%E9%93%BE%22%2C%22type%22%3A%22p4%22%2C%22ico%22%3A%22e2-p4%22%2C%22setName%22%3A%22%E5%B9%BB%E8%93%9D%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B40%25%2C%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B10%25%22%2C%22starSkill1%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B5%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%22%2C%22starSkill3%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B10%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B40%25%22%2C%22starSkill5%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B15%25%22%7D%2C%7B%22id%22%3A9%2C%22name%22%3A%22%E6%9A%97%E9%87%91%E6%88%98%E7%94%B2%22%2C%22type%22%3A%22p1%22%2C%22ico%22%3A%22e3-p1%22%2C%22setName%22%3A%22%E6%9A%97%E9%87%91%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B15%25%2C%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill1%22%3A%22%E7%94%9F%E5%91%BD%2B10%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B10%25%22%2C%22starSkill3%22%3A%22%E7%94%9F%E5%91%BD%2B20%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill5%22%3A%22%E7%94%9F%E5%91%BD%2B30%25%22%7D%2C%7B%22id%22%3A10%2C%22name%22%3A%22%E6%9A%97%E9%87%91%E4%B9%8B%E9%9D%B4%22%2C%22type%22%3A%22p2%22%2C%22ico%22%3A%22e3-p2%22%2C%22setName%22%3A%22%E6%9A%97%E9%87%91%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B15%25%2C%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill1%22%3A%22%E7%94%9F%E5%91%BD%2B10%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B10%25%22%2C%22starSkill3%22%3A%22%E7%94%9F%E5%91%BD%2B20%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill5%22%3A%22%E7%94%9F%E5%91%BD%2B30%25%22%7D%2C%7B%22id%22%3A11%2C%22name%22%3A%22%E6%9A%97%E9%87%91%E4%B9%8B%E6%88%92%22%2C%22type%22%3A%22p3%22%2C%22ico%22%3A%22e3-p3%22%2C%22setName%22%3A%22%E6%9A%97%E9%87%91%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B15%25%2C%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill1%22%3A%22%E6%94%BB%E5%87%BB%2B5%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%22%2C%22starSkill3%22%3A%22%E6%94%BB%E5%87%BB%2B10%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B40%25%22%2C%22starSkill5%22%3A%22%E6%94%BB%E5%87%BB%2B15%25%22%7D%2C%7B%22id%22%3A12%2C%22name%22%3A%22%E6%9A%97%E9%87%91%E9%A1%B9%E9%93%BE%22%2C%22type%22%3A%22p4%22%2C%22ico%22%3A%22e3-p4%22%2C%22setName%22%3A%22%E6%9A%97%E9%87%91%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B15%25%2C%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill1%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B5%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%22%2C%22starSkill3%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B10%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B40%25%22%2C%22starSkill5%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B15%25%22%7D%2C%7B%22id%22%3A13%2C%22name%22%3A%22%E9%99%A8%E6%98%9F%E6%88%98%E7%94%B2%22%2C%22type%22%3A%22p1%22%2C%22ico%22%3A%22e4-p1%22%2C%22setName%22%3A%22%E9%99%A8%E6%98%9F%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B15%25%2C%E6%94%BB%E5%87%BB%2B20%25%22%2C%22starSkill1%22%3A%22%E7%94%9F%E5%91%BD%2B10%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B10%25%22%2C%22starSkill3%22%3A%22%E7%94%9F%E5%91%BD%2B20%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill5%22%3A%22%E7%94%9F%E5%91%BD%2B30%25%22%7D%2C%7B%22id%22%3A14%2C%22name%22%3A%22%E9%99%A8%E6%98%9F%E4%B9%8B%E9%9D%B4%22%2C%22type%22%3A%22p2%22%2C%22ico%22%3A%22e4-p2%22%2C%22setName%22%3A%22%E9%99%A8%E6%98%9F%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B15%25%2C%E6%94%BB%E5%87%BB%2B20%25%22%2C%22starSkill1%22%3A%22%E7%94%9F%E5%91%BD%2B10%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B10%25%22%2C%22starSkill3%22%3A%22%E7%94%9F%E5%91%BD%2B20%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill5%22%3A%22%E7%94%9F%E5%91%BD%2B30%25%22%7D%2C%7B%22id%22%3A15%2C%22name%22%3A%22%E9%99%A8%E6%98%9F%E4%B9%8B%E6%88%92%22%2C%22type%22%3A%22p3%22%2C%22ico%22%3A%22e4-p3%22%2C%22setName%22%3A%22%E9%99%A8%E6%98%9F%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B15%25%2C%E6%94%BB%E5%87%BB%2B20%25%22%2C%22starSkill1%22%3A%22%E6%94%BB%E5%87%BB%2B5%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%22%2C%22starSkill3%22%3A%22%E6%94%BB%E5%87%BB%2B10%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B40%25%22%2C%22starSkill5%22%3A%22%E6%94%BB%E5%87%BB%2B15%25%22%7D%2C%7B%22id%22%3A16%2C%22name%22%3A%22%E9%99%A8%E6%98%9F%E9%A1%B9%E9%93%BE%22%2C%22type%22%3A%22p4%22%2C%22ico%22%3A%22e4-p4%22%2C%22setName%22%3A%22%E9%99%A8%E6%98%9F%22%2C%22setSkill%22%3A%22%E7%94%9F%E5%91%BD%2B15%25%2C%E6%94%BB%E5%87%BB%2B20%25%22%2C%22starSkill1%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B5%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%22%2C%22starSkill3%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B10%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B40%25%22%2C%22starSkill5%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B15%25%22%7D%2C%7B%22id%22%3A17%2C%22name%22%3A%22%E5%9C%A3%E8%BE%89%E6%88%98%E7%94%B2%22%2C%22type%22%3A%22p1%22%2C%22ico%22%3A%22e5-p1%22%2C%22setName%22%3A%22%E5%9C%A3%E8%BE%89%22%2C%22setSkill%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%2C%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B60%25%22%2C%22starSkill1%22%3A%22%E7%94%9F%E5%91%BD%2B10%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B10%25%22%2C%22starSkill3%22%3A%22%E7%94%9F%E5%91%BD%2B20%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill5%22%3A%22%E7%94%9F%E5%91%BD%2B30%25%22%7D%2C%7B%22id%22%3A18%2C%22name%22%3A%22%E5%9C%A3%E8%BE%89%E4%B9%8B%E9%9D%B4%22%2C%22type%22%3A%22p2%22%2C%22ico%22%3A%22e5-p2%22%2C%22setName%22%3A%22%E5%9C%A3%E8%BE%89%22%2C%22setSkill%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%2C%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B60%25%22%2C%22starSkill1%22%3A%22%E7%94%9F%E5%91%BD%2B10%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B10%25%22%2C%22starSkill3%22%3A%22%E7%94%9F%E5%91%BD%2B20%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B20%25%22%2C%22starSkill5%22%3A%22%E7%94%9F%E5%91%BD%2B30%25%22%7D%2C%7B%22id%22%3A19%2C%22name%22%3A%22%E5%9C%A3%E8%BE%89%E4%B9%8B%E6%88%92%22%2C%22type%22%3A%22p3%22%2C%22ico%22%3A%22e5-p3%22%2C%22setName%22%3A%22%E5%9C%A3%E8%BE%89%22%2C%22setSkill%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%2C%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B60%25%22%2C%22starSkill1%22%3A%22%E6%94%BB%E5%87%BB%2B5%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%22%2C%22starSkill3%22%3A%22%E6%94%BB%E5%87%BB%2B10%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B40%25%22%2C%22starSkill5%22%3A%22%E6%94%BB%E5%87%BB%2B15%25%22%7D%2C%7B%22id%22%3A20%2C%22name%22%3A%22%E5%9C%A3%E8%BE%89%E9%A1%B9%E9%93%BE%22%2C%22type%22%3A%22p4%22%2C%22ico%22%3A%22e5-p4%22%2C%22setName%22%3A%22%E5%9C%A3%E8%BE%89%22%2C%22setSkill%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%2C%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B60%25%22%2C%22starSkill1%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B5%25%22%2C%22starSkill2%22%3A%22%E6%9A%B4%E5%87%BB%E7%8E%87%2B20%25%22%2C%22starSkill3%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B10%25%22%2C%22starSkill4%22%3A%22%E6%9A%B4%E5%87%BB%E4%BC%A4%E5%AE%B3%2B40%25%22%2C%22starSkill5%22%3A%22%E9%99%84%E5%8A%A0%E4%BC%A4%E5%AE%B3%2B15%25%22%7D%5D"));A._RF.pop()}}}));

System.register("chunks:///_virtual/EquipmentDetailDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EquipmentConfig.ts","./EquipmentGradeConfig.ts","./IConfig.ts","./EquipmentItemController.ts","./MsgMgr.ts","./DialogController.ts","./UISprite.ts","./Bundle.ts","./Core.ts","./IGame.ts","./GameUtils.ts","./DegradeDialog.ts","./ShowRewardDialog.ts","./Toast.ts"],(function(e){var t,i,a,r,l,o,n,u,p,s,d,g,c,m,h,b,f,_,v,C,q,S,y,w,L,D,E,N,I,z,F,B,G,T,k,U,A,M,P,x,R,H,V,j,J,K;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,n=e.color,u=e.Sprite,p=e.SpriteFrame,s=e.Label,d=e.Node,g=e.Prefab,c=e.tween,m=e.v3,h=e.AudioClip,b=e.Button},function(e){f=e.EquipmentConfig},function(e){_=e.EquipmentGradeConfig},function(e){v=e.EquipmentTypes},function(e){C=e.EquipmentItemController},function(e){q=e.MsgMgr},function(e){S=e.DialogController},function(e){y=e.UISprite},function(e){w=e.Bundle},function(e){L=e.Core},function(e){D=e.GameAction},function(e){E=e.getDegradeReward,N=e.addCompositeCount,I=e.deleteEquipment,z=e.addAchievementCount,F=e.getHeroPropertyTypeByEquipmentType,B=e.getHeroPropertyValueByEquipment,G=e.getEnTitle,T=e.getEnSetName,k=e.getEquipmentSetEquippedCount,U=e.getUpgradeNeedGold,A=e.getUpgradeNeedComposite,M=e.starEqualLevel,P=e.getCompositeCount,x=e.numberToString,R=e.loadSpriteFrame,H=e.setCompositeCount,V=e.upgradeEquipment},function(e){j=e.DegradeDialog},function(e){J=e.ShowRewardDialog},function(e){K=e.Toast}],execute:function(){var O,Q,W,X,Y,Z,$,ee,te,ie,ae,re,le,oe,ne,ue,pe,se,de,ge,ce,me,he,be,fe,_e,ve,Ce,qe,Se,ye,we,Le,De,Ee;l._RF.push({},"e6343GMLglNI5ecAKyJHLAb","EquipmentDetailDialog",void 0);var Ne=o.ccclass,Ie=o.property,ze=n("000000"),Fe=n("76787E"),Be=n("FFFFFF"),Ge=n("F57C7C");e("EquipmentDetailDialog",(O=Ne("EquipmentDetailDialog"),Q=Ie(C),W=Ie(u),X=Ie(p),Y=Ie(p),Z=Ie(s),$=Ie(d),ee=Ie(s),te=Ie(s),ie=Ie(s),ae=Ie(s),re=Ie(y),le=Ie(s),oe=Ie(s),ne=Ie(d),ue=Ie(s),pe=Ie(d),O((ge=t((de=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,a(t,"itemController",ge,r(t)),a(t,"propIco",ce,r(t)),a(t,"damageSf",me,r(t)),a(t,"hpSf",he,r(t)),a(t,"propLabel",be,r(t)),a(t,"starSkills",fe,r(t)),a(t,"equipmentSetLabel",_e,r(t)),a(t,"equipmentSetCountLabel",ve,r(t)),a(t,"equipmentSetDescLabel",Ce,r(t)),a(t,"upgradeNeedGoldLabel",qe,r(t)),a(t,"upgradeNeedCompositeIco",Se,r(t)),a(t,"upgradeNeedCompositeLabel",ye,r(t)),a(t,"upgradeBtnLabel",we,r(t)),a(t,"upgradeBtn",Le,r(t)),a(t,"equippingBtnLabel",De,r(t)),a(t,"needGoldAndComposite",Ee,r(t)),t._data=void 0,t._closeCall=void 0,t._upgradeFn=void 0,t._levelNodeTween=void 0,t}i(t,e),t._getPrefab=function(){return w.game.get("prefab/ui/equipmentDetailDialog",g)};var l=t.prototype;return l.clickDegrade=function(){var e=this,t=E(this._data.grade,this._data.star,this._data.level),i=t.gold,a=t.composite;j.show(i,a,this._data.grade,(function(){var t;L.userInfo.gold+=i,N(e._data.grade,a),I([e._data.uid]),z("degradeEquipment"),e.close();var r={gold:i,composites:(t={},t[e._data.grade]=a,t)};J.show(r)}))},l.clickEquipping=function(){var e=f.where("id",this._data.id);L.userInfo.equipped[e.type]===this._data.uid?L.userInfo.equipped[e.type]=null:L.userInfo.equipped[e.type]=this._data.uid,L.userInfo.equipped=L.userInfo.equipped,this.close()},l.clickUpgrade=function(){var e=this;if(this._upgradeFn){this._upgradeFn&&this._upgradeFn(),q.emit(D.onEquipmentUpgrade,this._data.uid),this._reload(),this._levelNodeTween&&this._levelNodeTween.stop();var t=this.itemController.level.node;t.setScale(1.5,1.5,1),this._levelNodeTween=c(t).to(.5,{scale:m(1,1,1)},{easing:"backOut"}).call((function(){e._levelNodeTween=null})).start()}else K.show("Not Enough Materials to Upgrade!")},l.close=function(){this._closeCall&&this._closeCall(),e.prototype.close.call(this)},l._open=function(){this._data=arguments.length<=0?void 0:arguments[0],this._closeCall=arguments.length<=1?void 0:arguments[1],this._reload()},l._reload=function(){var e=this;this._upgradeFn=null;var t=f.where("id",this._data.id),i=_.where("grade",this._data.grade);this.itemController.init(this._data);var a=F(t.type);this.propIco.spriteFrame="Damage"===a?this.damageSf:this.hpSf;var r=B(a,this._data.grade,this._data.star,this._data.level);this.propLabel.string=String(r);for(var l=this.starSkills.children,o=0;o<l.length;o++){var n=l[o],u=t["starSkill"+(o+1)];if(n.active=!!u&&i.maxStar>=o+1,n.active){var p=o<this._data.star,d=n.getComponent(s),g=G(u);d.string="Star "+(o+1)+": "+g,d.color=p?ze:Fe}}var c=L.userInfo.equipped[t.type]===this._data.uid,m=T(t.setName);this.equipmentSetLabel.string=m+" Set";var C=k(t.setName),q=c&&C>=v.length;this.equipmentSetCountLabel.string="["+C+"/"+v.length+"]",this.equipmentSetCountLabel.color=q?ze:Fe;var S=t.setSkill.split(","),y=G(S[0]),D=G(S[1]);this.equipmentSetDescLabel.string="Set Bonus: "+y+","+D,this.equipmentSetDescLabel.color=q?ze:Fe;var E=i.maxLevel===this._data.level,N=i.maxStar===this._data.star&&E;this.upgradeBtn.active=!N,this.needGoldAndComposite.active=!N;var I=!1;if(!N){var j=U(this._data.level,this._data.star),J=A(this._data.level,this._data.star);E&&(j*=M,J*=M);var O=L.userInfo.gold,Q=P(this._data.grade);this.upgradeNeedGoldLabel.string=x(O)+"/"+x(j),this.upgradeNeedCompositeLabel.string=Q+"/"+x(J),this.upgradeNeedGoldLabel.color=O>=j?Be:Ge,this.upgradeNeedCompositeLabel.color=Q>=J?Be:Ge,R(this.upgradeNeedCompositeIco,"texture/ui/composite-"+this._data.grade);var W=E?"Star Up":"Upgrade";(I=Q>=J&&O>=j)&&(this._upgradeFn=function(){L.userInfo.gold-=j,H(e._data.grade,Q-J),V(e._data.uid),z("upgradeEquipment"),K.show(W+" Successful!")}),this.upgradeBtnLabel.string=W}this.equippingBtnLabel.string=c?"Unequip":"Equip";var X=w.audio.get(I?"reward":"clock",h);this.upgradeBtn.getComponent(b).setValue("ClickAudio",X)},t}(S)).prototype,"itemController",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(de.prototype,"propIco",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(de.prototype,"damageSf",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(de.prototype,"hpSf",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=t(de.prototype,"propLabel",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(de.prototype,"starSkills",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=t(de.prototype,"equipmentSetLabel",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=t(de.prototype,"equipmentSetCountLabel",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=t(de.prototype,"equipmentSetDescLabel",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qe=t(de.prototype,"upgradeNeedGoldLabel",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=t(de.prototype,"upgradeNeedCompositeIco",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=t(de.prototype,"upgradeNeedCompositeLabel",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=t(de.prototype,"upgradeBtnLabel",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=t(de.prototype,"upgradeBtn",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=t(de.prototype,"equippingBtnLabel",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=t(de.prototype,"needGoldAndComposite",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=de))||se));l._RF.pop()}}}));

System.register("chunks:///_virtual/EquipmentGradeConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ArrayConfig.ts"],(function(e){var a,n,r;return{setters:[function(e){a=e.inheritsLoose},function(e){n=e.cclegacy},function(e){r=e.ArrayConfig}],execute:function(){n._RF.push({},"ac27ckmmgtKPJ1B80uIdMNF","EquipmentGradeConfig",void 0);e("EquipmentGradeConfig",new(function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n}(r))("%5B%7B%22grade%22%3A%22S%22%2C%22maxStar%22%3A5%2C%22maxLevel%22%3A30%2C%22hp%22%3A1500%2C%22damage%22%3A300%2C%22hpIncrease%22%3A90%2C%22damageIncrease%22%3A30%7D%2C%7B%22grade%22%3A%22A%22%2C%22maxStar%22%3A3%2C%22maxLevel%22%3A30%2C%22hp%22%3A900%2C%22damage%22%3A200%2C%22hpIncrease%22%3A60%2C%22damageIncrease%22%3A20%7D%2C%7B%22grade%22%3A%22B%22%2C%22maxStar%22%3A1%2C%22maxLevel%22%3A30%2C%22hp%22%3A600%2C%22damage%22%3A150%2C%22hpIncrease%22%3A45%2C%22damageIncrease%22%3A15%7D%2C%7B%22grade%22%3A%22C%22%2C%22maxStar%22%3A1%2C%22maxLevel%22%3A30%2C%22hp%22%3A300%2C%22damage%22%3A100%2C%22hpIncrease%22%3A30%2C%22damageIncrease%22%3A10%7D%5D"));n._RF.pop()}}}));

System.register("chunks:///_virtual/EquipmentItemController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EquipmentConfig.ts","./EquipmentGradeConfig.ts","./IConfig.ts","./MsgMgr.ts","./Controller.ts","./UISprite.ts","./Core.ts","./IGame.ts","./GameUtils.ts"],(function(e){var t,i,r,n,o,a,l,u,s,p,c,f,g,m,d,h,b,v,E,y,q,C,F;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.color,u=e.Label,s=e.Node,p=e.instantiate},function(e){c=e.EquipmentConfig},function(e){f=e.EquipmentGradeConfig},function(e){g=e.EquipmentGrades},function(e){m=e.MsgMgr},function(e){d=e.Controller},function(e){h=e.UISprite},function(e){b=e.Core},function(e){v=e.GameAction},function(e){E=e.loadSpriteFrame,y=e.getEquipmentFrame,q=e.getEquipmentTypeIco,C=e.getEnSetName,F=e.getEnEquipName}],execute:function(){var I,U,w,_,z,L,M,x,A,G,S,D,N,B,P,R,T;o._RF.push({},"497f79ahb9C9rLoSCKylueE","EquipmentItemController",void 0);var j=a.ccclass,k=a.property,H=[l("FFFFFF"),l("FAA3A6"),l("FCF1AD"),l("EEBEFF")];e("EquipmentItemController",(I=j("EquipmentItemController"),U=k(h),w=k(h),_=k(h),z=k(u),L=k(u),M=k(s),x=k(u),I((S=t((G=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"frame",S,n(t)),r(t,"ico",D,n(t)),r(t,"typeIco",N,n(t)),r(t,"level",B,n(t)),r(t,"grade",P,n(t)),r(t,"stars",R,n(t)),r(t,"title",T,n(t)),t._currentUid=void 0,t}i(t,e);var o=t.prototype;return o.init=function(e){this._currentUid=e.uid;var t=c.where("id",e.id),i=f.where("grade",e.grade);E(this.frame,y(e.grade)),E(this.ico,"texture/equipment/"+t.ico),E(this.typeIco,q(t.type)),i.maxLevel===e.level?this.level.string="Lv.Max":this.level.string="Lv."+e.level,this.grade.color=H[g.indexOf(e.grade)],this.grade.string=e.grade;var r=e.star>0;if(this.stars.active=r,r)for(var n=this.stars.children,o=Math.max(n.length,e.star),a=0;a<o;++a){var l=n[a];if(!l){var u=n[0];(l=p(u)).parent=u.parent}l.active=a<e.star}var s=t.name,m=C(s.substring(0,2)),d=F(s.substring(2));this.title.string=m+"\n"+d},o.onEnable=function(){m.on(v.onEquipmentUpgrade,this._onEquipmentUpgrade,this)},o.onDisable=function(){m.off(v.onEquipmentUpgrade,this._onEquipmentUpgrade,this)},o._onEquipmentUpgrade=function(e){if(this._currentUid===e){var t=b.userInfo.equipments.find((function(t){return t.uid===e}));t&&this.init(t)}},t}(d)).prototype,"frame",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(G.prototype,"ico",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(G.prototype,"typeIco",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(G.prototype,"level",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(G.prototype,"grade",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(G.prototype,"stars",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(G.prototype,"title",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=G))||A));o._RF.pop()}}}));

System.register("chunks:///_virtual/extension-array.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(){var r,t;return{setters:[function(t){r=t.createForOfIteratorHelperLoose},function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"205d47p6JJLToepUde97OoC","extension-array",void 0),Array.prototype.first=function(){return this[0]},Array.prototype.delete=function(r){var t=this;if(r instanceof Function)for(var n=0;n<t.length;n++){r(t[n])&&(t.splice(n,1),n--)}else for(;;){var e=t.indexOf(r);if(-1===e)break;t.splice(e,1)}return t},Array.prototype.pushArray=function(r){var t=this;return t.push.apply(t,r),t},Array.prototype.sum=function(t){for(var n,e=0,o=r(this);!(n=o()).done;){e+=t(n.value)}return e},Array.prototype.max=function(r){for(var t=null,n=null,e=0;e<this.length;e++){var o=this[e],u=r(o);(null===t||n<u)&&(t=o,n=u)}return t},Array.prototype.min=function(r){for(var t=null,n=null,e=0;e<this.length;e++){var o=this[e],u=r(o);(null===t||n>u)&&(t=o,n=u)}return t},Array.prototype.getRandomIndexArr=function(){for(var r=[],t=0;t<this.length;t++)r.push(t);return r.sort((function(r,t){return Math.random()>.5?-1:1})),r},Array.prototype.randomSort=function(){return this.sort((function(r,t){return Math.random()>.5?-1:1})),this},t._RF.pop()}}}));

System.register("chunks:///_virtual/extension-cc.ts",["cc"],(function(t){var e,n,o,i,r,u,p,s,a,c;return{setters:[function(t){e=t.cclegacy,n=t.v2,o=t.CCObject,i=t.Node,r=t.UIOpacity,u=t.Vec2,p=t.Component,s=t.sp,a=t.v3,c=t.UITransform}],execute:function(){t("getImplicitProperty",f),e._RF.push({},"6adb6iES/FNrYUNVrlp3sVz","extension-cc",void 0);var l=n();function f(t,e,n){var o=t[e="__"+e.toUpperCase()];return o||(o=n(),t[e]=o),o}o.prototype.getValue=function(t,e){var n;return this.info||(this.info={}),null!=(n=this.info[t])?n:e},o.prototype.setValue=function(t,e){this.info||(this.info={}),this.info[t]=e},Object.defineProperty(i.prototype,"tempPosition",{get:function(){var t=f(this,"tempPosition",(function(){return a()}));return this.getPosition(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tempWorldPosition",{get:function(){var t=f(this,"tempWorldPosition",(function(){return a()}));return this.getWorldPosition(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tempScale",{get:function(){var t=f(this,"tempScale",(function(){return a()}));return this.getScale(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uiTransfrom",{get:function(){var t=this;return f(t,"uiTransfrom",(function(){return t.getComponent(c)}))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"opacity",{get:function(){return this.addUniqueComponent(r).opacity},set:function(t){this.addUniqueComponent(r).opacity=t},enumerable:!1,configurable:!0}),i.prototype.getBoundingBox=function(){return this.uiTransfrom.getBoundingBox()},i.prototype.lookPosition=function(t,e){void 0===e&&(e=!1);var n=this,o=e?n.worldPosition:n.position;l.set(t.x-o.x,t.y-o.y).normalize(),n.angle=u.UNIT_Y.signAngle(l)/Math.PI*180},i.prototype.addUniqueComponent=function(t){var e;return null!=(e=this.getComponent(t))?e:this.addComponent(t)},p.prototype.addUniqueComponent=function(t){return this.node.addUniqueComponent(t)},s&&s.Skeleton&&(s.Skeleton.prototype.openAutoMixAnimation=function(t){this.__AutoMixDuration__=t},s.Skeleton.prototype.play=function(t,e,n){var o=this,i=o.findAnimation(t);if(i){var r=o.__AutoMixDuration__;r&&o.setMix(o.animation,t,r),o.setAnimation(0,t,e),n&&!e?o.setCompleteListener((function(e){o.setCompleteListener(null),e.animation.name===t&&n&&n(e)})):o.setCompleteListener(null)}else o.setCompleteListener(null);return i},s.Skeleton.prototype.playOnce=function(t,e){return this.play(t,!1,e)}),e._RF.pop()}}}));

System.register("chunks:///_virtual/extension-math.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(){var t,n;return{setters:[function(n){t=n.createForOfIteratorHelperLoose},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"d78c7hLjNpFP6g/gzM5rutG","extension-math",void 0),Math.getRatio=function(t,n,r){return(r-t)/(n-t)},Math.randomFloat=function(t,n){return Math.random()*(n-t)+t},Math.randomInt=function(t,n,r){void 0===r&&(r=null);var a=Math.floor(Math.randomFloat(t,n));return null!==r&&a===r?Math.randomInt(t,n,r):a},Math.randomInt2=function(t,n,r){return void 0===r&&(r=null),Math.randomInt(t,n+1,r)},Math.clamp=function(t,n,r){return Math.max(n,Math.min(r,t))},Math.createWeights=function(t,n){void 0===n&&(n=1);for(var r=[],a=0;a<t;a++){var o=void 0;o=0===a?100:r[a-1]*n,r.push(o)}return r},Math.randomByWeights=function(n){for(var r,a=0,o=t(n);!(r=o()).done;){a+=r.value}for(var e=Math.random()*a,u=0,i=0;i<n.length;i++)if(e<(u+=n[i]))return i;return 0},Math.weightsToProbabilities=function(t){var n=t.reduce((function(t,n){return t+n}),0);return 0===n?new Array(t.length).fill(0):t.map((function(t){return t/n}))},n._RF.pop()}}}));

System.register("chunks:///_virtual/extension-number.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"fdd9cZ5yCxG/7F9VHfzHaQl","extension-number",void 0),Number.prototype.formatNumber=function(){return this>1e4?(this/1e4).toFixed(1)+"万":this>1e8?(this/1e8).toFixed(1)+"亿":String(Math.floor(this))},t._RF.pop()}}}));

System.register("chunks:///_virtual/extension-string.ts",["cc"],(function(){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"19fdel5FJ9PnaplThh2njJr","extension-string",void 0),String.prototype.replaceFromParams=function(t){var r=this,e=r.match(/\${[a-zA-Z0-9_.]+}/g);if(e)for(var n=0;n<e.length;n++){var a=e[n],c=a.replace(/\$|{|}/g,"");r=r.replace(a,String(t[c]))}return r},String.prototype.extractIntegers=function(){var t=this.match(/[+-]?\d+/g);return t?t.map(Number):[]},t._RF.pop()}}}));

System.register("chunks:///_virtual/FightContainer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts","./HeroController.ts","./MonsterController.ts"],(function(r){var t,e,o,n,i,l,a,u,c,s;return{setters:[function(r){t=r.applyDecoratedDescriptor,e=r.inheritsLoose,o=r.initializerDefineProperty,n=r.assertThisInitialized},function(r){i=r.cclegacy,l=r._decorator,a=r.Node},function(r){u=r.Controller},function(r){c=r.HeroController},function(r){s=r.MonsterController}],execute:function(){var p,C,h,b,f,g,y,m,v,d,z;i._RF.push({},"40312r7WV5NIog5EvMB5JZc","FightContainer",void 0);var F=l.ccclass,w=l.property;r("FightContainer",(p=F("FightContainer"),C=w(c),h=w(s),b=w(a),f=w(a),p((m=t((y=function(r){function t(){for(var t,e=arguments.length,i=new Array(e),l=0;l<e;l++)i[l]=arguments[l];return t=r.call.apply(r,[this].concat(i))||this,o(t,"heroController",m,n(t)),o(t,"monsterController",v,n(t)),o(t,"bulletContainer",d,n(t)),o(t,"boomContainer",z,n(t)),t.root=void 0,t}e(t,r);var i=t.prototype;return i.init=function(r){this.root=r,this.heroController.init(this),this.monsterController.init(this)},i.update=function(r){},t}(u)).prototype,"heroController",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(y.prototype,"monsterController",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(y.prototype,"bulletContainer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(y.prototype,"boomContainer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=y))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/FightUnit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IdMgr.ts","./Controller.ts"],(function(t){var i,a,n,o,h,e,l;return{setters:[function(t){i=t.inheritsLoose,a=t.createClass},function(t){n=t.cclegacy,o=t._decorator,h=t.clamp01},function(t){e=t.IdMgr},function(t){l=t.Controller}],execute:function(){var s;n._RF.push({},"3d262pwr9xDCJlumDNffKnE","FightUnit",void 0);var r=o.ccclass;o.property,t("FightUnit",r("FightUnit")(s=function(t){function n(){for(var i,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this)._fight=void 0,i.uid=void 0,i._hp=null,i._damage=null,i._hpRatio=void 0,i._hpRatioWill=void 0,i}i(n,t);var o=n.prototype;return o.init=function(t){this._fight=t,this.uid=e.getId(this.constructor),this._hpRatio=1,this._hpRatioWill=1},o.onEnable=function(){},o.onDisable=function(){},o.willDie=function(){return this._hpRatioWill<=0},o.addHpRatio=function(t){t=Math.min(t,1-this._hpRatio),this._hpRatio+=t,this._hpRatioWill+=t},o.causeDamage=function(t,i){if(void 0===i&&(i=1),t.willDie())return null;var a=this.getDamage()*i,n=this._getCrtDamageBonus(),o=a*(1+n)*(1+this._getAddDamageBonus()),h=t.getHp();return o=Math.round(o),h=Math.round(h),t._hpRatioWill=(Math.round(t._hpRatioWill*h)-o)/h,t._hpRatioWill<=0&&t._onWillDead(),{atk:o,maxHp:h,isCrt:n>0}},o.showDamage=function(t){var i=t.maxHp,a=t.atk;this._hpRatio=(Math.round(this._hpRatio*i)-a)/i;var n=this._hpRatio<=0;this._onBeAttack(t,n),n&&this._onDead()},o.getHp=function(){return null===this._hp&&(this._hp=this._getHp()),this._hp},o.getDamage=function(){return null===this._damage&&(this._damage=this._getDamage()),this._damage},o.updateValues=function(){this._hp=null,this._damage=null},o._onTouchStart=function(){console.log({hp:this.getHp(),damage:this.getDamage(),hpRatio:this.hpRatio,hpRatioWill:this._hpRatioWill})},a(n,[{key:"hpRatio",get:function(){return h(this._hpRatio)}}]),n}(l))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/FireBottomBulletUnit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts","./Bundle.ts","./Core.ts","./IGame.ts","./BottomBulletUnit.ts"],(function(t){var e,o,i,n,r,l,a,s,u,c,d,f,h,m,p,b,_,v,B,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,a=t._decorator,s=t.v2,u=t.Node,c=t.isValid,d=t.clamp,f=t.Prefab,h=t.instantiate,m=t.tween,p=t.v3},function(t){b=t.Controller},function(t){_=t.Bundle},function(t){v=t.Core},function(t){B=t.GameState},function(t){g=t.BottomBulletUnit}],execute:function(){var x,M,w,y,F;l._RF.push({},"9205bIBpRNF9bIl8WRbY3jr","FireBottomBulletUnit",void 0);var U=a.ccclass,C=a.property,P=s(),I=t("MaxBulletCount",300);t("FireBottomBulletUnit",(x=U("FireBottomBulletUnit"),M=C(u),x((F=e((y=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,i(e,"fireNode",F,n(e)),e._bottom=void 0,e._boxMinX=0,e._boxMaxX=0,e._time=0,e._bullets=[],e}o(e,t);var l=e.prototype;return l.init=function(t){var e=this;this._bottom=t,this._bottom.root.node.on(u.EventType.TOUCH_MOVE,(function(t){if(c(e.node,!0)){var o=t.getUIDelta(P),i=e.node.tempPosition.add3f(o.x,0,0);i.x=d(i.x,e._boxMinX,e._boxMaxX),e.node.position=i}}))},l.start=function(){var t=this.node.uiTransfrom.contentSize,e=this.node.parent.uiTransfrom.contentSize;this._boxMinX=-e.width/2+t.width/2,this._boxMaxX=e.width/2-t.width/2},l.getBullets=function(){return this._bullets},l.createBullet=function(t){var e=this;void 0===t&&(t=null);var o=_.game.get("prefab/gaming/bottom/bottom-bullet",f),i=h(o);i.parent=this._bottom.bulletContainer,t?(i.worldPosition=t.node.tempWorldPosition.add3f(Math.randomFloat(-5,5),Math.randomFloat(-5,5),0),i.angle=t.node.angle):(i.worldPosition=this.fireNode.worldPosition,i.angle=i.position.x<0?-1:1);var n=i.getComponent(g);if(n.init(this._bottom,(function(){e._bullets.delete(n)})),t)for(var l,a=r(t.blockUids);!(l=a()).done;){var s=l.value;n.blockUids.add(s)}this._bullets.push(n)},l.update=function(t){var e=this;if(v.game.state===B.Gaming&&this._time>=0)if(0===this._time){if(this._bullets.length>I)return void(this._time=.1);this._time=-1;var o=1;o*=1+v.game.info.heroInfo.AtkSpeedBonus/100,this.node.setScale(1,1),m(this.node).to(.2/o,{scale:p(.97,.9)}).to(.15/o,{scale:p(1,1)}).call((function(){e.createBullet(),e._time=0})).start()}else this._time=Math.max(0,this._time-t)},e}(b)).prototype,"fireNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=y))||w));l._RF.pop()}}}));

System.register("chunks:///_virtual/FirstGiftDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogController.ts","./Bundle.ts"],(function(t){var i,e,o,r,n,l,c,a,s,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,c=t.Node,a=t.Prefab},function(t){s=t.DialogController},function(t){u=t.Bundle}],execute:function(){var f,p,g,h,d;n._RF.push({},"112fbDJxutKs4vj4QYvs5Yo","FirstGiftDialog",void 0);var D=l.ccclass,v=l.property;t("FirstGiftDialog",(f=D("FirstGiftDialog"),p=v(c),f((d=i((h=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return i=t.call.apply(t,[this].concat(n))||this,o(i,"chestIcoNode",d,r(i)),i._call=void 0,i}e(i,t),i._getPrefab=function(){return u.game.get("prefab/ui/firstGiftDialog",a)};var n=i.prototype;return n._open=function(t){this._call=t},n.onClickConfirm=function(){this._call&&this._call(this.chestIcoNode),this.close()},i}(s)).prototype,"chestIcoNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=h))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts"],(function(t){var e,r,n,o,s;return{setters:[function(t){e=t.inheritsLoose,r=t.createClass},function(t){n=t.cclegacy,o=t._decorator},function(t){s=t.Controller}],execute:function(){var a;n._RF.push({},"cc9e0mmLXBNurhJv0oz4fks","GameController",void 0);var c=o.ccclass;o.property,t("GameController",c("GameController")(a=function(t){function n(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._state=void 0,e}return e(n,t),r(n,[{key:"state",get:function(){return this._state},set:function(t){if(t!==this.state){var e=this.state;this._state=t,this._onStateChanged(t,e)}}}]),n}(s))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameFinishDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EquipmentItemController.ts","./RunScene.ts","./AudioMgr.ts","./DialogController.ts","./Bundle.ts","./Core.ts","./IGame.ts","./GameUtils.ts","./ShowRewardDialog.ts","./AdScript.ts"],(function(e){var t,i,n,r,o,a,l,u,s,c,d,p,f,g,h,b,m,v,w,y,G,L,D,_,R,q,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,u=e.Node,s=e.Label,c=e.Prefab,d=e.instantiate,p=e.AudioClip},function(e){f=e.EquipmentItemController},function(e){g=e.RunScene},function(e){h=e.AudioMgr},function(e){b=e.DialogController},function(e){m=e.Bundle},function(e){v=e.Core},function(e){w=e.SceneName},function(e){y=e.getGamingReward,G=e.sortEquipments,L=e.addExp,D=e.createEquipment,_=e.addEquipmentByDatas,R=e.lookAdVideo},function(e){q=e.ShowRewardDialog},function(e){C=e.default}],execute:function(){var A,I,S,x,z,F,E,B,N,P,k,M,O,H,Z;a._RF.push({},"1a4ba4O9WdHZZZ6n6RIWwPO","GameFinishDialog",void 0);var W=l.ccclass,j=l.property;e("GameFinishDialog",(A=W("GameFinishDialog"),I=j(u),S=j(u),x=j(u),z=j(s),F=j(s),E=j(u),A((P=t((N=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"victory",P,r(t)),n(t,"defeat",k,r(t)),n(t,"doubleGetNode",M,r(t)),n(t,"goldLabel",O,r(t)),n(t,"expLabel",H,r(t)),n(t,"rewardList",Z,r(t)),t._reward=void 0,t}i(t,e),t._getPrefab=function(){return m.game.get("prefab/ui/gameFinishDialog",c)};var a=t.prototype;return a.open=function(){var t;this._fadeInAnim="fromBig";for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];(t=e.prototype.open).call.apply(t,[this].concat(n))},a._open=function(e){var t=1===e;this.victory.active=t,this.defeat.active=!t,this.doubleGetNode.active=t;var i=y(e);G(i.equipments),this._reward=i,this.goldLabel.string=i.gold+"",this.expLabel.string=i.exp+"";var n=this.rewardList.children[0];n.parent=null;for(var r=0;r<i.equipments.length;r++){var o=i.equipments[r],a=d(n);a.parent=this.rewardList,a.getComponent(f).init(o)}h.inst.playOneShot(m.audio.get(t?"victory":"defeat",p)),C.delayShowInterstitialAd(.5*Math.random()+1)},a._toGetReward=function(e){var t=this._reward;e&&(t.gold*=2,t.exp*=2),v.userInfo.gold+=t.gold,L(t.exp);for(var i,n=[],r=o(t.equipments);!(i=r()).done;){var a=i.value;n.push(D(a.id,a.grade)),e&&n.push(D(a.id,a.grade))}_(n),t.equipments=n,q.show(t,(function(){g.show(w.Lobby)})),this.close()},a.onClickGet=function(){this._toGetReward(!1)},a.onClickDoubleGet=function(){var e=this;R((function(t){t||e._toGetReward(!0)}))},t}(b)).prototype,"victory",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(N.prototype,"defeat",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(N.prototype,"doubleGetNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(N.prototype,"goldLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(N.prototype,"expLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(N.prototype,"rewardList",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=N))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameReviveDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./DialogController.ts","./Bundle.ts","./GameUtils.ts","./Toast.ts"],(function(e){var i,t,o,l,n,a,c,r,s,u,v,h,p,f,_,d,g;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,c=e.Node,r=e.Prefab,s=e.AudioClip,u=e.Label,v=e.tween,h=e.v3},function(e){p=e.AudioMgr},function(e){f=e.DialogController},function(e){_=e.Bundle},function(e){d=e.lookAdVideo},function(e){g=e.Toast}],execute:function(){var C,m,y,k,D;n._RF.push({},"5a55bsuMW9H3ZpX5Od7M5QT","GameReviveDialog",void 0);var b=a.ccclass,R=a.property;e("GameReviveDialog",(C=b("GameReviveDialog"),m=R(c),C((D=i((k=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return i=e.call.apply(e,[this].concat(n))||this,o(i,"clock",D,l(i)),i._time=void 0,i._pause=void 0,i._cancelCall=void 0,i._reviveCall=void 0,i}t(i,e),i._getPrefab=function(){return _.game.get("prefab/ui/gameReviveDialog",r)};var n=i.prototype;return n.open=function(){var i;this._fadeInAnim="fromBig";for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];(i=e.prototype.open).call.apply(i,[this].concat(o))},n._open=function(e,i){this._cancelCall=e,this._reviveCall=i,this._time=10,this._pause=!1,this._reloadClock(),this.schedule(this._reloadClock,1),p.inst.playOneShot(_.audio.get("revive",s))},n._reloadClock=function(){if(!this._pause)if(this._time<0)this.onClickCancel();else{this.clock.getComponentInChildren(u).string=""+this._time;var e=this.clock;v(e).to(.15,{scale:h(1.1,1.1,1)}).to(.15,{scale:h(1,1,1)}).start(),v(e).to(.15,{angle:15}).to(.15,{angle:-15}).to(.1,{angle:0}).start(),this.scheduleOnce((function(){p.inst.playOneShot(_.audio.get("clock",s),.1)}),.1),this._time--}},n.onClickCancel=function(){this._cancelCall&&this._cancelCall(),this.close()},n.onClickRevive=function(){var e=this;d((function(i){e._pause=!1,i?g.show(i):(e._reviveCall&&e._reviveCall(),e.close())}))&&(this._pause=!0)},i}(f)).prototype,"clock",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=k))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MonsterProperty.ts","./RunScene.ts","./AudioMgr.ts","./MsgMgr.ts","./UIMgr.ts","./GameController.ts","./HeroData.ts","./Bundle.ts","./Core.ts","./IGame.ts","./GameFinishDialog.ts","./GameReviveDialog.ts","./MessageDialog.ts","./GameUtils.ts","./AdScript.ts"],(function(e){var n,t,o,a,s,i,r,u,c,g,f,l,d,p,m,v,h,G,I,y,D,S,H,C,M,b,w;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,a=e.AudioClip,s=e.PhysicsSystem2D,i=e.instantiate,r=e.Prefab,u=e.Node,c=e.tween,g=e.v3},function(e){f=e.MonsterProperty},function(e){l=e.RunScene},function(e){d=e.AudioMgr},function(e){p=e.MsgMgr},function(e){m=e.UIMgr},function(e){v=e.GameController},function(e){h=e.HeroAction},function(e){G=e.Bundle},function(e){I=e.Core},function(e){y=e.GameState,D=e.SceneName},function(e){S=e.GameFinishDialog},function(e){H=e.GameReviveDialog},function(e){C=e.MessageDialog},function(e){M=e.addAchievementCount,b=e.getGamingHeroInfo},function(e){w=e.default}],execute:function(){var A;t._RF.push({},"19ec5nGwdpKG7LwOHF5uFRt","GameScene",void 0);var B=o.ccclass;o.property,e("GameScene",B("GameScene")(A=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(n=e.call.apply(e,[this].concat(o))||this).info=void 0,n}n(t,e);var o=t.prototype;return o.onLoad=function(){d.background.play(G.audio.get("game-bg",a)),this.info=this._createGamingInfo(),this._loadGuide()?this.state=y.Pause:this.state=y.Gaming},o.onClickBack=function(){var e=this;this.state=y.Pause,C.show("Tips","Are you sure you want to quit now?","Quit",(function(){w.delayShowInterstitialAd(.5*Math.random()+.8),l.show(D.Lobby)}),(function(){e.state===y.Pause&&(e.state=y.Gaming)}))},o.onEnable=function(){I.game=this},o.onDisable=function(){I.game=null},o._onStateChanged=function(e,n){var t=this;if(s.instance.enable=e===y.Gaming,e===y.Gaming)d.background.audio.playing||d.background.play(G.audio.get("game-bg",a));else if(e===y.Ended){d.background.stop();var o=this.info.progress;1===o?(S.show(o),I.userInfo.passLevel++,M("passedLevel")):this.info.revived?S.show(o):H.show((function(){S.show(o)}),(function(){t.info.revived=!0,p.emit(h.revive),t.state=y.Gaming}))}},o._createGamingInfo=function(){console.log("HP========",f.Hp,f.HpIncrease,f.HpIncreaseBoss),console.log("Damage========",f.Damage,f.DamageIncrease,f.DamageIncreaseBoss),console.log("Count========",f.Count,f.CountIncrease);var e=I.userInfo.passLevel,n=b(!0),t={Hp:f.Hp+f.HpIncrease*(e-1),HpBoss:(f.Hp+f.HpIncrease*(e-1))*f.HpIncreaseBoss,Damage:f.Damage+f.DamageIncrease*(e-1),DamageBoss:(f.Damage+f.DamageIncrease*(e-1))*f.DamageIncreaseBoss,AtkSpeed:f.AtkSpeed,MoveSpeed:f.MoveSpeed,Count:f.Count+f.CountIncrease*(e-1)};return{level:I.userInfo.passLevel,progress:0,revived:!1,heroInfo:n,monsterInfo:t}},o._loadGuide=function(){var e=this;if(!I.userInfo.gameGuide)return!1;var n=i(G.game.get("prefab/other/guide",r));n.parent=m.instance.dialogParent,this.node.once(u.EventType.TOUCH_START,(function(){I.userInfo.gameGuide=!1,e.state=y.Gaming,n.destroy()}));var t=n.getChildByPath("content/guide");return c(t).to(1,{position:g(20,t.position.y,0)}).to(1,{position:g(-20,t.position.y,0)}).union().repeat(111).start(),!0},t}(v))||A);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EquipmentConfig.ts","./EquipmentGradeConfig.ts","./HeroProperty.ts","./IConfig.ts","./AudioMgr.ts","./LoadMgr.ts","./Utils.ts","./Bundle.ts","./Core.ts","./IGame.ts","./NotifiDialog.ts","./Toast.ts","./AdScript.ts"],(function(e){var t,n,r,u,i,o,a,s,f,p,l,d,c,m,g,v,h,I,q,y,C,E,x;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,u=e.clamp01,i=e.lerp,o=e.isValid},function(e){a=e.EquipmentConfig},function(e){s=e.EquipmentGradeConfig},function(e){f=e.HeroProperty},function(e){p=e.EquipmentGrades,l=e.EquipmentTypes,d=e.HeroPropertyDescEnums,c=e.HeroPropertyEnums},function(e){m=e.AudioMgr},function(e){g=e.LoadMgr},function(e){v=e.Utils},function(e){h=e.Bundle},function(e){I=e.Core},function(e){q=e.PlayerMaxLevel,y=e.MaxBackpackCount},function(e){C=e.NotifiDialog},function(e){E=e.Toast},function(e){x=e.default}],execute:function(){function M(e,t){return Math.ceil(e/10)*(3+t)}function S(e,t){return Math.ceil((200*e+1e3)*(1+t/2))}function D(e){return 10}function B(e){return"S"===e?3e3:"A"===e?1e3:"B"===e?300:"C"===e?100:void 0}function A(e){return"p3"===e||"p4"===e?"Damage":"Hp"}function k(e,t,n,r){var u=s.where("grade",t);return r+=n*u.maxLevel+n*Z*5,r-=1,"Damage"===e?u.damageIncrease*r+u.damage:"Hp"===e?u.hpIncrease*r+u.hp:0}function w(e){for(var t=Object.keys(I.userInfo.equipped),n=0,r=function(){var t=i[u],r=I.userInfo.equipped[t];if(r){var o=I.userInfo.equipments.find((function(e){return e.uid===r})),s=a.where("id",o.id);e||(e=s.setName),e===s.setName&&n++}},u=0,i=t;u<i.length;u++)r();return n}function R(e){var t,n=""+e;return null!=(t=I.userInfo.composites[n])?t:0}function P(e,t){var n=""+e;I.userInfo.composites[n]=t,I.userInfo.composites=I.userInfo.composites}function F(e){var t,n=""+e;return null!=(t=I.userInfo.achievement[n])?t:0}function H(e){var t,n=""+e;return null!=(t=I.userInfo.day.achievement[n])?t:0}function T(e,t){var n=""+e;I.userInfo.achievement[n]=t,I.userInfo.achievement=I.userInfo.achievement}function b(e,t){var n=""+e;I.userInfo.day.achievement[n]=t,I.userInfo.day.achievement=I.userInfo.day.achievement}function W(e,t,n){(void 0===t&&(t=1),void 0===n&&(n=!0),0!==t)&&(T(e,F(e)+t),n&&b(e,H(e)+t))}function G(){return(G=t(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t._SFPath!==r){e.next=2;break}return e.abrupt("return");case 2:t._SFPath=r,t.spriteFrame=null,g.loadSpriteFrame(h.game,r).then((function(e){o(t,!0)&&t._SFPath===r&&(t.spriteFrame=e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){void 0===e&&(e=!1);var t=L(e),n=Math.randomByWeights(t);return p[n]}function L(e){void 0===e&&(e=!1);var t=I.userInfo.level/(2*q/3);t=u(t);var n=i(0,.1,t),r=i(.01,.2,t),o=i(.2,.6,t),a=i(.79,.1,t);return e&&(n/=9,r/=6,o/=3),I.userInfo.vip&&(n=.3,r=.3,o=.3,a=.1),[n,r,o,a]}function U(){var e=Math.randomInt(0,a.configs.length);return a.configs[e].id}function N(e){var t=["S","A","B","C"];return e.sort((function(e,n){var r=t.indexOf(e.grade),u=t.indexOf(n.grade);if(r===u){if(e.star!==n.star)return n.star-e.star;if(e.level!==n.level)return n.level-e.level;var i=a.where("id",e.id),o=a.where("id",n.id),s=l.indexOf(i.type),f=l.indexOf(o.type);return s!==f?s-f:i.id-o.id}return r-u})),e}function V(e){void 0===e&&(e=!1);var t=I.userInfo.equipments.length;return e||(null!==I.userInfo.equipped.p1&&t--,null!==I.userInfo.equipped.p2&&t--,null!==I.userInfo.equipped.p3&&t--,null!==I.userInfo.equipped.p4&&t--),t}function _(e){return 10*B(e)}function j(e){I.userInfo.equipments=[].concat(I.userInfo.equipments,e)}function K(e,t){return{id:e,level:1,star:0,grade:t,uid:v.randomUUID()}}var J;function Y(){return f.exp*I.userInfo.level}e({addAchievementCount:W,addCompositeCount:function(e,t){if(0===t)return;var n=R(e);P(e,n+t)},addEquipment:function(e,t){var n=K(e,t);return j([n]),n},addEquipmentByDatas:j,addExp:function(e){if(0===e)return;if(I.userInfo.level>=q)return;var t=e+I.userInfo.exp,n=0;for(;;){var r=Y();if(!(t>=r))break;n++,t-=r}if(n>0){var u=Math.min(q,I.userInfo.level+n);I.userInfo.level=u,setTimeout((function(){C.show("Congratulations! You've reached Level "+I.userInfo.level)}),500)}I.userInfo.level>=q&&(t=0);I.userInfo.exp=t},createEquipment:K,deleteEquipment:function(e){for(var t=Object.keys(I.userInfo.equipped),n=0,r=t;n<r.length;n++){var u=r[n],i=I.userInfo.equipped[u];i&&-1!==e.indexOf(i)&&(I.userInfo.equipped[u]=null)}var o=[].concat(I.userInfo.equipments);I.userInfo.equipments=o.filter((function(t){return-1===e.indexOf(t.uid)})),I.userInfo.equipped=I.userInfo.equipped},getAchievementCount:F,getAchievementCountInDay:H,getCompositeCount:R,getDegradeReward:function(e,t,n){var r=s.where("grade",e),u=0,i=0;for(;t>=0&&n>0;)if(0===--n){if(0===t)break;t--,n=r.maxLevel}else u+=S(n,t),i+=M(n,t);return u=Math.floor(.8*u),i=Math.floor(.8*i),{gold:u+=Math.ceil(_(e)/5),composite:i+=10}},getEn:function(e){if("攻击"===e)return"ATK";if("攻速"===e)return"AS";if("附加伤害"===e)return"Extra Damage";if("暴击率"===e)return"Crit Rate";if("暴击伤害"===e)return"Crit Damage";if("生命"===e)return"HP"},getEnDailyTask:function(e,t){var n=t.extractIntegers()[0];if("killMonster"===e)return"Defeat "+n+" Monsters";if("passedLevel"===e)return"Complete "+n+" Levels";if("upgradeEquipment"===e)return"Upgrade Equipment "+n+" Times";if("degradeEquipment"===e)return"Salvage Equipment "+n+" Times";if("buyChestInShop"===e)return"Open "+n+" Gear Chests";if("buyCompositesInShop"===e)return"Buy Upgrade Materials "+n+" Times";if("buyInDailyShop"===e)return"Buy from the Daily Shop "+n+" Times";if("buyInDailyReward"===e)return"Claim the Free Daily Reward from the Shop";if("getOfflineReward"===e)return"Claim Idle Rewards";if("lookAdVideo"===e)return"Watch "+n+" Ad Videos"},getEnEquipName:function(e){if("之戒"===e)return"Band";if("战甲"===e)return"Plate";if("之靴"===e)return"Greaves";if("项链"===e)return"Pendant"},getEnSetName:function(e){if("幻蓝"===e)return"Mirage";if("暗金"===e)return"Onyx";if("陨星"===e)return"Meteorite";if("圣辉"===e)return"Hallowed";if("玄铁"===e)return"Ebon"},getEnTitle:function(e){var t=e.extractIntegers()[0];return e.startsWith("攻击")?"ATK +"+t+"%":e.startsWith("攻速")?"AS +"+t+"%":e.startsWith("附加伤害")?"Extra Damage +"+t+"%":e.startsWith("暴击率")?"Crit Rate +"+t+"%":e.startsWith("暴击伤害")?"Crit Damage +"+t+"%":e.startsWith("子弹")?"Bullets +"+t:e.startsWith("恢复")&&e.endsWith("血量")?"Recovers +"+t+"% HP":e.startsWith("生命")?"HP +"+t+"%":e.startsWith("脉冲")?"Pulse Repeater":e.startsWith("异能")?"Psionic Rifle":e.startsWith("灵能")?"Psionic Blaster":e.startsWith("电磁")?"Electro-Laser":(console.log("aaaaaaaaaa==",e,t),"")},getEquipmentCount:V,getEquipmentEmptyIco:function(e){return"texture/ui/equipment-"+e+"-empty"},getEquipmentFrame:function(e){var t="";"S"===e?t="equipment-frame4":"A"===e?t="equipment-frame3":"B"===e?t="equipment-frame2":"C"===e&&(t="equipment-frame1");return"texture/ui/"+t},getEquipmentIsEquipped:function(e){return I.userInfo.equipped.p1===e||(I.userInfo.equipped.p2===e||(I.userInfo.equipped.p3===e||I.userInfo.equipped.p4===e))},getEquipmentSetEquippedCount:w,getEquipmentTypeIco:function(e){return"texture/ui/equipment-"+e},getGamingHeroInfo:function(e){void 0===e&&(e=!1);for(var t,n=I.userInfo.level,r={Hp:f.Hp+f.HpIncrease*n,Damage:f.Damage+f.DamageIncrease*n,AtkSpeed:f.AtkSpeed,HpBonus:f.HpBonus,DamageBonus:f.DamageBonus,AtkSpeedBonus:f.AtkSpeedBonus,CrtChance:f.CrtChance,CrtDamageBonus:f.CrtDamageBonus,AddDamageBonus:f.AddDamageBonus},u="",i=Object.keys(I.userInfo.equipped),o=function(){var n=p[s],i=I.userInfo.equipped[n];if(i){var o=I.userInfo.equipments.find((function(e){return e.uid===i})),f=a.where("id",o.id),l=A(f.type),d=k(l,o.grade,o.star,o.level);if(r[l]+=d,e){for(var c=0;c<o.star;c++){var m=f["starSkill"+(c+1)];u+=m+","}t||(t=f.setSkill)}}},s=0,p=i;s<p.length;s++)o();if(e){w(null)===l.length&&(u+=t);for(var m=0;m<d.length;m++)for(var g=d[m],v=c[m],h=new RegExp(g+"\\+(\\d+)%","g"),q=void 0;null!==(q=h.exec(u));){var y=parseInt(q[1],10);r[v]+=y}}return r},getGamingReward:function(e){e<1&&(e/=2);var t=Math.floor(10*e);t=Math.max(1,t);for(var n=e<1,r=[],u=0;u<t;u++)r.push(K(U(),O(n)));var i=.7*Y();return i*=1-Math.ceil(I.userInfo.level/5)/10,{gold:Math.floor(5e3*e),exp:Math.floor(i*e),equipments:r}},getHeroPropertyTypeByEquipmentType:A,getHeroPropertyValueByEquipment:k,getOfflineReward:function(e){var t=.6*Y();t*=1-Math.ceil(I.userInfo.level/5)/10;var n=e/60/60,r=u(n/12);return{gold:Math.floor(15e3*r),exp:Math.floor(t*r),chestCount:Math.min(12,Math.floor(n))}},getPropFrame:function(){return"texture/ui/frame-composites"},getRandomEquipmentId:U,getRandomGrade:O,getRandomGradeWeights:L,getRatioByCompsitesToGold:B,getRatioByEquipmentToCompsites:D,getShopCompositesSaleMoney:function(e){return B(e)},getShopEquipmentSaleMoney:_,getUpExp:Y,getUpgradeNeedComposite:M,getUpgradeNeedGold:S,isBackpackFull:function(e){void 0===e&&(e=!0);var t=V()>=y;t&&e&&E.show("Inventory Full. Please make some space!");return t},loadSpriteFrame:function(e,t){return G.apply(this,arguments)},lookAdVideo:function(e){if(J){if(Date.now()-J<3e3)return!1;J=null}J=Date.now();var t=m.background.audio,n=t.playing;return n&&t.pause(),x.createRewardedVideoAd((function(){J=null,n&&t.play(),function(t){t||W("lookAdVideo");e&&e(t)}(null)})),!0},numberToString:function(e){if(e>=1e10)return(e/1e9).toFixed(1)+"B";if(e>=1e7)return(e/1e6).toFixed(1)+"M";if(e>=1e4)return(e/1e3).toFixed(1)+"K";return e.toString()},openChest:function(e,t){void 0===t&&(t=!0);for(var n=[],r=0;r<e;r++)n.push(K(U(),O()));return j(n),N(n),t&&W("buyChestInShop",n.length),n},setAchievementCount:T,setAchievementCountInDay:b,setCompositeCount:P,sortEquipments:N,upgradeEquipment:function(e){var t=I.userInfo.equipments.find((function(t){return t.uid===e}));if(t){s.where("grade",t.grade).maxLevel===t.level?(t.star++,t.level=1):t.level++,I.userInfo.equipments=I.userInfo.equipments}}}),r._RF.push({},"ce715F65KRJo6i0VFspZ39n","GameUtils",void 0);var Z=e("starEqualLevel",5);r._RF.pop()}}}));

System.register("chunks:///_virtual/GIFAutoPlay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GIFController.ts"],(function(e){var t,r,n,a,i,o,l,u,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.assetManager,u=e.SpriteFrame,c=e.Component},function(e){s=e.GIFController}],execute:function(){var p,f,m,y,d;i._RF.push({},"5d89513HGZL+qupsD9KkK2a","GIFAutoPlay",void 0);var h=o.ccclass,b=o.property;e("GIFAutoPlay",h("GIFAutoPlay")((m=t((f=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"bundleName",m,a(t)),n(t,"folderPath",y,a(t)),n(t,"frame",d,a(t)),t}return r(t,e),t.prototype.start=function(){var e=this.getComponent(s);e&&(e.frame=this.frame,l.getBundle(this.bundleName).loadDir(this.folderPath,u,(function(t,r){var n=[].concat(r);n.sort((function(e,t){return e.name<t.name?-1:1})),e.init([{animation:"a",images:n}]),e.play("a")})))},t}(c)).prototype,"bundleName",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"game"}}),y=t(f.prototype,"folderPath",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"xx/xx/"}}),d=t(f.prototype,"frame",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),p=f))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/GIFController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadMgr.ts","./Controller.ts"],(function(t){var i,e,r,n,s,a,o,h,c,_;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass,r=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){s=t.cclegacy,a=t._decorator,o=t.Sprite,h=t.SpriteFrame},function(t){c=t.LoadMgr},function(t){_=t.Controller}],execute:function(){var u;s._RF.push({},"89c7dOQfQJEXIRHDOhG4sI5","GIFController",void 0);var l=a.ccclass;a.property,t("GIFController",l("GIFController")(u=function(t){function s(){for(var i,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(i=t.call.apply(t,[this].concat(r))||this)._sprite=void 0,i._animaiton="",i._loop=!0,i._call=void 0,i._index=0,i._datas=void 0,i._spriteFrames=void 0,i._frame=1/30,i._tick=0,i._timeScale=1,i._pause=!1,i}i(s,t);var a=s.prototype;return a.onLoad=function(){var t;this._sprite=null!=(t=this.getComponent(o))?t:this.addComponent(o),this._sprite.sizeMode=o.SizeMode.RAW,this._sprite.trim=!1},a.init=function(t){this._datas=t},a.play=function(t,i,e,r){if(void 0===i&&(i=!0),void 0===e&&(e=null),void 0===r&&(r=!0),this._datas){this._animaiton=t,this._loop=i,this._call=e,r&&(this._tick=0,this._index=0);var n=this._datas.find((function(i){return i.animation===t}));this._spriteFrames=n.images,this._sprite.spriteFrame=this._spriteFrames[this._index%this._spriteFrames.length],this._pause=!1}},a.update=function(t){if(!this._pause&&this._spriteFrames&&0!==this._spriteFrames.length&&(this._tick+=t*this.timeScale,!(this._tick<this._frame))){var i=Math.floor(this._tick/this._frame);this._tick-=i*this._frame,this._index===this._spriteFrames.length-1?this._index=0:this._index=Math.min(this._index+i,this._spriteFrames.length-1),this._sprite.spriteFrame=this._spriteFrames[this._index],this._index===this._spriteFrames.length-1&&(this._loop||(this._pause=!0),this._call&&this._call())}},s.getGIFData=function(){var t=r(n().mark((function t(i,e,r){var s,a,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.loadDir(i,e,h);case 2:return s=t.sent,(a=[].concat(s)).sort((function(t,i){return t.name<i.name?-1:1})),o={animation:r,images:a},t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(i,e,r){return t.apply(this,arguments)}}(),e(s,[{key:"animation",get:function(){return this._animaiton}},{key:"loop",get:function(){return this._loop}},{key:"call",get:function(){return this._call}},{key:"pause",set:function(t){this._pause=t}},{key:"frame",get:function(){return 1/this._frame},set:function(t){this._frame=1/t}},{key:"timeScale",get:function(){return this._timeScale},set:function(t){this._timeScale=t}},{key:"duration",get:function(){return this._spriteFrames?this._spriteFrames.length/30:0}}]),s}(_))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/GuideDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./UIMgr.ts","./Controller.ts","./TweenUtils.ts","./Bundle.ts"],(function(t){var i,e,n,o,l,a,r,s,u,c,d,h,b,g,p,f,_,y,v,w;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,r=t.v2,s=t.Node,u=t.Label,c=t.Prefab,d=t.instantiate,h=t.tween,b=t.view,g=t.AudioClip,p=t.Layout},function(t){f=t.AudioMgr},function(t){_=t.UIMgr},function(t){y=t.Controller},function(t){v=t.TweenUtils},function(t){w=t.Bundle}],execute:function(){var L,m,C,P,x,z,D,T,E,N,B,O,U,F,M,k,A;l._RF.push({},"5167fxRey5BCoEslBrwRNE5","GuideDialog",void 0);var G=a.ccclass,I=a.property,R=r();t("GuideDialog",(L=G("GuideDialog"),m=I(s),C=I(s),P=I(s),x=I(u),z=I(u),D=I(u),T=I(u),L((B=i((N=function(t){function i(){for(var i,e=arguments.length,l=new Array(e),a=0;a<e;a++)l[a]=arguments[a];return i=t.call.apply(t,[this].concat(l))||this,n(i,"content",B,o(i)),n(i,"detail",O,o(i)),n(i,"handNode",U,o(i)),n(i,"titleLabel",F,o(i)),n(i,"descLabel",M,o(i)),n(i,"descLabel2",k,o(i)),n(i,"nextBtnLabel",A,o(i)),i._target=void 0,i._call=void 0,i._nextCall=void 0,i._isFirst=!0,i}e(i,t),i._getPrefab=function(){return w.game.get("prefab/ui/guideDialog",c)},i.init=function(){var t=this._getPrefab(),e=d(t);return e.parent=_.instance.dialogParent,v.modifyOpacity(e,0,255,null,.3),e.getComponent(i)};var l=i.prototype;return l.start=function(){var t=this.handNode.getPosition(),i=this.handNode.getPosition();t.y+=20,i.y-=5,h(this.handNode).to(1,{position:t}).to(1,{position:i}).union().repeat(999).start()},l.show=function(t,i,e,n,o,l){var a=this;void 0===l&&(l="Next"),this._target=t,this._isFirst?(this._call=n,this._nextCall=o,this.content.worldPosition=t.worldPosition):h(this.content).to(.5,{worldPosition:t.worldPosition},{easing:"backOut"}).call((function(){a._call=n,a._nextCall=o})).start(),this.titleLabel.string=i,this.titleLabel.node.uiTransfrom.anchorX=t.worldPosition.x/b.getVisibleSize().width,this.descLabel.string=i,this.descLabel2.string=e,this.nextBtnLabel.string=l,this._isFirst=!1,this.content.active=!0,this.detail.active=!1},l.onEnable=function(){this.node.on(s.EventType.TOUCH_END,this._touchEnd,this)},l.onDisable=function(){this.node.off(s.EventType.TOUCH_END,this._touchEnd,this)},l.onClickContinue=function(){this._nextCall&&this._nextCall(),this._nextCall=null},l._touchEnd=function(t){var i=this,e=t.getLocation(R),n=t.windowId;this._target.uiTransfrom.hitTest(e,n)&&(this._call&&(f.inst.playOneShot(w.audio.get("click",g)),this._call(),this.scheduleOnce((function(){i.content.active=!1,i.detail.active=!0,i.detail.getComponent(p).updateLayout(),i.detail.setPosition(0,-b.getVisibleSize().height/2,0);var t=i.detail.getPosition();i.detail.position=i.detail.tempPosition.add3f(0,-i.detail.uiTransfrom.height,0),h(i.detail).to(.3,{position:t}).start()}),.2)),this._call=null)},i}(y)).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(N.prototype,"detail",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(N.prototype,"handNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(N.prototype,"titleLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(N.prototype,"descLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(N.prototype,"descLabel2",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=i(N.prototype,"nextBtnLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=N))||E));l._RF.pop()}}}));

System.register("chunks:///_virtual/HeroController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts","./Model.ts","./HeroUnit.ts","./WeaponUnit.ts"],(function(t){var e,o,n,i,r,a,l,s,u,p,c,h,f,d,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,l=t._decorator,s=t.Label,u=t.Node,p=t.Layout,c=t.tween},function(t){h=t.Controller},function(t){f=t.WeaponType},function(t){d=t.HeroUnit},function(t){g=t.WeaponUnit}],execute:function(){var b,v,_,w,M,y,C,m,H;a._RF.push({},"722ccF1GCJP34Q8JuUH/hHU","HeroController",void 0);var L=l.ccclass,S=l.property;t("HeroController",(b=L("HeroController"),v=S(d),_=S(s),w=S(u),b((C=e((y=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"hero",C,i(e)),n(e,"bulletCountLabel",m,i(e)),n(e,"weapons",H,i(e)),e._fight=void 0,e._bulletCount=0,e._weaponMap=new Map,e._targetMonster=null,e}o(e,t);var a=e.prototype;return a.init=function(t){this._fight=t,this.hero.init(t),this.hero.node.uiTransfrom.priority=0;for(var e,o=this.weapons.getComponentsInChildren(g),n=r(o);!(e=n()).done;){var i=e.value;this._weaponMap.set(i.type,i),i.node.active=!1}var a=this._weaponMap.get(f.Weapon_1);a.node.active=!0,a.init(t)},a.getWeapons=function(){for(var t,e=[],o=r(this._weaponMap.values());!(t=o()).done;){var n=t.value;n.node.active&&e.push(n.type)}return e},a.getWeapon=function(t){return this._weaponMap.get(t)||null},a.activeWeapon=function(t,e,o){var n=this,i=this._weaponMap.get(t);i&&!i.node.active&&(i.node.active=!0,i.node.setSiblingIndex(-1),e?(i.node.opacity=0,this.weapons.getComponent(p).updateLayout(),c(e).to(1,{worldPosition:i.node.worldPosition,worldScale:i.node.worldScale},{easing:"backOut"}).call((function(){i.node.opacity=255,i.init(n._fight),o&&o()})).start()):i.init(this._fight))},a.addBulletCount=function(t){void 0===t&&(t=1),this._bulletCount+=t},a.subtractBulletCount=function(){return this._bulletCount>0&&(this._bulletCount--,!0)},a.getTargetMonster=function(){if(this._targetMonster&&this._targetMonster.willDie()&&(this._targetMonster=null),!this._targetMonster)for(var t,e=this._fight.monsterController.getMonsters(),o=r(e);!(t=o()).done;){var n=t.value;if(!n.willDie()&&n.didShow()){this._targetMonster=n;break}}return this._targetMonster},a.getNearbyMonsters=function(t,e,o){var n=t.node.position,i=[],r=this._fight.monsterController.getMonsters();if(r.length>0)for(var a=r.indexOf(t),l=Math.max(0,a),s=0,u=e/2,p=o/2;;){a===l&&l++;var c=r[l];if(!c)break;if(!c.willDie()&&c.didShow()){var h=c.node.position;Math.abs(h.x-n.x)<u&&Math.abs(h.y-n.y)<p&&i.push(c)}if(l++,++s>10)break}return i},a.update=function(t){this.bulletCountLabel.string=this._bulletCount.toString()},e}(h)).prototype,"hero",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=e(y.prototype,"bulletCountLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(y.prototype,"weapons",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=y))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/HeroData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MsgMgr.ts","./GIFController.ts","./Bundle.ts","./Core.ts","./IGame.ts","./Model.ts"],(function(t){var e,n,r,o,i,a,u,d,c,s,p,f;return{setters:[function(t){e=t.createClass,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){i=t.MsgMgr},function(t){a=t.GIFController},function(t){u=t.Bundle},function(t){d=t.Core},function(t){c=t.PlayerMaxAtkSpeedBonus,s=t.PlayerMaxCrtChance},function(t){p=t.WeaponNames,f=t.WeaponType}],execute:function(){o._RF.push({},"f88b4Q/GpRFK52Em9mlgSDj","HeroData",void 0);var l=t("HeroAction",function(t){return t.addHpRatio="addHpRatio",t.addProperty="addProperty",t.addWeapon="addWeapon",t.addBullet="addBullet",t.revive="revive",t}({})),g=t("HeroData",function(){function t(){}return t.loadRes=function(){var t=n(r().mark((function t(e){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.boomGIFDatas){t.next=5;break}return t.next=3,a.getGIFData(u.game,"texture/fight/bullets/boom/","animation");case 3:n=t.sent,this.boomGIFDatas=[n];case 5:e&&e();case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t.getRewardBonus=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=null);var r=[],o=[].concat(this.rewardBonusDatas),i=d.game.info.heroInfo.AtkSpeedBonus<c,a=d.game.info.heroInfo.CrtChance<s,u=e<1,p=!1;o.randomSort();for(var f=(o=o.filter((function(t){var e=t.getTitle();if(e.startsWith("攻速+")){if(!i)return!1}else if(e.startsWith("暴击率+")){if(!a)return!1}else if(e.startsWith("恢复")&&e.endsWith("血量")){if(!u)return!1}else if(void 0!==t.weaponType)return!n||!p&&(n.size<3&&!n.has(t.weaponType)&&(p=!0,!0));return!0}))).map((function(t){return t.priority})),l=0;l<t;l++){var g=Math.randomByWeights(f),h=o[g],m=h.getTitle();r.push({title:m,data:h}),o.splice(g,1),f.splice(g,1)}return r},t.randomIndex=function(t,e){void 0===e&&(e=2.5);var n=Math.createWeights(t,e);return Math.randomByWeights(n)},e(t,null,[{key:"rewardBonusDatas",get:function(){var t=this;return this._rewardBonusDatas||(this._rewardBonusDatas=[{priority:1,ico:"texture/ui/ico-up-hp",getTitle:function(){var e=[100,50,30];return"恢复"+e[t.randomIndex(e.length)]+"%血量"},fn:function(t){i.emit(l.addHpRatio,t.extractIntegers()[0]/100)}},{priority:.5,ico:"texture/ui/ico-up-damage",getTitle:function(){var e=[20,15,10,5];return"攻击+"+e[t.randomIndex(e.length)]+"%"},fn:function(t){i.emit(l.addProperty,t)}},{priority:.5,ico:"texture/ui/ico-up-damage",getTitle:function(){var e=[20,15,10,5];return"附加伤害+"+e[t.randomIndex(e.length)]+"%"},fn:function(t){i.emit(l.addProperty,t)}},{priority:.5,ico:"texture/ui/ico-up-damage",getTitle:function(){var e=[50,30,15];return"暴击伤害+"+e[t.randomIndex(e.length)]+"%"},fn:function(t){i.emit(l.addProperty,t)}},{priority:1,ico:"texture/ui/ico-up-damage",getTitle:function(){var e=[30,20,10];return"暴击率+"+e[t.randomIndex(e.length)]+"%"},fn:function(t){i.emit(l.addProperty,t)}},{priority:1,ico:"texture/ui/ico-up-atk-speed",getTitle:function(){var e=[50,40,30];return"攻速+"+e[t.randomIndex(e.length)]+"%"},fn:function(t){i.emit(l.addProperty,t)}},{priority:.2,ico:"texture/fight/weapons/w-2",getTitle:function(){return p[f.Weapon_2]},fn:function(t,e){i.emit(l.addWeapon,f.Weapon_2,e)},weaponType:f.Weapon_2},{priority:.2,ico:"texture/fight/weapons/w-3",getTitle:function(){return p[f.Weapon_3]},fn:function(t,e){i.emit(l.addWeapon,f.Weapon_3,e)},weaponType:f.Weapon_3},{priority:.2,ico:"texture/fight/weapons/w-4",getTitle:function(){return p[f.Weapon_4]},fn:function(t,e){i.emit(l.addWeapon,f.Weapon_4,e)},weaponType:f.Weapon_4},{priority:3,ico:"texture/fight/bullets/ico-add-bullet",getTitle:function(){var e=[200,150,100,50];return"子弹+"+e[t.randomIndex(e.length,1.5)]},fn:function(t,e){i.emit(l.addBullet,t.extractIntegers()[0],e)}}]),this._rewardBonusDatas}}]),t}());g.boomGIFDatas=void 0,g._rewardBonusDatas=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroProperty.ts",["cc","./ObjectConfig.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.ObjectConfig}],execute:function(){t._RF.push({},"79830b1ECdEfJig4npu+AZl","HeroProperty",void 0);e("HeroProperty",n.getObject("%5B%7B%22exp%22%3A100%2C%22Hp%22%3A600%2C%22HpIncrease%22%3A60%2C%22Damage%22%3A200%2C%22DamageIncrease%22%3A20%2C%22AtkSpeed%22%3A2%2C%22HpBonus%22%3A0%2C%22DamageBonus%22%3A0%2C%22AtkSpeedBonus%22%3A0%2C%22CrtChance%22%3A10%2C%22CrtDamageBonus%22%3A50%2C%22AddDamageBonus%22%3A0%7D%5D"));t._RF.pop()}}}));

System.register("chunks:///_virtual/HeroUnit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HurtEffectController.ts","./Core.ts","./IConfig.ts","./AudioMgr.ts","./MsgMgr.ts","./UIMgr.ts","./Bundle.ts","./IGame.ts","./HeroData.ts","./FightUnit.ts"],(function(t){var e,o,n,i,a,r,l,s,u,d,h,c,f,p,g,m,_,y,v,b,H,D,w,I,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Sprite,s=t.Node,u=t.AudioClip,d=t.instantiate,h=t.tween,c=t.v3},function(t){f=t.HurtEffectController},function(t){p=t.Core},function(t){g=t.HeroPropertyDescEnums,m=t.HeroPropertyEnums},function(t){_=t.AudioMgr},function(t){y=t.MsgMgr},function(t){v=t.UIMgr},function(t){b=t.Bundle},function(t){H=t.GameState,D=t.PlayerMaxAtkSpeedBonus,w=t.PlayerMaxCrtChance},function(t){I=t.HeroAction},function(t){B=t.FightUnit}],execute:function(){var S,P,C,M,A,R,E,N,z,T,k,U,W;a._RF.push({},"6cd20qFjP9Nu40rXQtiEUNn","HeroUnit",void 0);var x=r.ccclass,F=r.property;t("HeroUnit",(S=x("HeroUnit"),P=F(l),C=F(s),M=F(f),A=F(s),R=F(l),S((z=e((N=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"image",z,i(e)),n(e,"rotateNode",T,i(e)),n(e,"hurtEffect",k,i(e)),n(e,"hpNode",U,i(e)),n(e,"hpBar",W,i(e)),e._beAttackTween=void 0,e._damageImmunityDuration=0,e}o(e,t);var a=e.prototype;return a.init=function(e){t.prototype.init.call(this,e),this._damageImmunityDuration=0,this._reloadHpSprite(this.hpRatio),this.hpNode.active=!1},a.isDamageImmunity=function(){return this._damageImmunityDuration>0},a.onEnable=function(){t.prototype.onEnable.call(this),y.on(I.addHpRatio,this._addHpRatio,this),y.on(I.addProperty,this._addProperty,this),y.on(I.addWeapon,this._addWeapon,this),y.on(I.addBullet,this._addBullet,this),y.on(I.revive,this._revive,this)},a.onDisable=function(){t.prototype.onDisable.call(this),y.off(I.addHpRatio,this._addHpRatio,this),y.off(I.addProperty,this._addProperty,this),y.off(I.addWeapon,this._addWeapon,this),y.off(I.addBullet,this._addBullet,this),y.off(I.revive,this._revive,this)},a.update=function(t){this.rotateNode.angle-=180*t,p.game.state===H.Gaming&&this._damageImmunityDuration>0&&(this._damageImmunityDuration=Math.max(0,this._damageImmunityDuration-t))},a._onTouchStart=function(){t.prototype._onTouchStart.call(this),console.log(p.game.info),console.log(p.game.info.heroInfo),console.log(p.game.info.monsterInfo)},a._revive=function(){_.inst.playOneShot(b.audio.get("up",u)),this._damageImmunityDuration=2,this._addHpRatio(10)},a._addHpRatio=function(t){this.addHpRatio(t),this._reloadHpSprite(this.hpRatio)},a._addProperty=function(t){for(var e=0;e<g.length;e++)for(var o=g[e],n=m[e],i=new RegExp(o+"\\+(\\d+)%","g"),a=void 0;null!==(a=i.exec(t));){var r=parseInt(a[1],10),l=p.game.info.heroInfo[n];l+=r,"AtkSpeedBonus"===n?l=Math.min(l,D):"CrtChance"===n&&(l=Math.min(l,w)),p.game.info.heroInfo[n]=l,this.updateValues();break}},a._addWeapon=function(t,e){var o=e.node.uiTransfrom.contentSize.height,n=e.spriteFrame.originalSize,i=o/n.height,a=d(e.node);a.parent=v.instance.dialogParent,a.uiTransfrom.setContentSize(n.width,n.height),a.worldPosition=e.node.worldPosition,a.worldScale=e.node.worldScale,a.scale=a.tempScale.multiplyScalar(i),this._fight.heroController.activeWeapon(t,a,(function(){a.destroy()}))},a._addBullet=function(t,e){var o=d(e.node);o.parent=v.instance.dialogParent,o.worldPosition=e.node.worldPosition,o.worldScale=e.node.worldScale;var n=this._fight.heroController,i=this._fight.root.bottom.ventToNode.worldPosition;h(o).to(.3,{worldPosition:c(i),scale:c(.1,.1,1)}).call((function(){n.addBulletCount(t),o.destroy()})).start()},a._reloadHpSprite=function(t){this.hpNode.active||(this.hpNode.active=!0),this.hpBar.fillRange=t},a._getHp=function(){var t=p.game.info.heroInfo;return t.Hp*(1+t.HpBonus/100)},a._getDamage=function(){var t=p.game.info.heroInfo;return t.Damage*(1+t.DamageBonus/100)},a._getCrtDamageBonus=function(){var t=p.game.info.heroInfo;return Math.randomInt(0,100)<t.CrtChance?t.CrtDamageBonus/100:0},a._getAddDamageBonus=function(){return p.game.info.heroInfo.AddDamageBonus/100},a._onBeAttack=function(t,e){var o=this;this.hurtEffect.trigger(),this._reloadHpSprite(this.hpRatio),this._beAttackTween||(this._beAttackTween=h(this.image.node).to(.1,{angle:5}).to(.1,{angle:0}).call((function(){o._beAttackTween=null})).start())},a._onWillDead=function(){},a._onDead=function(){p.game.state=H.Ended},e}(B)).prototype,"image",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(N.prototype,"rotateNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(N.prototype,"hurtEffect",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(N.prototype,"hpNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(N.prototype,"hpBar",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=N))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/Http.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"9c94fYwnTBAS7xRJVJQeaB7","Http",void 0);t("Http",function(){function t(){}return t.post=function(){var t=e(n().mark((function t(e,r,s){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._request("POST",e,r,s));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),t.get=function(){var t=e(n().mark((function t(e,r,s){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._request("GET",e,r,s));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),t._request=function(){var t=e(n().mark((function t(e,r,s,u){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var a=new XMLHttpRequest;if(a.open(e,r,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Access-Control-Allow-Origin","*"),u)for(var c=0,o=Object.keys(u);c<o.length;c++){var i=o[c];a.setRequestHeader(i,u[i])}a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)if(200===a.status)try{t(JSON.parse(a.responseText))}catch(e){t(a.responseText)}else n(a.status)},a.send(s?JSON.stringify(s):null)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r,s){return t.apply(this,arguments)}}(),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/HurtEffectController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r,c,l,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.color,c=t.UIRenderer,l=t.tween,i=t.Color,s=t.Component}],execute:function(){var a;n._RF.push({},"52ba7OnBglAppgQOs52NZeQ","HurtEffectController",void 0);var u=o.ccclass,f=(o.property,r()),p=r("#A8A8A8");t("HurtEffectController",u("HurtEffectController")(a=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this)._tween=void 0,e}e(n,t);var o=n.prototype;return o.trigger=function(){var t=this;this._tween&&this._tween.stop();var e=this.getComponent(c);this._tween=l({t:0}).to(.2,{t:1},{onUpdate:function(t,n){var o=Math.sin(n*Math.PI);i.lerp(f,i.BLACK,p,o),e.color=f}}).call((function(){t._tween=null})).start()},o.onEnable=function(){this.getComponent(c).color=i.BLACK},o.onDisable=function(){this._tween&&this._tween.stop()},n}(s))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/IConfig.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"2e85cYCKUlFiJQZ6QrzFBdN","IConfig",void 0);e("HeroPropertyEnums",["Hp","Damage","AtkSpeed","HpBonus","DamageBonus","AtkSpeedBonus","CrtChance","CrtDamageBonus","AddDamageBonus"]),e("HeroPropertyDescEnums",["生命值","攻击力","攻速值","生命","攻击","攻速","暴击率","暴击伤害","附加伤害"]),e("HeroPropertyEnDescEnums",["HP","攻击力","攻速值","生命","ATK","AS","Crit Rate","Crit Damage","Extra Damage"]),e("MonsterPropertyEnums",["Hp","Damage","AtkSpeed","MoveSpeed"]),e("EquipmentTypes",["p1","p2","p3","p4"]),e("EquipmentGrades",["S","A","B","C"]),e("AchievementTypes",["killMonster","passedLevel","upgradeEquipment","degradeEquipment","buyChestInShop","buyCompositesInShop","buyInDailyShop","buyInDailyReward","getOfflineReward","lookAdVideo"]);t._RF.pop()}}}));

System.register("chunks:///_virtual/IConfig2.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"573b6myu+pHRJnJCSsjbwal","IConfig",void 0);t("AppName","村庄保卫战"),t("AppShareText","养成割草,战力爆表!"),t("PlatformInfo",{videoId_wx:null,interstitialId_wx:null,videoId_dy:null,interstitialId_dy:null});n._RF.pop()}}}));

System.register("chunks:///_virtual/IdMgr.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"50690aj9Q5Du5J9Q3yotDw9","IdMgr",void 0),t("IdMgr",function(){function t(){}return t.getId=function(t){var n;void 0===t&&(t="");var e=null!=(n=this._map.get(t))?n:0;return e++,this._map.set(t,e),e},t.clear=function(){this._map.clear()},t}())._map=new Map,n._RF.pop()}}}));

System.register("chunks:///_virtual/IGame.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"dff13jBIMNHwI7fXIPQ8fRT","IGame",void 0);e("GameState",function(e){return e[e.Gaming=0]="Gaming",e[e.Pause=1]="Pause",e[e.Ended=2]="Ended",e}({})),e("GameAction",function(e){return e.onGuideNext="onGuideNext",e.onEquipmentUpgrade="onEquipmentUpgrade",e.onDayEnd="onDayEnd",e}({})),e("SceneName",function(e){return e.Lobby="Lobby",e.Game="Game",e}({})),e("MaxEnergy",100),e("EnergyCreateDelay",60),e("MaxBackpackCount",200),e("PassedLevelRewardExp",100),e("PlayerMaxLevel",30),e("PlayerMaxAtkSpeedBonus",200),e("PlayerMaxCrtChance",100);n._RF.pop()}}}));

System.register("chunks:///_virtual/IPlatformMgr.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e290c1JmINKxK1eDOtBbCjb","IPlatformMgr",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/LoadMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,r,t,u,a,s;return{setters:[function(e){n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){t=e.cclegacy,u=e.director,a=e.assetManager,s=e.SpriteFrame}],execute:function(){t._RF.push({},"1fe88fr5t1IG6rpmGhxbBGf","LoadMgr",void 0);var i=e("LoadMgr",function(){function e(){}return e.loadScene=function(){var e=n(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){u.preloadScene(n,(function(n,t){n?r(n):e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),e.loadBundle=function(){var e=n(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){a.loadBundle(n,(function(n,t){n?r(n):e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),e.loadDir=function(){var e=n(r().mark((function e(n,t,u){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t="/"),e.abrupt("return",new Promise((function(e,r){n.loadDir(t,u,(function(n,t){n?r(n):(t.forEach((function(e){return e.addRef()})),e(t))}))})));case 2:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}(),e.loadFile=function(){var e=n(r().mark((function e(n,t,u){var a,s,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="@"+n.name+"_@"+t,!this._loadedAssets.has(a)){e.next=3;break}return e.abrupt("return",Promise.resolve(this._loadedAssets.get(a)));case 3:if(!this._pendingRequests.has(a)){e.next=5;break}return e.abrupt("return",this._pendingRequests.get(a));case 5:return s=new Promise((function(e,r){n.load(t,u,(function(n,u){i._pendingRequests.delete(a),n?r(n):(u.name=t,u.addRef(),i._loadedAssets.set(a,u),e(u))}))})),this._pendingRequests.set(a,s),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(n,r,t){return e.apply(this,arguments)}}(),e.loadSpriteFrame=function(){var e=n(r().mark((function e(n,t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFile(n,t+"/spriteFrame",s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n,r){return e.apply(this,arguments)}}(),e}());i._loadedAssets=new Map,i._pendingRequests=new Map,t._RF.pop()}}}));

System.register("chunks:///_virtual/LoadScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RunScene.ts","./AudioMgr.ts","./LoadMgr.ts","./Controller.ts","./PlatformMgr.ts","./TimerSystem.ts","./Bundle.ts","./IConfig2.ts","./IGame.ts","./TimerInfo.ts"],(function(t){var e,r,n,o,s,i,a,c,u,l,d,f,p,g,h,_,y,m,v,P,S,x,L,w,B,I,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){a=t.cclegacy,c=t._decorator,u=t.Node,l=t.game,d=t.lerp,f=t.Prefab,p=t.AudioClip,g=t.Label,h=t.Button,_=t.Font},function(t){y=t.RunScene},function(t){m=t.AudioMgr},function(t){v=t.LoadMgr},function(t){P=t.Controller},function(t){S=t.PlatformMgr},function(t){x=t.TimerSystem},function(t){L=t.Bundle},function(t){w=t.PlatformInfo,B=t.AppShareText},function(t){I=t.SceneName},function(t){b=t.TimerInfo}],execute:function(){var T,M,A,C,k;a._RF.push({},"9f10e6c7D5MgYKkmgldHY/w","LoadScene",void 0);var F=c.ccclass,D=c.property;t("LoadScene",(T=F("LoadScene"),M=D(u),T((k=e((C=function(t){function e(){for(var e,r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s))||this,n(e,"progressBar",k,o(e)),e._targetProgress=0,e._progress=0,e}r(e,t);var a=e.prototype;return a.onLoad=function(){},a.start=function(){l.frameRate=50,x.registerSystem([b]),this._setProgressBar(0),this._toLoad()},a._toLoad=function(){var t=s(i().mark((function t(){var e=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this._load()}catch(t){this.scheduleOnce((function(){console.log("加载失败重试"),e._toLoad()}),2)}case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a._load=function(){var t=s(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._targetProgress=.1,t.next=3,v.loadBundle("font");case 3:return L.font=t.sent,this._targetProgress=.5,t.next=7,v.loadBundle("audio");case 7:return L.audio=t.sent,t.next=10,v.loadDir(L.audio,"/",p);case 10:return this._targetProgress=.6,t.next=13,v.loadBundle("game");case 13:return L.game=t.sent,this._targetProgress=.7,t.next=17,v.loadBundle("monster");case 17:return L.monster=t.sent,this._targetProgress=.8,t.next=21,v.loadDir(L.game,"prefab",f);case 21:return this._targetProgress=.9,t.next=24,v.loadScene("Lobby");case 24:return t.next=26,v.loadScene("Game");case 26:return this._targetProgress=.95,this._initPlatform(),t.next=30,this._privateFunc();case 30:this._targetProgress=1;case 31:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a._initPlatform=function(){S.instance.init({videoId_wx:w.videoId_wx,interstitialId_wx:w.interstitialId_wx,videoId_dy:w.videoId_dy,interstitialId_dy:w.interstitialId_dy},{title:B})},a._nextScene=function(){y.show(I.Lobby,!0)},a._setProgressBar=function(t){this.progressBar.uiTransfrom.width=d(50,660,t)},a._privateFunc=function(){var t=s(i().mark((function t(){var e,r,n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.loadFile(L.font,"SweiHalfMoonCJKSC",_);case 2:e=t.sent,r=L.audio.get("click",p),n=g.prototype.onLoad,g.prototype.onLoad=function(){for(var t=this,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];n.call.apply(n,[t].concat(o)),e&&(t.useSystemFont=!1,t.isBold=!1,t.font=e)},h.prototype.onLoad=function(){this.transition=h.Transition.SCALE,this.zoomScale=1.1},o=h.prototype._onTouchEnded,h.prototype._onTouchEnded=function(){for(var t=this,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];o.call.apply(o,[t].concat(n));var i=t.getValue("ClickAudio",r);m.inst.playOneShot(i,.1)};case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a.update=function(t){var e=this;this._progress>=0&&(this._progress<this._targetProgress?(this._progress=Math.min(this._targetProgress,this._progress+1*t),this._setProgressBar(this._progress)):this._progress>=1&&(this._setProgressBar(1),this._progress=-1,this.scheduleOnce((function(){e._nextScene()}),.5)))},e}(P)).prototype,"progressBar",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=C))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/LobbyScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./Controller.ts","./DialogController.ts","./Bundle.ts","./Core.ts","./FirstGiftDialog.ts","./GuideDialog.ts","./OpenChestDialog.ts","./TabbarController.ts","./GameUtils.ts"],(function(t){var e,n,o,i,r,a,s,l,u,c,b,f,h,p,g,d,y,m,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.PhysicsSystem2D,l=t.EPhysics2DDrawFlags,u=t.AudioClip},function(t){c=t.AudioMgr},function(t){b=t.Controller},function(t){f=t.DialogController},function(t){h=t.Bundle},function(t){p=t.Core},function(t){g=t.FirstGiftDialog},function(t){d=t.GuideDialog},function(t){y=t.OpenChestDialog},function(t){m=t.TabbarController},function(t){w=t.openChest}],execute:function(){var C,D,v,I,G;r._RF.push({},"6254ch8N/hB8ZJBS07tLgOX","LobbyScene",void 0);var S=a.ccclass,F=a.property;t("LobbyScene",(C=S("LobbyScene"),D=F(m),C((G=e((I=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"tabbar",G,i(e)),e}n(e,t);var r=e.prototype;return r.start=function(){c.background.volume=.5,s.instance.enable=!1,s.instance.debugDrawFlags=l.None,c.background.play(h.audio.get("lobby-bg",u)),this._showFirstGift()},r._showFirstGift=function(){var t=this;p.userInfo.firstGift&&g.show((function(e){var n=w(10);y.show(e,n).node.once(f.EventType.OnClose,(function(){t._showGuide()})),p.userInfo.firstGift=!1}))},r._showGuide=function(){var t=this,e=d.init();!function n(o){0===o?e.show(t.tabbar.getItem(0),"Here is the shop","Refreshes daily at 0:00 Daily Benefits | Daily Store\nChest Shop:Quickly obtain equipment\nMaterial Shop:Upgrade Material Conversion",(function(){t.tabbar.setItem(0)}),(function(){n(o+1)})):1===o?e.show(t.tabbar.getItem(1),"View Your Equipment","Dismantle equipment to get upgrade materials\nEquip and Upgrade to Boost Power",(function(){t.tabbar.setItem(1)}),(function(){n(o+1)})):2===o?e.show(t.tabbar.getItem(3),"Daily Task","Refreshes daily at 0:00\nComplete all tasks to earn extra rewards.",(function(){t.tabbar.setItem(3)}),(function(){n(o+1)})):3===o?e.show(t.tabbar.getItem(4),"Milestone Rewards","Claim Reward Upon Completion",(function(){t.tabbar.setItem(4)}),(function(){n(o+1)})):4===o?e.show(t.tabbar.getItem(2),"Are you ready?","Come here to start the game~",(function(){t.tabbar.setItem(2)}),(function(){n(o+1)}),"OK"):e.node.destroy()}(0)},e}(b)).prototype,"tabbar",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=I))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/LockMgr.ts",["cc","./UIMgr.ts"],(function(t){var n,o,e,i,c,r,u;return{setters:[function(t){n=t.cclegacy,o=t.Node,e=t.Layers,i=t.Widget,c=t.BlockInputEvents,r=t.NodeEventType},function(t){u=t.UIMgr}],execute:function(){n._RF.push({},"c0b80GeJtdCurYBfT5S3l8q","LockMgr",void 0);var s=t("LockMgr",function(){function t(){}return t.lock=function(){this._num++,this._reload()},t.unlock=function(){this._num--,this._reload()},t._reload=function(){this._getLockNode().active=this._num>0},t._getLockNode=function(){var n=this;if(!this._lockNode){var s=new o("LOCK_MGR");s.layer=e.Enum.UI_2D,s.parent=u.instance.topParent;var l=s.addComponent(i);l.top=l.bottom=l.left=l.right=0,l.isAlignTop=l.isAlignBottom=l.isAlignLeft=l.isAlignRight=!0,s.addComponent(c),s.on(r.NODE_DESTROYED,(function(){n._lockNode=null,t._num=0})),this._lockNode=s}return this._lockNode},t}());s._num=0,s._lockNode=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./ArrayConfig.ts","./EquipmentConfig.ts","./EquipmentGradeConfig.ts","./HeroProperty.ts","./MonsterProperty.ts","./ObjectConfig.ts","./IConfig.ts","./DebugBg.ts","./EquipmentItemController.ts","./GIFAutoPlay.ts","./HurtEffectController.ts","./MoneyController.ts","./MonitorValuesController.ts","./ParticleMoveController.ts","./RunScene.ts","./ShopChestShopItem.ts","./ShopCompositesHeader.ts","./ShopCompositesItem.ts","./ShopDailyRewardItem.ts","./ShopDailyShopItem.ts","./UserLevelController.ts","./AudioMgr.ts","./IdMgr.ts","./LoadMgr.ts","./MsgMgr.ts","./NodePoolMgr.ts","./UIMgr.ts","./Controller.ts","./DialogController.ts","./DragController.ts","./GIFController.ts","./GameController.ts","./QuadTreeController.ts","./ScreenAnimation.ts","./ScrollSpriteFrame.ts","./SyncTRS.ts","./TopController.ts","./UIScrollView.ts","./UISprite.ts","./VirtualList.ts","./WaitQueueController.ts","./Constant.ts","./Run.ts","./QuadTree.ts","./StateMachine.ts","./extension-array.ts","./extension-cc.ts","./extension-math.ts","./extension-number.ts","./extension-string.ts","./Http.ts","./Platform-dy.ts","./Platform-wx.ts","./IPlatformMgr.ts","./PlatformMgr.ts","./TimerSystem.ts","./SaveProp.ts","./ServerUtils.ts","./TweenUtils.ts","./Utils.ts","./BottomContainer.ts","./FightContainer.ts","./RootContainer.ts","./BottomBlockUnit.ts","./BottomBulletUnit.ts","./BottomFloatGift.ts","./BottomLayoutController.ts","./BottomOpenGiftDialog.ts","./FireBottomBulletUnit.ts","./BulletUnit.ts","./FightUnit.ts","./HeroController.ts","./HeroUnit.ts","./MonsterController.ts","./MonsterUnit.ts","./WeaponUnit.ts","./HeroData.ts","./MonsterData.ts","./Weight.ts","./Bundle.ts","./Core.ts","./IConfig2.ts","./IGame.ts","./TimerInfo.ts","./UserInfo.ts","./BackpackPage.ts","./BattlePage.ts","./RewardPage.ts","./ShopPage.ts","./TaskPage.ts","./AdGetRewardDialog.ts","./DegradeDialog.ts","./DegradeMoreDialog.ts","./DySidebarReward.ts","./EquipmentDetailDialog.ts","./FirstGiftDialog.ts","./GameFinishDialog.ts","./GameReviveDialog.ts","./GuideDialog.ts","./MessageDialog.ts","./MoneyAddAnim.ts","./NotifiDialog.ts","./OfflineRewardDialog.ts","./OpenChestDialog.ts","./RedeemCodeDialog.ts","./SettingDialog.ts","./ShowRewardDialog.ts","./TabbarController.ts","./Toast.ts","./WheelController.ts","./GameScene.ts","./LoadScene.ts","./LobbyScene.ts","./AdScript.ts","./GameUtils.ts","./LockMgr.ts","./Model.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MessageDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogController.ts","./Bundle.ts"],(function(e){var t,i,n,l,r,o,a,c,s,u,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,a=e.Label,c=e.Button,s=e.Prefab},function(e){u=e.DialogController},function(e){g=e.Bundle}],execute:function(){var f,p,h,_,d,b,m,v,y;r._RF.push({},"f61c1oY43hDAK11B+KHkgyz","MessageDialog",void 0);var D=o.ccclass,C=o.property;e("MessageDialog",(f=D("MessageDialog"),p=C(a),h=C(a),_=C(c),f((m=t((b=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"title",m,l(t)),n(t,"message",v,l(t)),n(t,"confirm",y,l(t)),t._call=null,t._cancel=null,t}i(t,e),t._getPrefab=function(){return g.game.get("prefab/ui/messageDialog",s)};var r=t.prototype;return r._open=function(e,t,i,n,l){void 0===i&&(i="确定"),void 0===n&&(n=null),void 0===l&&(l=null),this.title.string=e,this.title.updateRenderData(!0),this.message.string=t,this._setBtnTitle(this.confirm,i),this._call=n,this._cancel=l},r.onClickConfirm=function(){this._call&&this._call(),this._call=null,this.close()},r.onClickCancel=function(){this._cancel&&this._cancel(),this.close()},r._setBtnTitle=function(e,t){(e.node.active=!!t&&t.length>0,e.node.active)&&(e.getComponentInChildren(a).string=t)},t}(u)).prototype,"title",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(b.prototype,"message",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(b.prototype,"confirm",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Model.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"e9f13sE3i5JHoiaNee1CymC","Model",void 0);e("WeaponType",function(e){return e[e.Weapon_1=0]="Weapon_1",e[e.Weapon_2=1]="Weapon_2",e[e.Weapon_3=2]="Weapon_3",e[e.Weapon_4=3]="Weapon_4",e}({})),e("WeaponNames",["异能者步枪","灵能爆弹枪","脉冲急射枪","电磁激光枪"]);n._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyAddAnim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TopController.ts","./Bundle.ts"],(function(n){var t,o,e,i,r,c,s,u,a;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,e=n._decorator,i=n.Prefab,r=n.instantiate,c=n.tween,s=n.v3},function(n){u=n.TopController},function(n){a=n.Bundle}],execute:function(){var d;o._RF.push({},"93c092NI41HAKNnia0V9TAk","MoneyAddAnim",void 0);var l=e.ccclass;e.property,n("MoneyAddAnim",l("MoneyAddAnim")(d=function(n){function o(){return n.apply(this,arguments)||this}return t(o,n),o._getPrefab=function(){return a.game.get("prefab/ui/moneyAddAnim",i)},o.prototype._open=function(n,t){for(var o=this,e=function(){var t=n.ico.getWorldPosition(),e=r(n.ico),i=200*(Math.random()-.5),u=100*(Math.random()-.5);e.parent=o.node,e.setPosition(0,0,0),c(e).to(.2,{position:s(i,u,0)},{easing:"sineIn"}).delay(.2).to(.5,{worldPosition:t},{easing:"sineInOut"}).call((function(){e.destroy()})).start()},i=0;i<n.count;i++)e();this.scheduleOnce((function(){t&&t(),o.scheduleOnce((function(){o.node.destroy()}))}),.9)},o}(u))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./AdGetRewardDialog.ts","./GameUtils.ts","./MonitorValuesController.ts"],(function(o){var e,t,n,i,r,l,a,u,c,d,s,f;return{setters:[function(o){e=o.applyDecoratedDescriptor,t=o.inheritsLoose,n=o.initializerDefineProperty,i=o.assertThisInitialized},function(o){r=o.cclegacy,l=o._decorator,a=o.Label,u=o.Node},function(o){c=o.Core},function(o){d=o.AdGetRewardDialog},function(o){s=o.numberToString},function(o){f=o.MonitorValuesController}],execute:function(){var b,p,g,m,h,y,C,w,D,I,L;r._RF.push({},"389c5ZCx/FCFomXXzodfkh7","MoneyController",void 0);var M=l.ccclass,v=l.property;o("MoneyController",(b=M("MoneyController"),p=v(a),g=v(a),m=v(u),h=v(u),b((w=e((C=function(o){function e(){for(var e,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return e=o.call.apply(o,[this].concat(r))||this,n(e,"goldLabel",w,i(e)),n(e,"diamondLabel",D,i(e)),n(e,"goldIco",I,i(e)),n(e,"diamondIco",L,i(e)),e}t(e,o);var r=e.prototype;return r.start=function(){this.addMonitor({label:this.goldLabel,getValue:function(){return c.userInfo.gold},getValueFormat:function(o){return s(o)},animData:{ico:this.goldIco,count:20}}),this.addMonitor({label:this.diamondLabel,getValue:function(){return c.userInfo.diamond},getValueFormat:function(o){return s(o)},animData:{ico:this.diamondIco,count:20}})},r.clickGold=function(){d.show("Gold")},r.clickDiamond=function(){d.show("Diamond")},e}(f)).prototype,"goldLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(C.prototype,"diamondLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(C.prototype,"goldIco",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(C.prototype,"diamondIco",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=C))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/MonitorValuesController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts","./MoneyAddAnim.ts","./GameUtils.ts"],(function(e){var t,o,n,r,a,i,l,s,u;return{setters:[function(e){t=e.inheritsLoose,o=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,r=e._decorator,a=e.tween,i=e.v3},function(e){l=e.Controller},function(e){s=e.MoneyAddAnim},function(e){u=e.numberToString}],execute:function(){var c;n._RF.push({},"060114e2wxHpoVXGUolap46","MonitorValuesController",void 0);var d=r.ccclass;r.property,e("MonitorValuesController",d("MonitorValuesController")(c=function(e){function n(){for(var t,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this)._monitorItems=new Set,t._animNodes=new Set,t}t(n,e);var r=n.prototype;return r.addMonitor=function(e){this._reloadItem(e),this._monitorItems.add(e)},r.deleteMonitor=function(e){this._monitorItems.delete(e)},r.onEnable=function(){for(var e,t=o(this._monitorItems);!(e=t()).done;){var n=e.value;this._reloadItem(n)}},r.onDisable=function(){for(var e,t=o(this._animNodes);!(e=t()).done;){e.value.destroy()}this._animNodes.clear()},r.update=function(e){for(var t,n=this,r=function(){var e=t.value,o=e.getValue(),r=e.current;if(o!==r){var l=o-r,c=function(){e.value+=l,e.t&&e.t.stop();var t=e.label;t.string=(l>0?"+":"")+u(l),t.node.setScale(1.5,1.5,1),e.t=a(t.node).to(.5,{scale:i(1,1,1)},{easing:"backOut"}).call((function(){t.string=e.getValueFormat(e.value),e.t=null})).start()};if(l>0&&e.animData&&(!e.checkShow||e.checkShow&&e.checkShow(l))){var d=s.show(e.animData,(function(){c(),n._animNodes.delete(d)})).node;n._animNodes.add(d)}else c();e.current=o}},l=o(this._monitorItems);!(t=l()).done;)r()},r._reloadItem=function(e){var t=e.getValue();e.value=t,e.current=t,e.label.string=e.getValueFormat(e.value),e.label.node.setScale(1,1,1)},n}(l))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodePoolMgr.ts","./Controller.ts","./Bundle.ts","./AudioMgr.ts","./Core.ts","./IGame.ts","./NotifiDialog.ts","./MonsterUnit.ts"],(function(t){var e,o,n,i,s,r,a,u,h,l,m,c,_,f,d,v,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Node,u=t.AudioClip,h=t.Prefab},function(t){l=t.NodePoolMgr},function(t){m=t.Controller},function(t){c=t.Bundle},function(t){_=t.AudioMgr},function(t){f=t.Core},function(t){d=t.GameState},function(t){v=t.NotifiDialog},function(t){g=t.MonsterUnit}],execute:function(){var p,M,w,C,b;s._RF.push({},"aea7ezbnI9JjIYpih2k4P6X","MonsterController",void 0);var N=r.ccclass,W=r.property;t("MonsterController",(p=N("MonsterController"),M=W(a),p((b=e((C=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(e,"shadows",b,i(e)),e._fight=void 0,e._time=0,e._summonDatas=[],e._waveCount=void 0,e._currentWave=void 0,e._monsters=[],e._monsterMap=new Map,e._monsterNodes=new Set,e}o(e,t);var s=e.prototype;return s.init=function(t){this._fight=t,this._summonDatas.length=0;var e=f.game.info.level,o=Math.min(21,3*Math.ceil(e/2)),n=Math.min(.4,.2+.1*e);this._waveCount=o,this._currentWave=0;for(var i=f.game.info.monsterInfo.Count,s=.9,r=0;r<o;r++){var a=i*r+10,u=r===o-1;s=Math.max(s-n,.1);var h=[],l=0===r?2:1,m=u?"Final Wave Incoming!":"Wave "+(r+1)+" Incoming!";h.push({time:l,tip:m});for(var c=0;c<a;c++)l+=s,h.push({time:l});r%3==2&&(l+=2,h.push({time:l,isBoss:!0})),this._summonDatas.push(h)}this._reloadWaveNumLabel()},s.getMonsters=function(){return this._monsters},s.getMonster=function(t){return this._monsterMap.get(t)},s.update=function(t){if(f.game.state===d.Gaming){this._time+=t;var e=this._summonDatas[this._currentWave];if(e)if(e.length>0){var o=e[0];this._time>=o.time&&(void 0!==o.tip?(v.show(o.tip),_.inst.playOneShot(c.audio.get("monster-wave",u),.1),this._reloadWaveNumLabel()):this._createMonster(o),e.splice(0,1))}else 0===this._monsterNodes.size&&(f.game.info.progress=(this._currentWave+1)/this._waveCount,this._currentWave===this._waveCount-1?f.game.state=d.Ended:(this._currentWave++,this._time=0))}},s._reloadWaveNumLabel=function(){this._fight.root.waveNumLabel.string=this._currentWave+1+"/"+this._waveCount},s._createMonster=function(t){var e=this,o=t.isBoss?"boss":"monster",n=c.game.get("prefab/gaming/"+o,h),i=l.get(n);i.parent=this.node;var s=this.node.uiTransfrom.height;t.isBoss?i.setPosition(0,0):i.setPosition(0,Math.randomFloat(-s/2,s/2)),i.uiTransfrom.priority=-i.position.y;var r=this._createShadow(t.isBoss),a=i.getComponent(g);a.init(this._fight,this._currentWave,r,(function(){e._monsters.delete(a),e._monsterMap.delete(a.uid)}),(function(){e._monsterNodes.delete(i)})),this._monsters.push(a),this._monsterMap.set(a.uid,a),this._monsterNodes.add(i)},s._createShadow=function(t){var e=c.game.get("prefab/gaming/shadow",h),o=l.get(e);o.parent=this.shadows;var n=t?1.5:1;return o.setScale(n,n),o},e}(m)).prototype,"shadows",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=C))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GIFController.ts","./Bundle.ts","./Core.ts"],(function(t){var e,n,s,r,o,a,i;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){s=t.cclegacy,r=t.v3},function(t){o=t.GIFController},function(t){a=t.Bundle},function(t){i=t.Core}],execute:function(){s._RF.push({},"8382c+GNEFIN4CKCaTplPfA","MonsterData",void 0);var u=t("MonsterAnimations",["Attacking","Dying","Idle","Walking"]),c=t("MonsterData",function(){function t(){}return t.loadRes=function(){var t=e(n().mark((function t(e){var s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=this._getMonstersPath(),t.next=3,this._getMonsterGIFDatas(s.monster);case 3:return this.monsterGIFDatas=t.sent,t.next=6,this._getMonsterGIFDatas(s.boss);case 6:this.bossGIFDatas=t.sent,s.monster.endsWith("m1")||s.monster.endsWith("m2")||s.monster.endsWith("m3")?this.monsterOffset.set(-6,0,0):this.monsterOffset.set(0,0,0),this.bossOffset.set(0,0,0),e&&e();case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t._getMonstersPath=function(){var t=i.userInfo.passLevel-1;return{monster:"monster/m"+(t%6+1)+"/",boss:"boss/b"+(t%3+1)+"/"}},t._getMonsterGIFDatas=function(){var t=e(n().mark((function t(e){var s,r,i,c,f,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=[],r=0,i=u;case 2:if(!(r<i.length)){t.next=12;break}return c=i[r],f=""+e+c+"/",t.next=7,o.getGIFData(a.monster,f,c);case 7:h=t.sent,s.push(h);case 9:r++,t.next=2;break;case 12:return t.abrupt("return",s);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t}());c.monsterGIFDatas=void 0,c.monsterOffset=r(),c.bossGIFDatas=void 0,c.bossOffset=r(),s._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterProperty.ts",["cc","./ObjectConfig.ts"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy},function(e){r=e.ObjectConfig}],execute:function(){t._RF.push({},"da81fErHdVA3rLJkju7sNrB","MonsterProperty",void 0);e("MonsterProperty",r.getObject("%5B%7B%22Hp%22%3A800%2C%22HpIncrease%22%3A400%2C%22HpIncreaseBoss%22%3A40%2C%22Damage%22%3A100%2C%22DamageIncrease%22%3A50%2C%22DamageIncreaseBoss%22%3A2%2C%22AtkSpeed%22%3A2%2C%22MoveSpeed%22%3A30%2C%22Count%22%3A10%2C%22CountIncrease%22%3A1%7D%5D"));t._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterUnit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HurtEffectController.ts","./Core.ts","./AudioMgr.ts","./GIFController.ts","./Bundle.ts","./IGame.ts","./GameUtils.ts","./MonsterData.ts","./FightUnit.ts"],(function(t){var e,i,a,o,n,s,r,l,h,u,c,d,f,p,g,m,_,y,D,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,r=t.Node,l=t.Sprite,h=t.v3,u=t.clamp01,c=t.AudioClip},function(t){d=t.HurtEffectController},function(t){f=t.Core},function(t){p=t.AudioMgr},function(t){g=t.GIFController},function(t){m=t.Bundle},function(t){_=t.GameState},function(t){y=t.addAchievementCount},function(t){D=t.MonsterData},function(t){b=t.FightUnit}],execute:function(){var v,k,S,C,w,B,M,x,I,E,N,A,G,H;n._RF.push({},"9c7d31cfblO1aISygQxrxlG","MonsterUnit",void 0);var z=s.ccclass,F=s.property,U=-520;t("MonsterUnit",(v=z("MonsterUnit"),k=F(g),S=F(r),C=F(d),w=F({type:r,visible:function(){return this.isBoss}}),B=F({type:l,visible:function(){return this.isBoss}}),v((I=e((x=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,a(e,"image",I,o(e)),a(e,"bulletToNode",E,o(e)),a(e,"hurtEffect",N,o(e)),a(e,"isBoss",A,o(e)),a(e,"hpNode",G,o(e)),a(e,"hpBar",H,o(e)),e._deadCall=void 0,e._destroyCall=void 0,e._wave=void 0,e._shadow=void 0,e._atkEnabled=!1,e._atkDt=0,e._imageDefaultScale=h(),e}i(e,t);var n=e.prototype;return n.init=function(e,i,a,o,n){t.prototype.init.call(this,e),this._deadCall=o,this._destroyCall=n,this._wave=i,this._shadow=a,this._resetScale(),this.isBoss?this.image.node.position=D.bossOffset:this.image.node.position=D.monsterOffset,this.image.frame=24,this.image.init(this.isBoss?D.bossGIFDatas:D.monsterGIFDatas),this.image.play("Walking",!0),this._reloadHpSprite(this.hpRatio),this.hpNode&&(this.hpNode.active=!1),this._atkEnabled=!1,this._atkDt=0},n.didShow=function(){return this.node.position.x<-130},n.onLoad=function(){this._imageDefaultScale.set(this.image.node.scale)},n.update=function(t){var e=this;if(f.game.state===_.Gaming&&"Dying"!==this.image.animation){var i=f.game.info.monsterInfo.MoveSpeed,a=this.node.tempPosition,o=Math.getRatio(-130,0,a.x),n=i+1e3*(o=u(o));if(a.x-=n*t,a.x<U)a.x=U;else{var s=this._fight.monsterController.getMonster(this.uid-1);s&&!s.willDie()&&Math.abs(s.node.position.x-a.x)<1&&(a.x=s.node.position.x+1)}if(this.node.position=a,!this._atkEnabled&&a.x<-510&&(this._atkEnabled=!0),this._atkEnabled&&this._atkDt>=0)if(0===this._atkDt){var r=this._fight.heroController.hero;r.willDie()||r.isDamageImmunity()?this._atkDt=.5:(this._atkDt=-1,this._atk((function(){e._atkDt=f.game.info.monsterInfo.AtkSpeed})))}else this._atkDt=Math.max(0,this._atkDt-t)}},n.lateUpdate=function(t){this._shadow&&(this._shadow.position=this.node.tempPosition)},n._atk=function(t){var e=this,i=this._fight.heroController.hero;this.image.play("Attacking",!1,(function(){t&&t(),e.image.play("Walking",!0)})),p.inst.playOneShot(m.audio.get("monster-atk",c),.1);var a=this.causeDamage(i);setTimeout((function(){i.showDamage(a)}),1e3*this.image.duration)},n._reloadHpSprite=function(t){this.hpNode&&(this.hpNode.active||(this.hpNode.active=!0),this.hpBar.fillRange=t)},n._getHp=function(){var t=f.game.info.monsterInfo;return(this.isBoss?t.HpBoss:t.Hp)*(1+this._wave/9)},n._getDamage=function(){var t=f.game.info.monsterInfo;return(this.isBoss?t.DamageBoss:t.Damage)*(1+this._wave/9)},n._getCrtDamageBonus=function(){return 0},n._getAddDamageBonus=function(){return 0},n._onBeAttack=function(t,e){this.hurtEffect.trigger(),e||(this.image.node.setScale(this._imageDefaultScale),this.unschedule(this._resetScale),this.scheduleOnce(this._resetScale,.1),this.image.node.setScale(this.image.node.tempScale.multiplyScalar(1.05))),this._reloadHpSprite(this.hpRatio)},n._resetScale=function(){this.image.node.setScale(this._imageDefaultScale)},n._onWillDead=function(){},n._onDead=function(){var t=this;this._atkEnabled=!1,this._deadCall&&this._deadCall(),this._deadCall=null,this.image.play("Dying",!1,(function(){t._destroyCall&&t._destroyCall(),t._destroyCall=null,t._shadow.destroy(),t.node.destroy()})),y("killMonster")},e}(b)).prototype,"image",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(x.prototype,"bulletToNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(x.prototype,"hurtEffect",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(x.prototype,"isBoss",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=e(x.prototype,"hpNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(x.prototype,"hpBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=x))||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/MsgMgr.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"e3686s7ghhH5IVD7Q0EcHii","MsgMgr",void 0),t("MsgMgr",function(){function t(){}return t.on=function(t,n,r){var e=this._map.get(t);e||(e=[],this._map.set(t,e)),e.push({target:r,func:n})},t.off=function(t,n,r){var e=this._map.get(t);if(e){var c=e.find((function(t){return t.target===r&&t.func===n}));c&&e.delete(c)}},t.emit=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];var c=this._map.get(t);c&&c.forEach((function(t){var n;return(n=t.func).call.apply(n,[t.target].concat(r))}))},t}())._map=new Map,n._RF.pop()}}}));

System.register("chunks:///_virtual/NodePoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts"],(function(o){var t,e,r,n,l,i,u,a;return{setters:[function(o){t=o.createForOfIteratorHelperLoose},function(o){e=o.cclegacy,r=o.NodePool,n=o.Node,l=o.instantiate,i=o.Prefab,u=o.isValid},function(o){a=o.Controller}],execute:function(){e._RF.push({},"d951bi46bBP3phLSBsU1029","NodePoolMgr",void 0);var s=o("NodePoolMgr",function(){function o(){}return o.getPool=function(o){var t=this._pool.get(o);return t||(t=new r,this._pool.set(o,t)),t},o.gets=function(o,t){if(void 0===t&&(t=1),t<=0)return[];for(var e=this.getPool(o),r=[],n=0;n<t;n++)r.push(this.get(o,e));return r},o.get=function(o,t){var e=this;void 0===t&&(t=null),t||(t=this.getPool(o));var r=void 0;return t.size()>0?r=t.get():(o instanceof n||o instanceof i)&&(r=l(o)),r&&(r.active=!0,r.destroy=function(){var t=e.getPool(o);if(t&&t.size()>e.maxPoolCount){var l;e.emitUnuse(r);for(var i=arguments.length,u=new Array(i),a=0;a<i;a++)u[a]=arguments[a];return(l=n.prototype.destroy).call.apply(l,[r].concat(u))}return e.put(r),!1},r._destroyImmediate=function(){var t=e.getPool(o);if(t&&t.size()>e.maxPoolCount){var l;e.emitUnuse(r);for(var i=arguments.length,u=new Array(i),a=0;a<i;a++)u[a]=arguments[a];(l=n.prototype._destroyImmediate).call.apply(l,[r].concat(u))}else e.put(r)},r.setValue("__pool",t)),r},o.puts=function(o){if(0!==o.length)for(var t=o.length-1;t>=0;t--)this.put(o[t])},o.put=function(o){if(u(o,!0)){var t=o.getValue("__pool");t?(this.emitUnuse(o),t.put(o),o.destroy=n.prototype.destroy,o._destroyImmediate=n.prototype._destroyImmediate):o.destroy()}},o.emitUnuse=function(o){var t;o.setValue("__pool",null),null==(t=o.getComponent(a))||t.unuse()},o.clear=function(){for(var o,e=t(this._pool.values());!(o=e()).done;){o.value.clear()}this._pool.clear()},o}());s.maxPoolCount=50,s._pool=new Map,e._RF.pop()}}}));

System.register("chunks:///_virtual/NotifiDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogController.ts","./Bundle.ts"],(function(e){var t,i,o,r,n,a,l,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,l=e.Label,c=e.Prefab},function(e){s=e.DialogController},function(e){u=e.Bundle}],execute:function(){var f,p,g,h,y;n._RF.push({},"ecb14koCvpKt6FqOxj1jykc","NotifiDialog",void 0);var v=a.ccclass,b=a.property;e("NotifiDialog",(f=v("NotifiDialog"),p=b(l),f((y=t((h=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"label",y,r(t)),t}i(t,e),t._getPrefab=function(){return u.game.get("prefab/ui/notifiDialog",c)};var n=t.prototype;return n.open=function(){var t;this._fadeInAnim="fromTop";for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];(t=e.prototype.open).call.apply(t,[this].concat(o))},n._open=function(){for(var e=this,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];var r=i[0],n=i[1],a=void 0===n?2:n;this.label.string=r,this.scheduleOnce((function(){e.node.destroy()}),a)},t}(s)).prototype,"label",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=h))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectConfig.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"89d3aUr/VNOY4p/PcDzhULS","ObjectConfig",void 0);t("ObjectConfig",function(){function t(){}return t.getObject=function(t){return JSON.parse(decodeURIComponent(t))[0]},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/OfflineRewardDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogController.ts","./ServerUtils.ts","./Utils.ts","./Bundle.ts","./Core.ts","./TimerInfo.ts","./GameUtils.ts","./ShowRewardDialog.ts"],(function(e){var t,i,n,a,r,l,o,s,f,u,c,g,p,d,h,b,m,w,v,y,C,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Label,s=e.Node,f=e.Button,u=e.Prefab},function(e){c=e.DialogController},function(e){g=e.getServerTimestamp},function(e){p=e.Utils},function(e){d=e.Bundle},function(e){h=e.Core},function(e){b=e.TimerInfo},function(e){m=e.getOfflineReward,w=e.addExp,v=e.openChest,y=e.addAchievementCount,C=e.lookAdVideo},function(e){B=e.ShowRewardDialog}],execute:function(){var k,R,G,T,z,L,_,D,I,M,x,F,O,A,S,P,U,N,j,q,E,H,K,V,X;r._RF.push({},"819257y199FKo6CgOLd+BXk","OfflineRewardDialog",void 0);var J=l.ccclass,Q=l.property;e("OfflineRewardDialog",(k=J("OfflineRewardDialog"),R=Q(o),G=Q(o),T=Q(o),z=Q(s),L=Q(f),_=Q(o),D=Q(s),I=Q(s),M=Q(f),x=Q(o),F=Q(s),k((S=t((A=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"clockLabel",S,a(t)),n(t,"goldLabel",P,a(t)),n(t,"expLabel",U,a(t)),n(t,"rewardItem",N,a(t)),n(t,"fastGetBtn",j,a(t)),n(t,"fastGetClock",q,a(t)),n(t,"fastGetContent",E,a(t)),n(t,"fastGetBtnMask",H,a(t)),n(t,"getBtn",K,a(t)),n(t,"getBtnTitle",V,a(t)),n(t,"getBtnMask",X,a(t)),t}i(t,e),t._getPrefab=function(){return d.game.get("prefab/ui/offlineRewardDialog",u)};var r=t.prototype;return r.open=function(){var t;this._fadeInAnim="fromTop";for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];(t=e.prototype.open).call.apply(t,[this].concat(n))},r._open=function(){this._reload(),this.schedule(this._reload,1)},r._getReward=function(e){var t=m(e);h.userInfo.gold+=t.gold,w(t.exp),t.chestCount>0&&(t.equipments=v(t.chestCount)),y("getOfflineReward"),B.show(t),this.close()},r.onClickGet=function(){var e=h.userInfo.offlineRewardTime,t=g();h.userInfo.offlineRewardTime=t;var i=Math.floor((t-e)/1e3);i=Math.min(i,43200),this._getReward(i)},r.onClickFastGet=function(){var e=this;C((function(t){t||(b.offlineRewardFast+=43200,e._getReward(43200))}))},r._reload=function(){var e=h.userInfo.offlineRewardTime,t=g(),i=Math.floor((t-e)/1e3);i=Math.min(i,43200),this.clockLabel.string=p.formatTime(i,"hh:mm:ss");var n=m(i);this.goldLabel.string=n.gold+"",this.expLabel.string=n.exp+"",this.rewardItem.getChildByName("num").getComponent(o).string=""+n.chestCount,this.rewardItem.getChildByName("mask").active=n.chestCount<=0;var a=0===b.offlineRewardFast;this.fastGetBtn.enabled=a,this.fastGetClock.node.active=!a,this.fastGetContent.active=a,this.fastGetBtnMask.active=!a,this.fastGetClock.node.active&&(this.fastGetClock.string=p.formatTime(b.offlineRewardFast,"hh:mm:ss"));var r=i>=300;this.getBtn.enabled=r,this.getBtnTitle.string=r?"Claim":p.formatTime(300-i,"hh:mm:ss"),this.getBtnMask.active=!r},t}(c)).prototype,"clockLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(A.prototype,"goldLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(A.prototype,"expLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(A.prototype,"rewardItem",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(A.prototype,"fastGetBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(A.prototype,"fastGetClock",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(A.prototype,"fastGetContent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(A.prototype,"fastGetBtnMask",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(A.prototype,"getBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(A.prototype,"getBtnTitle",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(A.prototype,"getBtnMask",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=A))||O));r._RF.pop()}}}));

System.register("chunks:///_virtual/OpenChestDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EquipmentItemController.ts","./AudioMgr.ts","./DialogController.ts","./Bundle.ts"],(function(t){var e,i,n,o,r,a,l,s,u,c,p,h,g,d,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,s=t.Prefab,u=t.instantiate,c=t.tween,p=t.v3,h=t.AudioClip},function(t){g=t.EquipmentItemController},function(t){d=t.AudioMgr},function(t){f=t.DialogController},function(t){y=t.Bundle}],execute:function(){var C,m,b,w,v,D,M,k,O;r._RF.push({},"d7608UN7gdHl43x4EC9ds0b","OpenChestDialog",void 0);var P=a.ccclass,_=a.property;t("OpenChestDialog",(C=P("OpenChestDialog"),m=_(l),b=_(l),w=_(l),C((M=e((D=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"realContent",M,o(e)),n(e,"whiteMask",k,o(e)),n(e,"items",O,o(e)),e}return i(e,t),e._getPrefab=function(){return y.game.get("prefab/ui/openChestDialog",s)},e.prototype._open=function(t,e){for(var i=this,n=0;n<e.length;n++){var o=e[n],r=this.items.children[0];n>0&&((r=u(r)).parent=this.items),r.getComponent(g).init(o)}this.items.uiTransfrom.width=1===e.length?130:700,this.realContent.opacity=0,this.whiteMask.opacity=0;var a=u(t);this.node.insertChild(a,this.realContent.getSiblingIndex()),a.worldPosition=t.worldPosition,c(a).to(.3,{position:p(0,0,0),scale:p(1.6,1.6,1)}).call((function(){c(a).to(.1,{angle:30}).to(.1,{angle:-30}).to(.05,{angle:0}).start(),c(i.whiteMask).delay(.5).to(.2,{opacity:255}).call((function(){a.destroy(),i.realContent.opacity=255,c(i.whiteMask).to(.2,{opacity:0}).start(),d.inst.playOneShot(y.audio.get("reward",h))})).start()})).start(),d.inst.playOneShot(y.audio.get("open-chest",h))},e}(f)).prototype,"realContent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(D.prototype,"whiteMask",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(D.prototype,"items",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=D))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/ParticleMoveController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,i,r,s,a,c,l,p,u,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,a=e._decorator,c=e.ParticleSystem2D,l=e.rect,p=e.v3,u=e.tween,d=e.Vec3,h=e.Component}],execute:function(){var v,f,y;s._RF.push({},"fec91BRUG5Lp5FtMpB+vgMm","ParticleMoveController",void 0);var M=a.ccclass,w=a.property;e("ParticleMoveController",M("ParticleMoveController")((y=t((f=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"speed",y,i(t)),t._tweens=[],t}o(t,e);var s=t.prototype;return s.onEnable=function(){var e,t;this._stopTween();var o=this.getComponentsInChildren(c);if(0!==o.length){for(var n,i=r(o);!(n=i()).done;){n.value.resetSystem()}var s=null==(e=o[0])?void 0:e.node,a=null==(t=o[1])?void 0:t.node,h=this.node.uiTransfrom.contentSize,v=h.width,f=h.height,y=this.node.uiTransfrom.anchorPoint,M=l(-y.x*v,-y.y*f,v,f),w=this.speed,_=p(M.xMax,M.yMax,0),g=p(M.xMin,M.yMax,0),m=p(M.xMin,M.yMin,0),x=p(M.xMax,M.yMin,0);if(s){s.setPosition(_);var P=u(s).to(d.distance(_,g)/w,{position:g.clone()}).to(d.distance(g,m)/w,{position:m.clone()}).to(d.distance(m,x)/w,{position:x.clone()}).to(d.distance(x,_)/w,{position:_.clone()}).union().repeatForever().start();this._tweens.push(P)}if(a){a.setPosition(m);var C=u(a).to(d.distance(m,x)/w,{position:x.clone()}).to(d.distance(x,_)/w,{position:_.clone()}).to(d.distance(_,g)/w,{position:g.clone()}).to(d.distance(g,m)/w,{position:m.clone()}).union().repeatForever().start();this._tweens.push(C)}}},s.onDisable=function(){this._stopTween();for(var e,t=this.getComponentsInChildren(c),o=r(t);!(e=o()).done;){e.value.stopSystem()}},s._stopTween=function(){for(var e,t=r(this._tweens);!(e=t()).done;){e.value.stop()}this._tweens.length=0},t}(h)).prototype,"speed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),v=f))||v);s._RF.pop()}}}));

System.register("chunks:///_virtual/Platform-dy.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"794d0J1+TVIO68tFesNRKSV","Platform-dy",void 0);t("PlatformDY",function(){function t(){this._videoId=void 0,this._interstitialId=void 0,this._shareInfo=void 0,this._interstitialAd=void 0,this._videoAd=void 0}var e=t.prototype;return e.init=function(t,i){var e=this;this._videoId=t.videoId_dy,this._interstitialId=t.interstitialId_dy,this._shareInfo=i,this._shareInfo&&(this.app.showShareMenu(),this.app.onShareAppMessage((function(){return{title:e._shareInfo.title}}))),this._videoId&&(this._videoAd=this.app.createRewardedVideoAd({adUnitId:this._videoId}),this._videoAd.onError((function(t,i){console.log(t)})))},e.showShare=function(t){this._shareInfo&&this.app.shareAppMessage({title:this._shareInfo.title,success:function(){t&&t(null)},fail:function(){t&&t("分享失败")}})},e.showInterstitialAd=function(){var t=this;this._interstitialAd&&this._interstitialAd.destroy(),this._interstitialId&&(this._interstitialAd=this.app.createInterstitialAd({adUnitId:this._interstitialId}),this._interstitialAd.onLoad((function(){t._interstitialAd.show().then((function(){console.log("插屏广告展示成功")}))})))},e.showVideoAd=function(t){var i=this;if(this._videoAd){var e=function e(o){i._videoAd.offClose(e),o&&o.isEnded?t&&t(null):t&&t("未观看完整广告，不予奖励")};this._videoAd.onClose(e),this._videoAd.show().catch((function(o){i._videoAd.load().then((function(){return i._videoAd.show()})).catch((function(o){i._videoAd.offClose(e),t&&t("加载失败,请稍后再试")}))}))}else t&&t(null)},i(t,[{key:"app",get:function(){return window.tt}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Platform-wx.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"fed9dXaiWdDxZPzgMo7SGfS","Platform-wx",void 0);t("PlatformWX",function(){function t(){this._videoId=void 0,this._interstitialId=void 0,this._shareInfo=void 0,this._interstitialAd=void 0,this._videoAd=void 0}var e=t.prototype;return e.init=function(t,i){var e=this;this._videoId=t.videoId_wx,this._interstitialId=t.interstitialId_wx,this._shareInfo=i,this._shareInfo&&(this.app.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),this.app.onShareAppMessage((function(){return{title:e._shareInfo.title}})),this.app.onShareTimeline((function(){return{title:e._shareInfo.title}}))),this._videoId&&(this._videoAd=this.app.createRewardedVideoAd({adUnitId:this._videoId}),this._videoAd.onError((function(t){console.log(t)})))},e.showShare=function(t){this._shareInfo&&(this.app.shareAppMessage({title:this._shareInfo.title}),setTimeout((function(){t&&t(null)}),500))},e.showInterstitialAd=function(){this._interstitialAd&&this._interstitialAd.destroy(),this._interstitialId&&(this._interstitialAd=this.app.createInterstitialAd({adUnitId:this._interstitialId}),this._interstitialAd.onLoad((function(){console.log("插屏 广告加载成功")})),this._interstitialAd.show().catch((function(t){console.error(t)})))},e.showVideoAd=function(t){var i=this;this._videoAd?(this._videoAd.onClose((function(e){i._videoAd.offClose(),e&&e.isEnded||void 0===e?t&&t(null):t&&t("未观看完整广告，不予奖励")})),this._videoAd.show().catch((function(){i._videoAd.load().then((function(){return i._videoAd.show()})).catch((function(e){i._videoAd.offClose(),t&&t("加载失败,请稍后再试")}))}))):t&&t(null)},i(t,[{key:"app",get:function(){return window.wx}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./Platform-dy.ts","./Platform-wx.ts"],(function(t){var n,i,e,s,o,h;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy},function(t){e=t.WECHAT,s=t.BYTEDANCE},function(t){o=t.PlatformDY},function(t){h=t.PlatformWX}],execute:function(){i._RF.push({},"68596dGY+NHDY4F14yO/Ufy","PlatformMgr",void 0),t("PlatformMgr",function(){function t(){this.platformInfo=void 0,this.shareInfo=void 0,this._handle=void 0}var i=t.prototype;return i.init=function(t,n){this.platformInfo=t,this.shareInfo=n,this.setHandle(new h,e),this.setHandle(new o,s)},i.setHandle=function(t,n){n&&(t.init(this.platformInfo,this.shareInfo),this._handle=t)},i.showShare=function(t){this._handle&&this._handle.showShare?this._handle.showShare(t):t(null)},i.showInterstitialAd=function(){this._handle&&this._handle.showInterstitialAd&&this._handle.showInterstitialAd()},i.showVideoAd=function(t){this._handle&&this._handle.showVideoAd?this._handle.showVideoAd(t):t(null)},n(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/QuadTree.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,h,n;return{setters:[function(t){i=t.createClass,h=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"979f6lPEvpCsZzXuf1lMOom","QuadTree",void 0);t("Point",function(){function t(t,i){this.x=void 0,this.y=void 0,this._parent=void 0,this.x=t,this.y=i}return i(t,[{key:"parent",get:function(){return this._parent},set:function(t){if(this._parent!==t){if(this._parent){var i=this._parent.indexOf(this);-1!==i&&this._parent.splice(i,1)}t&&t.push(this),this._parent=t}}}]),t}());var s=t("Rectangle",function(){function t(t,i,h,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===h&&(h=0),void 0===n&&(n=0),this.x=void 0,this.y=void 0,this.width=void 0,this.height=void 0,this.x=t,this.y=i,this.width=h,this.height=n}var i=t.prototype;return i.set=function(t,i,h,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===h&&(h=0),void 0===n&&(n=0),this.x=t,this.y=i,this.width=h,this.height=n},i.contains=function(t){return t.x>=this.x&&t.x<this.x+this.width&&t.y>=this.y&&t.y<this.y+this.height},i.intersects=function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},t}());t("QuadTree",function(){function t(t,i){this.boundary=void 0,this.capacity=void 0,this.points=void 0,this.children=void 0,this.boundary=t,this.capacity=i,this.points=[],this.children=[]}var i=t.prototype;return i.subdivide=function(){var i=this.boundary.x,h=this.boundary.y,n=this.boundary.width/2,e=this.boundary.height/2;this.children.push(new t(new s(i,h,n,e),this.capacity)),this.children.push(new t(new s(i+n,h,n,e),this.capacity)),this.children.push(new t(new s(i,h+e,n,e),this.capacity)),this.children.push(new t(new s(i+n,h+e,n,e),this.capacity))},i.add=function(t){if(!this.boundary.contains(t))return!1;if(this.points.length<this.capacity)return t.parent=this.points,!0;0===this.children.length&&this.subdivide();for(var i,n=!1,s=h(this.children);!(i=s()).done;){if(n=i.value.add(t))break}return n},i.delete=function(t){t.parent=null},i.query=function(t){var i=[];if(!this.boundary.intersects(t))return i;for(var n,s=h(this.points);!(n=s()).done;){var e=n.value;t.contains(e)&&i.push(e)}if(this.children.length>0)for(var r,o=h(this.children);!(r=o()).done;){var a=r.value.query(t);i.push.apply(i,a)}return i},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/QuadTreeController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuadTree.ts","./Controller.ts"],(function(e){var t,n,o,i,r,s,a,d,h,u,c;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,i=e._decorator,r=e.UITransform,s=e.Node,a=e.TransformBit},function(e){d=e.Rectangle,h=e.QuadTree,u=e.Point},function(e){c=e.Controller}],execute:function(){var l;o._RF.push({},"5ede64OXfNJF6tiXHaUj5r+","QuadTreeController",void 0);var _=i.ccclass;i.property,e("QuadTreeController",_("QuadTreeController")(l=function(e){function o(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this)._quadTree=void 0,t._points=new Map,t._points2=new Map,t}t(o,e);var i=o.prototype;return i.queryInCircle=function(e,t,n){var o=new d(t-e,n-e,2*e,2*e);return this._queryInRectangle(o,!0)},i.queryInRect=function(e,t,n,o){var i=new d(n-e,o-t,2*e,2*t);return this._queryInRectangle(i,!1)},i.queryInRectangle=function(e){return this._queryInRectangle(e,!1)},i.onLoad=function(){var e=this.node.getComponent(r).getBoundingBox(),t=new d(e.x,e.y,e.width,e.height);this._quadTree=new h(t,32)},i.onEnable=function(){this.node.on(s.EventType.CHILD_ADDED,this._childAdded,this),this.node.on(s.EventType.CHILD_REMOVED,this._childRemoved,this)},i.onDisable=function(){this.node.off(s.EventType.CHILD_ADDED,this._childAdded,this),this.node.off(s.EventType.CHILD_REMOVED,this._childRemoved,this)},i._queryInRectangle=function(e,t){void 0===t&&(t=!1);var o=this._quadTree.query(e);if(t){var i=e.x+e.width/2,r=e.y+e.height/2,s=Math.min(e.width/2,e.height/2);o=o.filter((function(e){return Math.pow(e.x-i,2)+Math.pow(e.y-r,2)<=Math.pow(s,2)}))}for(var a,d=[],h=n(o);!(a=h()).done;){var u=a.value,c=this._points2.get(u);c&&d.push(c)}return d},i._childAdded=function(e){var t=this,n=new u(e.position.x,e.position.y);this._quadTree.add(n),this._points.set(e,n),this._points2.set(n,e),e._childTransformChanged=function(n){n===a.POSITION&&t._childTransformChanged(e)},e.on(s.EventType.TRANSFORM_CHANGED,e._childTransformChanged)},i._childRemoved=function(e){var t=this._points.get(e);t&&(this._quadTree.delete(t),this._points.delete(e),this._points2.delete(t)),e.off(s.EventType.TRANSFORM_CHANGED,e._childTransformChanged),e._childTransformChanged=null},i._childTransformChanged=function(e){var t=this._points.get(e);t&&(this._quadTree.delete(t),t.x=e.position.x,t.y=e.position.y,this._quadTree.add(t))},o}(c))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/RedeemCodeDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogController.ts","./Bundle.ts","./Core.ts","./ShowRewardDialog.ts","./Toast.ts"],(function(e){var n,o,t,i,r,s,u,a,c,l,f,d,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,u=e.EditBox,a=e.Prefab},function(e){c=e.DialogController},function(e){l=e.Bundle},function(e){f=e.Core},function(e){d=e.ShowRewardDialog},function(e){p=e.Toast}],execute:function(){var g,h,m,y,C;r._RF.push({},"e359d7/2mlDmJkeOIywIexL","RedeemCodeDialog",void 0);var D=s.ccclass,v=s.property,w=function(e){f.userInfo.gold+=e;var n={gold:e};d.show(n)},I={nly:function(){w(5e3)},nyy:function(){w(5e3)},jqy:function(){!function(e){f.userInfo.diamond+=e;var n={diamond:e};d.show(n)}(50)},jdl:function(){w(5e3)},"qyyxkfgzs-vip":function(){f.userInfo.vip=!0,p.show("恭喜你获得免广告VIP特权!")}};e("RedeemCodeDialog",(g=D("RedeemCodeDialog"),h=v(u),g((C=n((y=function(e){function n(){for(var n,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return n=e.call.apply(e,[this].concat(r))||this,t(n,"input",C,i(n)),n}o(n,e),n._getPrefab=function(){return l.game.get("prefab/ui/redeemCodeDialog",a)};var r=n.prototype;return r.start=function(){this.input.string="123",this.input._updateLabels,this.input.string=""},r.onClickConfirm=function(){this._checkRedeemCodes(this.input.string)},r._checkRedeemCodes=function(e){if(-1===f.userInfo.redeems.indexOf(e)){var n=I[e];n?(f.userInfo.redeems.push(e),f.userInfo.redeems=f.userInfo.redeems,n(),this.close()):p.show("兑换码不存在!")}else p.show("该兑换码已使用，不可再用!")},n}(c)).prototype,"input",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=y))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/RewardPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UISprite.ts","./VirtualList.ts","./TweenUtils.ts","./Bundle.ts","./Core.ts","./GameUtils.ts","./LockMgr.ts"],(function(e){var t,r,n,i,o,a,u,d,l,s,p,m,g,c,v,y,f,N,w,h,C,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,u=e._decorator,d=e.color,l=e.AudioClip,s=e.Sprite,p=e.Label,m=e.Button,g=e.Component},function(e){c=e.UISprite},function(e){v=e.VirtualList},function(e){y=e.TweenUtils},function(e){f=e.Bundle},function(e){N=e.Core},function(e){w=e.loadSpriteFrame,h=e.getEnDailyTask,C=e.getAchievementCount},function(e){I=e.LockMgr}],execute:function(){var T,b,B,F,P;a._RF.push({},"a658dW7Ub1FL4zikCGReBKO","RewardPage",void 0);var D=u.ccclass,L=u.property,k=d("FFFFDB"),_=d("FFFFFF");e("RewardPage",(T=D("RewardPage"),b=L(v),T((P=t((F=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"list",P,i(t)),t._items=void 0,t}r(t,e);var a=t.prototype;return a.onLoad=function(){var e=this,t=f.audio.get("add-money",l);this.list.init(null,(function(r,n){var i=e._items[n],o=i.getNeedNum(i.level),a=i.didNum<o;r.getChildByPath("bg").getComponent(s).color=a?_:k;var u="Gold"===i.rewardType?"texture/ui/ico-gold":"texture/ui/ico-diamond";w(r.getChildByPath("frame/ico").getComponent(c),u),r.getChildByPath("frame/label").getComponent(p).string=""+i.rewardNum;var d=i.title.replace("vvv",""+o),l=h(i.type,d);r.getChildByPath("title").getComponent(p).string=l,r.getChildByPath("progress/progress").getComponent(s).fillRange=i.didNum/o,r.getChildByPath("progress/label").getComponent(p).string=i.didNum+"/"+o;var g=r.getChildByPath("get");g.getComponent(s).grayscale=a;var v=g.getComponent(m);v.enabled=!a,v.setValue("ClickAudio",t),g.off(m.EventType.CLICK),g.on(m.EventType.CLICK,(function(){i.level++;var t=N.userInfo.reward;t[i.type]++,N.userInfo.reward=t,"Gold"===i.rewardType?N.userInfo.gold+=i.rewardNum:N.userInfo.diamond+=i.rewardNum;var o=r.getChildByPath("title");o.setScale(1,1,1),I.lock(),y.fadeIn(o,"fromBig",(function(){I.unlock()}),.3),e.list.reloadWithIndex(n)}))}),null)},a.onEnable=function(){this._items=this._getTaskItems(),this.list.num=this._items.length},a._getTaskItems=function(){var e=this._getData(),t=N.userInfo.reward;if(!t){t={};for(var r,n=o(e);!(r=n()).done;){t[r.value.type]=1}N.userInfo.reward=t}for(var i,a=o(e);!(i=a()).done;){var u=i.value;u.didNum=C(u.type),u.level=t[u.type]}return e.sort((function(e,t){return t.didNum/t.getNeedNum(t.level)-e.didNum/e.getNeedNum(e.level)})),e},a._getData=function(){return[{type:"killMonster",rewardType:"Gold",rewardNum:2e3,title:"打败vvv个怪物",getNeedNum:function(e){return 50*e}},{type:"passedLevel",rewardType:"Diamond",rewardNum:50,title:"通过vvv次关卡",getNeedNum:function(e){return e}},{type:"upgradeEquipment",rewardType:"Diamond",rewardNum:10,title:"升级vvv次装备",getNeedNum:function(e){return 5*e}},{type:"degradeEquipment",rewardType:"Gold",rewardNum:1e3,title:"分解vvv次装备",getNeedNum:function(e){return 5*e}},{type:"buyChestInShop",rewardType:"Diamond",rewardNum:20,title:"打开vvv次装备宝箱",getNeedNum:function(e){return 10*e}},{type:"buyCompositesInShop",rewardType:"Gold",rewardNum:2e3,title:"购买vvv次升级材料",getNeedNum:function(e){return 5*e}},{type:"buyInDailyShop",rewardType:"Gold",rewardNum:2e3,title:"每日商店中购买vvv次",getNeedNum:function(e){return 5*e}},{type:"buyInDailyReward",rewardType:"Gold",rewardNum:2e3,title:"领取商店的每日福利",getNeedNum:function(e){return e}},{type:"getOfflineReward",rewardType:"Gold",rewardNum:1e3,title:"领取挂机奖励",getNeedNum:function(e){return 2*e}},{type:"lookAdVideo",rewardType:"Diamond",rewardNum:50,title:"看vvv次广告视频",getNeedNum:function(e){return 2*e}}]},t}(g)).prototype,"list",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=F))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/RootContainer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts","./BottomContainer.ts","./FightContainer.ts","./Utils.ts"],(function(t){var e,i,o,n,r,a,l,s,u,c,p,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,s=t.Label,u=t.view},function(t){c=t.Controller},function(t){p=t.BottomContainer},function(t){h=t.FightContainer},function(t){f=t.Utils}],execute:function(){var b,g,m,v,y,d,C,w,z,N,L;r._RF.push({},"ee893742LxHooM+TIh469x0","RootContainer",void 0);var R=a.ccclass,F=a.property;t("RootContainer",(b=R("RootContainer"),g=F(h),m=F(p),v=F(l),y=F(s),b((w=e((C=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"fight",w,n(e)),o(e,"bottom",z,n(e)),o(e,"navNode",N,n(e)),o(e,"waveNumLabel",L,n(e)),e}return i(e,t),e.prototype.start=function(){this.fight.init(this),this.bottom.init(this),this.navNode.setPosition(0,u.getVisibleSize().height/2-this.navNode.uiTransfrom.height/2-f.getSafeArea().top,0)},e}(c)).prototype,"fight",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(C.prototype,"bottom",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(C.prototype,"navNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(C.prototype,"waveNumLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=C))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Run.ts",["cc"],(function(t){var e,i,n,a,o,c;return{setters:[function(t){e=t.cclegacy,i=t.view,n=t.ResolutionPolicy,a=t.Canvas,o=t.Mask,c=t.game}],execute:function(){t("setTimeScale",(function(t){r=t})),e._RF.push({},"100f283ujdMNLpF3tLZhsZt","Run",void 0);var l=i.getVisibleSize(),s=i.getDesignResolutionSize();if(l.height/l.width<s.height/s.width){i.setResolutionPolicy(n.SHOW_ALL);var u=a.prototype.onEnable;a.prototype.onEnable=function(){u&&u.call(this);this.addUniqueComponent(o)}}var r=1;var h=c._calculateDT;c._calculateDT=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=h.call.apply(h,[this].concat(e));return this._deltaTime=n*r,this._deltaTime},e._RF.pop()}}}));

System.register("chunks:///_virtual/RunScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodePoolMgr.ts","./UIMgr.ts","./HeroData.ts","./MonsterData.ts","./Bundle.ts","./IGame.ts"],(function(t){var n,e,o,i,s,c,a,r,u,f,l,h,d,p;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.tween,s=t.Prefab,c=t.instantiate,a=t.director,r=t.Component},function(t){u=t.NodePoolMgr},function(t){f=t.UIMgr},function(t){l=t.HeroData},function(t){h=t.MonsterData},function(t){d=t.Bundle},function(t){p=t.SceneName}],execute:function(){var _;e._RF.push({},"30bb8TDfjNJ6q8vqWl6Cw7W","RunScene",void 0);var v=o.ccclass;o.property,t("RunScene",v("RunScene")(_=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this)._tween=void 0,n._fast=!1,n}n(e,t),e.show=function(t,n){void 0===n&&(n=!1);var o=d.game.get("prefab/other/runScene",s),i=c(o);i.parent=f.instance.persistParent,i.uiTransfrom.priority=1e4,i.getComponent(e)._startAnim(t,n)};var o=e.prototype;return o._startAnim=function(t,n){var e=this;void 0===n&&(n=!1),this._fast=n;var o=function(){a.loadScene(t,(function(){e._hide((function(){e.node.destroy()}))}),(function(){u.clear()}))};this._show((function(){t===p.Game?h.loadRes((function(){l.loadRes((function(){o()}))})):e.scheduleOnce((function(){o()}),e._fast?0:.2)}))},o._show=function(t){this._clearTweens(),this.node.opacity=0,i(this.node).to(this._fast?.1:.3,{opacity:255}).call(t).start()},o._hide=function(t){this._clearTweens(),this.node.opacity=255,i(this.node).to(this._fast?.1:.3,{opacity:0}).call(t).start()},o._clearTweens=function(){this._tween&&(this._tween.stop(),this._tween=null)},e}(r))||_);e._RF.pop()}}}));

System.register("chunks:///_virtual/SaveProp.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"bd92d2+rj1Gnrgla7wfE36Z","SaveProp",void 0);var n=e("SaveProp",function(){function e(){}return e.decorator=function(e){var t=this;return function(r,n){var a,o={propertyKey:String(n),defaultValue:e},u=r.constructor;(null!=(a=t._params.get(u))?a:t._params.set(u,[]).get(u)).push(o)}},e.initObject=function(r,n){var a=this,o=r.constructor,u=this._params.get(o);if(u)for(var c,l=r.constructor.name,s=function(){var t=c.value,o=t.propertyKey,u=t.defaultValue,s=[a.Name,l];n&&s.push(n),s.push(o);var i=s.join("_");t.value=e._getItem(i,u),Reflect.defineProperty(r,o,{set:function(r){e._setItem(i,r),t.value=r},get:function(){return t.value}})},i=t(u);!(c=i()).done;)s()},e.removeObject=function(e,t){var r=e.constructor.name,n=[this.Name,r];t&&n.push(t);for(var a=n.join("_"),o=0,u=Object.keys(localStorage);o<u.length;o++){var c=u[o];c.startsWith(a)&&localStorage.removeItem(c)}},e._setItem=function(e,t){var r=JSON.stringify({value:t});localStorage.setItem(e,r)},e._getItem=function(e,t){var r,n=localStorage.getItem(e),a=n&&0!==n.length?null==(r=JSON.parse(n))?void 0:r.value:null;return null!=a?a:t},e}());n._params=new Map,n.Name="App",r._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts"],(function(e){var t,n,i,r,a,o,c,l,s,u,f,h,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,c=e._decorator,l=e.Node,s=e.Vec3,u=e.view,f=e.tween,h=e.v3,p=e.instantiate},function(e){d=e.Controller}],execute:function(){var v,w,g,b,_,S,y,m,z;o._RF.push({},"47794VPQGJPvb2Ga0nGq9oj","ScreenAnimation",void 0);var A=c.ccclass,P=c.property;e("ScreenAnimation",(v=A("ScreenAnimation"),w=P(l),g=P(s),b=P(s),v((y=t((S=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"prefab",y,r(t)),i(t,"fromScale",m,r(t)),i(t,"toScale",z,r(t)),t._tweens=new Set,t}n(t,e);var o=t.prototype;return o.start=function(){this.prefab.active=!1},o.show=function(e){var t=this;this._clearTweens();for(var n=this.prefab.uiTransfrom.contentSize,i=u.getVisibleSize(),r=Math.ceil(i.width/n.width),a=Math.ceil(i.height/n.height),o=0,c=a*n.height/2-n.height/2,l=0;l<a;l++){for(var s=l%2==0?r:r+1,h=-s*n.width/2+n.width/2,d=function(){var i=p(t.prefab);i.parent=t.node,i.active=!0,i.setScale(t.fromScale),i.setPosition(h,c,0),t._shake(i,o);var r=f(i).delay(o).to(.3,{scale:t.toScale.clone()}).call((function(){t._tweens.delete(r),0===t._tweens.size&&e&&e()})).start();t._tweens.add(r),o+=.1,h+=n.width},v=0;v<s;v++)d();c-=n.height}},o.hide=function(e){var t=this;this._clearTweens();var n=0,i=[].concat(this.node.children);i.sort((function(e,t){return t.getSiblingIndex()-e.getSiblingIndex()}));for(var r,o=function(){var i=r.value;t._shake(i,n);var a=f(i).delay(n).to(.3,{scale:t.fromScale.clone()}).call((function(){t._tweens.delete(a),0===t._tweens.size&&e&&e()})).start();t._tweens.add(a),n+=.1},c=a(i);!(r=c()).done;)o()},o._shake=function(e,t){f(e).delay(t).to(.1,{angle:30}).to(.1,{angle:-30}).to(.05,{angle:.05}).start()},o._clearTweens=function(){for(var e,t=a(this._tweens);!(e=t()).done;){e.value.stop()}this._tweens.clear()},t}(d)).prototype,"prefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(S.prototype,"fromScale",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h()}}),z=t(S.prototype,"toScale",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h()}}),_=S))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollSpriteFrame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts"],(function(e){var t,r,i,o,n,a,p,s,c,l,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,p=e.Sprite,s=e.Enum,c=e.Texture2D,l=e.rect,u=e.SpriteFrame},function(e){d=e.Controller}],execute:function(){var h,m,f,S,_,v,y,F;n._RF.push({},"c3677OFL9xELa5MayOnIwWJ","ScrollSpriteFrame",void 0);var b=a.ccclass,w=a.property,g=a.requireComponent;e("ScrollSpriteFrame",(h=b("ScrollSpriteFrame"),m=g(p),f=w({type:s(c.WrapMode)}),h(S=m((v=t((_=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,i(t,"moveSpeedX",v,o(t)),i(t,"moveSpeedY",y,o(t)),i(t,"wrapMode",F,o(t)),t._sprite=void 0,t._rect=l(),t}r(t,e);var n=t.prototype;return n.getRect=function(){return this._rect},n.onLoad=function(){this._sprite=this.getComponent(p);var e=this._sprite.spriteFrame,t=new u;t.packable=!1,t.texture=e.texture,t.texture.setWrapMode(this.wrapMode,this.wrapMode),this._sprite.spriteFrame=t,this._rect.set(this._sprite.spriteFrame.rect)},n.update=function(e){this._rect.x+=this.moveSpeedX*e,this._rect.y+=this.moveSpeedY*e,this._sprite.spriteFrame.rect=this._rect,this._sprite.markForUpdateRenderData()},t}(d)).prototype,"moveSpeedX",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=t(_.prototype,"moveSpeedY",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=t(_.prototype,"wrapMode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.WrapMode.REPEAT}}),S=_))||S)||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/ServerUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./Http.ts"],(function(e){var t,r,n;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy},null,null],execute:function(){e({getServerTimestamp:function(){return s.getServerTimestamp()},getServerTimestampLoaded:function(){return s.loaded}}),n._RF.push({},"29142R1aGVJ/L0feu4KhZON","ServerUtils",void 0);var s=new(function(){function e(){this.loaded=!1,this._serverTimeOffset=0,this._debugTimeOffset=0,this._requestTime()}var n=e.prototype;return n.getServerTimestamp=function(){return(new Date).getTime()+this._serverTimeOffset+this._debugTimeOffset},n._requestTime=function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=3),!(t<0)){e.next=4;break}return this.loaded=!0,e.abrupt("return");case 4:return e.prev=4,e.next=7,this._syncServerTime();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),this._requestTime(t-1);case 12:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),n._syncServerTime=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=5;break;case 3:t=e.sent,this._serverTimeOffset=t.serverTime-(new Date).getTime();case 5:this.loaded=!0;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SettingDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogController.ts","./TimerSystem.ts","./Bundle.ts","./Core.ts","./MessageDialog.ts","./RedeemCodeDialog.ts","./Toast.ts"],(function(e){var t,o,n,i,r,a,s,c,l,u,g,f,d;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,i=e.director,r=e.Prefab},function(e){a=e.DialogController},function(e){s=e.TimerSystem},function(e){c=e.Bundle},function(e){l=e.Core,u=e.MainInterval},function(e){g=e.MessageDialog},function(e){f=e.RedeemCodeDialog},function(e){d=e.Toast}],execute:function(){var D;o._RF.push({},"7002bCR0fdPxZYrynBx98mb","SettingDialog",void 0);var p=n.ccclass;n.property,e("SettingDialog",p("SettingDialog")(D=function(e){function o(){return e.apply(this,arguments)||this}t(o,e),o._getPrefab=function(){return c.game.get("prefab/ui/settingDialog",r)};var n=o.prototype;return n.onClickPlayerID=function(){var e=l.userInfo.userID;g.show("玩家ID",e,"复制",(function(){navigator.clipboard.writeText(e),d.show("复制成功!")})),this.close()},n.onClickRedeemCode=function(){f.show(),this.close()},n.onClickReset=function(){i.unregisterSystem(s.instance),clearInterval(u),localStorage.clear(),location.reload()},o}(a))||D);o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopChestShopItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IConfig.ts","./Utils.ts","./Core.ts","./TimerInfo.ts","./OpenChestDialog.ts","./Toast.ts","./GameUtils.ts"],(function(t){var o,e,n,i,s,h,a,c,d,r,u,l,C,p,f,y,_;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.color,s=t.Button,h=t.Label,a=t.Component},function(t){c=t.EquipmentGrades},function(t){d=t.Utils},function(t){r=t.Core},function(t){u=t.TimerInfo},function(t){l=t.OpenChestDialog},function(t){C=t.Toast},function(t){p=t.openChest,f=t.isBackpackFull,y=t.lookAdVideo,_=t.getRandomGradeWeights}],execute:function(){var m;e._RF.push({},"795bdcurgxGtojOaahn8lEm","ShopChestShopItem",void 0);var g=n.ccclass,b=(n.property,t("ChestPrice",10)),v=t("ChestBuyCount",10),B=i("F0EEB9"),D=i("B1B1B1");t("ShopChestShopItem",g("ShopChestShopItem")(m=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(o=t.call.apply(t,[this].concat(n))||this)._chestIcoNode=void 0,o._buyAdNode=void 0,o._buyDiamondNode=void 0,o._chestDetail=void 0,o}o(e,t);var n=e.prototype;return n.onLoad=function(){this._chestIcoNode=this.node.getChildByPath("ico"),this._buyAdNode=this.node.getChildByPath("btns/buy-ad"),this._buyDiamondNode=this.node.getChildByPath("btns/buy-diamond"),this._chestDetail=this.node.getChildByPath("info")},n.onEnable=function(){this._buyAdNode.on(s.EventType.CLICK,this._onClickBuyAd,this),this._buyDiamondNode.on(s.EventType.CLICK,this._onClickBuyDiamond,this),this._chestDetail.on(s.EventType.CLICK,this._onClickDetail,this)},n.onDisable=function(){this._buyAdNode.off(s.EventType.CLICK,this._onClickBuyAd,this),this._buyDiamondNode.off(s.EventType.CLICK,this._onClickBuyDiamond,this),this._chestDetail.off(s.EventType.CLICK,this._onClickDetail,this)},n.update=function(t){var o=u.getFreeChest,e=o<=0,n=this._buyAdNode.getChildByPath("label").getComponent(h);e?(n.string="Free",n.color=B):(n.string=d.formatTime(o,"hh:mm:ss"),n.color=D),this._buyDiamondNode.getChildByPath("label").getComponent(h).string=""+v*b},n._openChest=function(){var t=p(v);l.show(this._chestIcoNode,t)},n._onClickBuyAd=function(){var t=this;f()||(u.getFreeChest<=0?y((function(o){o||(u.getFreeChest=28800,t._openChest())})):C.show("Free Chest On Cooldown!"))},n._onClickBuyDiamond=function(){if(!f()){var t=v*b;r.userInfo.diamond<t?C.show("Not Enough Diamonds!"):(r.userInfo.diamond-=t,this._openChest())}},n._onClickDetail=function(){for(var t=_(),o=Math.weightsToProbabilities(t),e=[],n=0;n<o.length;n++){var i=o[n];e.push(c[n]+": "+(100*i).toFixed(2)+" %")}C.show("Gear Crate Drop Rate:\n"+e.join("\n")+"\nHigher player levels boost the chance to find Rare Gear.")},e}(a))||m);e._RF.pop()}}}));

System.register("chunks:///_virtual/ShopCompositesHeader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUtils.ts"],(function(e){var t,i,r,a,o,l,n,s,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,n=e.Label,s=e.Component},function(e){p=e.getCompositeCount}],execute:function(){var c,b,u,h,L,f,g,d,m,y,C;o._RF.push({},"e95d4JdXApD+b7VDRcvGbs9","ShopCompositesHeader",void 0);var v=l.ccclass,z=l.property;e("ShopCompositesHeader",(c=v("ShopCompositesHeader"),b=z(n),u=z(n),h=z(n),L=z(n),c((d=t((g=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"sLabel",d,a(t)),r(t,"aLabel",m,a(t)),r(t,"bLabel",y,a(t)),r(t,"cLabel",C,a(t)),t}return i(t,e),t.prototype.update=function(e){this.sLabel.string=""+p("S"),this.aLabel.string=""+p("A"),this.bLabel.string=""+p("B"),this.cLabel.string=""+p("C")},t}(s)).prototype,"sLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(g.prototype,"aLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(g.prototype,"bLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(g.prototype,"cLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=g))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopCompositesItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./Bundle.ts","./Toast.ts","./GameUtils.ts"],(function(t){var e,o,n,i,r,u,a,s,l,p,c,y,h,C,m,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,a=t.Button,s=t.AudioClip,l=t.Component},function(t){p=t.AudioMgr},function(t){c=t.Bundle},function(t){y=t.Toast},function(t){h=t.getCompositeCount,C=t.setCompositeCount,m=t.addCompositeCount,d=t.addAchievementCount}],execute:function(){var f,b,g,v,G,S;r._RF.push({},"2e9784Si1JKKJ1fA59R3ADR","ShopCompositesItem",void 0);var w=u.ccclass,A=u.property;t("ShopCompositesItem",w("ShopCompositesItem")((g=e((b=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,n(e,"buyGrade",g,i(e)),n(e,"buyCount",v,i(e)),n(e,"moneyGrade",G,i(e)),n(e,"moneyCount",S,i(e)),e}o(e,t);var r=e.prototype;return r.onEnable=function(){this.node.on(a.EventType.CLICK,this._onClick,this)},r.onDisable=function(){this.node.off(a.EventType.CLICK,this._onClick,this)},r._onClick=function(){var t=h(this.moneyGrade);t<this.moneyCount?y.show("Not Enough Material!"):(y.show(this.buyGrade+" Upgrade Material +"+this.buyCount),p.inst.playOneShot(c.audio.get("reward",s),.1),C(this.moneyGrade,t-this.moneyCount),m(this.buyGrade,this.buyCount),d("buyCompositesInShop"))},e}(l)).prototype,"buyGrade",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"S"}}),v=e(b.prototype,"buyCount",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),G=e(b.prototype,"moneyGrade",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"A"}}),S=e(b.prototype,"moneyCount",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),f=b))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/ShopDailyRewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./MsgMgr.ts","./Bundle.ts","./Core.ts","./IGame.ts","./GameUtils.ts"],(function(e){var t,o,i,n,a,r,d,s,l,u,h,c,y,p,m,f,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,d=e.Enum,s=e.Label,l=e.Button,u=e.AudioClip,h=e.Component},function(e){c=e.AudioMgr},function(e){y=e.MsgMgr},function(e){p=e.Bundle},function(e){m=e.Core},function(e){f=e.GameAction},function(e){_=e.addAchievementCount}],execute:function(){var g,v,C,D,I;a._RF.push({},"fed53AI5R1Gebi4tBdYnwuR","ShopDailyRewardItem",void 0);var b=r.ccclass,R=r.property,w=e("MoneyEnum",function(e){return e[e.Gold=0]="Gold",e[e.Diamond=1]="Diamond",e}({}));e("ShopDailyRewardItem",(g=b("ShopDailyRewardItem"),v=R({type:d(w)}),g((I=t((D=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"moneyType",I,n(t)),t._label=void 0,t._redDot=void 0,t._tip=void 0,t._mask=void 0,t}o(t,e);var a=t.prototype;return a.onLoad=function(){this._label=this.node.getChildByName("label").getComponent(s),this._redDot=this.node.getChildByName("red-dot"),this._tip=this.node.getChildByName("tip").getComponent(s),this._mask=this.node.getChildByName("mask")},a.onEnable=function(){this.node.on(l.EventType.CLICK,this._onClick,this),y.on(f.onDayEnd,this._reload,this),this._reload()},a.onDisable=function(){this.node.off(l.EventType.CLICK,this._onClick,this),y.off(f.onDayEnd,this._reload,this)},a._reload=function(){var e=!1;this.moneyType===w.Gold?(e=m.userInfo.day.goldReward,this._label.string="+20000"):this.moneyType===w.Diamond&&(e=m.userInfo.day.diamondReward,this._label.string="+100"),this._redDot.active=e,this._tip.string=e?"Free":"Received",this._mask.active=!e},a._onClick=function(){"Free"===this._tip.string&&(this.moneyType===w.Gold?(m.userInfo.day.goldReward=!1,m.userInfo.gold+=2e4):this.moneyType===w.Diamond&&(m.userInfo.day.diamondReward=!1,m.userInfo.diamond+=100),_("buyInDailyReward"),this._reload(),c.inst.playOneShot(p.audio.get("add-money",u)))},t}(h)).prototype,"moneyType",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.Gold}}),C=D))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShopDailyShopItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EquipmentConfig.ts","./UISprite.ts","./GameUtils.ts"],(function(e){var t,i,n,o,s,a,l,h,c,r,p,m,u;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,o=e.Label,s=e.Button,a=e.Component},function(e){l=e.EquipmentConfig},function(e){h=e.UISprite},function(e){c=e.getEnSetName,r=e.getEnEquipName,p=e.loadSpriteFrame,m=e.getShopEquipmentSaleMoney,u=e.getShopCompositesSaleMoney}],execute:function(){var _;i._RF.push({},"0b800/ucBRM7JaTlyQjaZlT","ShopDailyShopItem",void 0);var d=n.ccclass;n.property,e("ShopDailyShopItem",d("ShopDailyShopItem")(_=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this)._label=void 0,t._numLabel=void 0,t._icoSprite=void 0,t._moneyLabel=void 0,t._mask=void 0,t._clickCall=void 0,t._saleMoney=void 0,t}t(i,e);var n=i.prototype;return n.onLoad=function(){this._label=this.node.getChildByName("label").getComponent(o),this._numLabel=this.node.getChildByName("num").getComponent(o),this._icoSprite=this.node.getChildByName("ico").getComponent(h),this._moneyLabel=this.node.getChildByPath("money/label").getComponent(o),this._mask=this.node.getChildByName("mask")},n.onEnable=function(){this.node.on(s.EventType.CLICK,this._onClick,this)},n.onDisable=function(){this.node.off(s.EventType.CLICK,this._onClick,this)},n.init=function(e,t){if(this._clickCall=t,"Equipment"===e.type){var i=l.where("id",e.equipmentId),n=i.name,o=c(n.substring(0,2)),s=r(n.substring(2));this._label.string=e.grade+" "+o+" "+s,this._numLabel.string="",p(this._icoSprite,"texture/equipment/"+i.ico),this._saleMoney=m(e.grade)}else this._label.string=e.grade+" Upgrade Material",this._numLabel.string="x"+e.compositesNum,p(this._icoSprite,"texture/ui/composite-"+e.grade),this._saleMoney=u(e.grade)*e.compositesNum;this._moneyLabel.string=""+this._saleMoney,this._mask.active=!e.active},n._onClick=function(){this._mask.active||this._clickCall&&this._clickCall(this._saleMoney)},i}(a))||_);i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EquipmentConfig.ts","./IConfig.ts","./ShopDailyShopItem.ts","./AudioMgr.ts","./MsgMgr.ts","./Controller.ts","./UIScrollView.ts","./Utils.ts","./Bundle.ts","./Core.ts","./IGame.ts","./GameUtils.ts","./ShowRewardDialog.ts","./Toast.ts"],(function(e){var i,t,o,n,a,r,l,s,u,c,d,h,p,f,m,y,g,v,b,w,S,I,C,L,D,B,V,k,_,A;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,u=e.Label,c=e.Button,d=e.AudioClip,h=e.instantiate},function(e){p=e.EquipmentConfig},function(e){f=e.EquipmentGrades},function(e){m=e.ShopDailyShopItem},function(e){y=e.AudioMgr},function(e){g=e.MsgMgr},function(e){v=e.Controller},function(e){b=e.UIScrollView},function(e){w=e.Utils},function(e){S=e.Bundle},function(e){I=e.Core},function(e){C=e.GameAction},function(e){L=e.getRandomGrade,D=e.isBackpackFull,B=e.addAchievementCount,V=e.addCompositeCount,k=e.addEquipment},function(e){_=e.ShowRewardDialog},function(e){A=e.Toast}],execute:function(){var M,N,q,z,E,R,P,G,O,T,U,x,F,H,j,J,K,Q,W;r._RF.push({},"b8573qQGbVBlbPJw5Lt1bk9","ShopPage",void 0);var X=l.ccclass,Y=l.property;e("ShopPage",(M=X("ShopPage"),N=Y(b),q=Y(s),z=Y(s),E=Y(s),R=Y(s),P=Y(s),G=Y(s),O=Y(u),M((x=i((U=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a))||this,o(i,"scrollView",x,n(i)),o(i,"dailyRewardList",F,n(i)),o(i,"dailyShopList",H,n(i)),o(i,"chestBuyAd",j,n(i)),o(i,"chestBuyDiamond",J,n(i)),o(i,"chestDetail",K,n(i)),o(i,"compositesShopList",Q,n(i)),o(i,"countdownLabels",W,n(i)),i._dailyShopItem=void 0,i}t(i,e);var r=i.prototype;return r.onLoad=function(){this._dailyShopItem=this.dailyShopList.children[0],this._dailyShopItem.parent=null},r.start=function(){this.scrollView.init((function(e){e.emit(c.EventType.CLICK),y.inst.playOneShot(S.audio.get("click",d),.1)}));for(var e,i=a(this.dailyRewardList.children);!(e=i()).done;){var t=e.value;this.scrollView.addClickNode(t)}this.scrollView.addClickNode(this.chestBuyAd),this.scrollView.addClickNode(this.chestBuyDiamond),this.scrollView.addClickNode(this.chestDetail);for(var o,n=a(this.compositesShopList.children);!(o=n()).done;){var r=o.value;this.scrollView.addClickNode(r)}},r.onEnable=function(){this._reloadDailyShop(),g.on(C.onDayEnd,this._reloadDailyShop,this)},r.onDisable=function(){g.off(C.onDayEnd,this._reloadDailyShop,this)},r.update=function(e){for(var i,t=I.userInfo.secondsMidnight,o=a(this.countdownLabels);!(i=o()).done;){i.value.string=w.formatTime(t,"hh:mm:ss")}},r._reloadDailyShop=function(){for(var e,i=this,t=a(this.dailyShopList.children);!(e=t()).done;){var o=e.value;this.scrollView.deleteClickNode(o)}var n=I.userInfo.day.shopItems;if(!n){n=[];for(var r=["S","A","B","C"],l=0;l<f.length;l++){var s={type:"Composites",grade:f[l],active:!0},u=r.indexOf(s.grade)+1;s.compositesNum=Math.ceil(Math.randomInt2(3,15)*u),n.push(s)}for(var c=p.configs.map((function(e){return e.id})),d=[],y=0;y<4;y++)d.push(L());d.sort((function(e,i){return r.indexOf(e)-r.indexOf(i)}));for(var g=0;g<d.length;g++){var v={type:"Equipment",grade:d[g],active:!0},b=Math.randomInt(0,c.length);v.equipmentId=c[b],c.splice(b,1),n.push(v)}I.userInfo.day.shopItems=n}this.dailyShopList.removeAllChildren();for(var w=function(){var e=n[S],t=h(i._dailyShopItem);t.parent=i.dailyShopList;var o=t.getComponent(m);o.init(e,(function(i){if("Equipment"!==e.type||!D())if(I.userInfo.gold<i)A.show("金币不足!");else if(I.userInfo.gold-=i,e.active=!1,I.userInfo.day.shopItems=n,B("buyInDailyShop"),o.init(e,null),"Composites"===e.type){var t;V(e.grade,e.compositesNum);var a={composites:(t={},t[e.grade]=e.compositesNum,t)};_.show(a)}else{var r={equipments:[k(e.equipmentId,e.grade)]};_.show(r)}}))},S=0;S<n.length;S++)w();for(var C,M=a(this.dailyShopList.children);!(C=M()).done;){var N=C.value;this.scrollView.addClickNode(N)}},i}(v)).prototype,"scrollView",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(U.prototype,"dailyRewardList",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(U.prototype,"dailyShopList",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=i(U.prototype,"chestBuyAd",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=i(U.prototype,"chestBuyDiamond",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=i(U.prototype,"chestDetail",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=i(U.prototype,"compositesShopList",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=i(U.prototype,"countdownLabels",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=U))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/ShowRewardDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IConfig.ts","./EquipmentItemController.ts","./AudioMgr.ts","./DialogController.ts","./UISprite.ts","./Bundle.ts","./GameUtils.ts"],(function(t){var e,n,i,o,r,l,a,s,c,u,p,h,g,d,m,f,C,y,v,b,w,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.Node,s=t.Button,c=t.Prefab,u=t.AudioClip,p=t.Label,h=t.instantiate,g=t.Layout},function(t){d=t.EquipmentGrades},function(t){m=t.EquipmentItemController},function(t){f=t.AudioMgr},function(t){C=t.DialogController},function(t){y=t.UISprite},function(t){v=t.Bundle},function(t){b=t.numberToString,w=t.loadSpriteFrame,B=t.sortEquipments}],execute:function(){var _,D,P,S,q,x,I;r._RF.push({},"b033cgckLZL/bFMrf66Tlkc","ShowRewardDialog",void 0);var R=l.ccclass,A=l.property;t("ShowRewardDialog",(_=R("ShowRewardDialog"),D=A(a),P=A(s),_((x=e((q=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,i(e,"list",x,o(e)),i(e,"closeBtn",I,o(e)),e._closeCall=void 0,e}n(e,t),e._getPrefab=function(){return v.game.get("prefab/ui/showRewardDialog",c)};var r=e.prototype;return r.open=function(){var e;this._fadeInAnim="fromBig";for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];(e=t.prototype.open).call.apply(e,[this].concat(i)),f.inst.playOneShot(v.audio.get("reward",u))},r._open=function(t,e){var n=this;this._closeCall=e;var i=this.list.children[0],o=this.list.children[1],r=this.list.children[2],l=this.list.children[3],a=this.list.children[4];if(l.parent=null,a.parent=null,t.diamond?i.getChildByPath("frame/num").getComponent(p).string="x"+b(t.diamond):i.parent=null,t.gold?o.getChildByPath("frame/num").getComponent(p).string="x"+b(t.gold):o.parent=null,t.exp?r.getChildByPath("frame/num").getComponent(p).string="x"+b(t.exp):r.parent=null,t.composites)for(var s=0;s<d.length;s++){var c=d[s],u=t.composites[c];if(u&&u>0){var f=h(l);f.parent=this.list;var C=f.getChildByPath("frame/ico").getComponent(y);w(C,"texture/ui/composite-"+c),f.getChildByPath("frame/num").getComponent(p).string="x"+b(u),f.getChildByPath("title").getComponent(p).string=c+" Upgrade\nMaterial"}}if(t.equipments&&t.equipments.length>0){B(t.equipments);for(var v=0;v<t.equipments.length;v++){var _=t.equipments[v],D=h(a);D.parent=this.list,D.getComponent(m).init(_)}}var P=this.list.getComponent(g),S=Math.min(this.list.children.length,P.constraintNum);this.list.uiTransfrom.width=(130+P.spacingX)*S-P.spacingX,this.closeBtn.enabled=!1,this.scheduleOnce((function(){n.closeBtn.enabled=!0}),.5)},r.onClickClose=function(){this._closeCall&&this._closeCall(),this.close()},e}(C)).prototype,"list",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(q.prototype,"closeBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=q))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/StateMachine.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"1ccd96Bk9ZF278p9CVnYTWH","StateMachine",void 0);t("StateMachine",function(){function t(t,e){this._state=void 0,this._onStateChanged=void 0,this._state=t,this._onStateChanged=e}return e(t,[{key:"state",get:function(){return this._state},set:function(t){t!==this.state&&(this._state=t,this._onStateChanged&&this._onStateChanged(t))}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SyncTRS.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts"],(function(e){var t,i,n,o,r,s,a,d,l,c,u,p,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){s=e.cclegacy,a=e._decorator,d=e.v3,l=e.quat,c=e.Node,u=e.BitMask,p=e.TransformBit,f=e.Quat},function(e){h=e.Controller}],execute:function(){var N,b,O,y,S,T,g,I,R,_,A,C,v,m;s._RF.push({},"48da81QeQpFcqOGGXlmr02l","SyncTRS",void 0);var P=a.ccclass,W=a.property,E=a.executeInEditMode,L=d(),w=l(),z=d();function D(e){return!!e&&(!isNaN(e.x)&&(!isNaN(e.y)&&(!isNaN(e.z)&&!(e instanceof f&&isNaN(e.w)))))}e("SyncTRS",(N=P("SyncTRS"),b=E(!0),O=W(c),y=W(c),S=W({type:u({POSITION:p.POSITION,ROTATION:p.ROTATION,SCALE:p.SCALE})}),T=W({visible:function(){return!!(this.type&p.POSITION)}}),g=W({visible:function(){return!!(this.type&p.SCALE)}}),N(I=b((_=t((R=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"_bindNode",_,o(t)),n(t,"type",A,o(t)),n(t,"posOffset",C,o(t)),n(t,"scaleOffset",v,o(t)),n(t,"useWorldSpace",m,o(t)),t}i(t,e);var s=t.prototype;return s.onLoad=function(){this.bindNode=this.bindNode},s.update=function(e){},s._onTransformChanged=function(e){var t,i,n;this.bindNode&&(this.type&p.POSITION&&e&p.POSITION&&(t=L,this.useWorldSpace?this.bindNode.getWorldPosition(t).add(this.posOffset):this.bindNode.getPosition(t).add(this.posOffset),D(t)||(t=null)),this.type&p.ROTATION&&e&p.ROTATION&&(i=w,this.useWorldSpace?this.bindNode.getWorldRotation(i):this.bindNode.getRotation(i),D(i)||(i=null)),this.type&p.SCALE&&e&p.SCALE&&(n=z,this.useWorldSpace?this.bindNode.getWorldScale(n).add(this.scaleOffset):this.bindNode.getScale(n).add(this.scaleOffset),D(n)||(n=null)),this.useWorldSpace?(t&&this.node.setWorldPosition(t),i&&this.node.setWorldRotation(i),n&&this.node.setWorldScale(n)):this.node.setRTS(i,t,n))},r(t,[{key:"bindNode",get:function(){return this._bindNode},set:function(e){this._bindNode&&this._bindNode.off(c.EventType.TRANSFORM_CHANGED,this._onTransformChanged,this),this._bindNode=e,this._bindNode&&(this._bindNode.on(c.EventType.TRANSFORM_CHANGED,this._onTransformChanged,this),this._onTransformChanged(this.type))}}]),t}(h)).prototype,"_bindNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(R.prototype,"bindNode",[y],Object.getOwnPropertyDescriptor(R.prototype,"bindNode"),R.prototype),A=t(R.prototype,"type",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.POSITION|p.ROTATION|p.SCALE}}),C=t(R.prototype,"posOffset",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d()}}),v=t(R.prototype,"scaleOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d()}}),m=t(R.prototype,"useWorldSpace",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=R))||I)||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/TabbarController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./Controller.ts","./UISprite.ts","./Utils.ts","./Bundle.ts","./LockMgr.ts"],(function(t){var e,i,n,o,r,a,s,l,h,c,u,d,p,b,f,g,_,m,v,y,T,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,n=t.inheritsLoose,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.v2,l=t.SpriteFrame,h=t.Prefab,c=t.Node,u=t.view,d=t.instantiate,p=t.Label,b=t.AudioClip,f=t.v3,g=t.tween},function(t){_=t.AudioMgr},function(t){m=t.Controller},function(t){v=t.UISprite},function(t){y=t.Utils},function(t){T=t.Bundle},function(t){w=t.LockMgr}],execute:function(){var C,I,S,N,z,x,B,E,k,L,D,M,P,U,A,F,O,H,R,X;r._RF.push({},"7efe7tud/JFioY5ShRjJEZn","TabbarController",void 0);var j=a.ccclass,J=a.property,V=s(),Y=(C=j("TabbarItem"),I=J(l),S=J(h),C((x=e((z=function(){i(this,"ico",x,this),i(this,"title",B,this),i(this,"page",E,this),this.node=void 0}).prototype,"ico",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(z.prototype,"title",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=e(z.prototype,"page",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=z))||N);t("TabbarController",(k=j("TabbarController"),L=J(Y),D=J(c),M=J(c),P=J(c),k((F=e((A=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"items",F,o(e)),i(e,"spaceX",O,o(e)),i(e,"statusBar",H,o(e)),i(e,"tabbar",R,o(e)),i(e,"container",X,o(e)),e._prefabNode=void 0,e._nodes=[],e._selectedIndex=void 0,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this._prefabNode=this.tabbar.children[0],this._prefabNode||console.error("need a prefab"),this._prefabNode.parent=null;var t=y.getSafeArea().top;this.statusBar.uiTransfrom.height=t;var e=u.getVisibleSize();this.container.uiTransfrom.setContentSize(e.width,e.height-this.tabbar.uiTransfrom.height-t),this.container.setPosition(0,e.height/2-(t+this.container.uiTransfrom.height/2),0);for(var i=0;i<this.items.length;i++){var n=this.items[i],o=d(this._prefabNode);o.parent=this.tabbar,o.getChildByName("ico").getComponent(v).spriteFrame=n.ico,o.getChildByName("title").getComponent(p).string=n.title,this._nodes.push(o)}this._selectedIndex=Math.floor(this._nodes.length/2),this._onSelected(this._selectedIndex,!1)},r.onEnable=function(){this.tabbar.on(c.EventType.TOUCH_END,this._touchEnd,this)},r.onDisable=function(){this.tabbar.off(c.EventType.TOUCH_END,this._touchEnd,this)},r.getItem=function(t){return this._nodes[t]},r.setItem=function(t){this._selectedIndex=t,this._onSelected(this._selectedIndex)},r._touchEnd=function(t){for(var e=t.getLocation(V),i=t.windowId,n=0;n<this._nodes.length;n++){if(this._nodes[n].uiTransfrom.hitTest(e,i)){_.inst.playOneShot(T.audio.get("click",b)),this._selectedIndex!==n&&(this._selectedIndex=n,this._onSelected(this._selectedIndex));break}}},r._onSelected=function(t,e){void 0===e&&(e=!0);for(var i=.2,n=this.tabbar.uiTransfrom.width,o=this.spaceX,r=(n-o*(this._nodes.length-1))/this._nodes.length*.9,a=n-(r+o)*(this._nodes.length-1),s=-n/2,l=0;l<this._nodes.length;l++){var h=this._nodes[l],c=l===t,u=c?a:r,d=f(h.position);d.x=s+u/2;var p=h.getChildByName("focus"),b=h.getChildByName("ico"),_=h.getChildByName("title"),m=c?255:0,v=f(b.position);v.y=c?0:-b.uiTransfrom.height/2;var y=c?1.2:.9,T=f(y,y,1),w=c?1:0,C=f(w,w,1);e?(g(h).to(i,{position:d}).start(),g(h.uiTransfrom).to(i,{width:u}).start(),g(p).to(i,{opacity:m}).start(),g(b).to(i,{position:v,scale:T}).start(),g(_).to(i,{scale:C}).start()):(h.position=d,h.uiTransfrom.width=u,p.opacity=m,b.position=v,b.scale=T,_.scale=C),s+=u+o}this._loadPage(t)},r._loadPage=function(t){var e=this.items[t];e.node||(e.node=d(e.page),e.node.parent=this.container),e.node.setSiblingIndex(-1);for(var i=0;i<this.items.length;i++){var n=this.items[i];n.node&&(n.node.active=i===t)}this.scheduleOnce((function(){w.unlock()}),.2),w.lock()},e}(m)).prototype,"items",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=e(A.prototype,"spaceX",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=e(A.prototype,"statusBar",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(A.prototype,"tabbar",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(A.prototype,"container",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=A))||U));r._RF.pop()}}}));

System.register("chunks:///_virtual/TaskPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./MsgMgr.ts","./UISprite.ts","./VirtualList.ts","./ServerUtils.ts","./Utils.ts","./Bundle.ts","./Core.ts","./IGame.ts","./GameUtils.ts"],(function(e){var t,r,i,n,a,o,l,u,d,s,m,f,g,p,c,h,y,v,N,b,w,T,_,G,I,k,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,l=e._decorator,u=e.color,d=e.Label,s=e.Sprite,m=e.Node,f=e.AudioClip,g=e.Button,p=e.tween,c=e.Component},function(e){h=e.AudioMgr},function(e){y=e.MsgMgr},function(e){v=e.UISprite},function(e){N=e.VirtualList},function(e){b=e.getServerTimestamp},function(e){w=e.Utils},function(e){T=e.Bundle},function(e){_=e.Core},function(e){G=e.GameAction},function(e){I=e.loadSpriteFrame,k=e.getEnDailyTask,C=e.getAchievementCountInDay}],execute:function(){var P,D,S,F,L,M,B,R,z,A,E,U,x,V,K;o._RF.push({},"fcace2UanxKmJRd9Su2Vrl/","TaskPage",void 0);var O=l.ccclass,q=l.property,H=u("FFFFDB"),j=u("FFFFFF");e("TaskPage",(P=O("TaskPage"),D=q(d),S=q(s),F=q(d),L=q(d),M=q(m),B=q(N),P((A=t((z=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"clockLabel",A,n(t)),i(t,"fullProgressSprite",E,n(t)),i(t,"fullProgressLabel",U,n(t)),i(t,"fullGetLabel",x,n(t)),i(t,"fullRedDot",V,n(t)),i(t,"list",K,n(t)),t._items=void 0,t._canGetFullTask=void 0,t._fullProgressSpriteTween=void 0,t}r(t,e);var o=t.prototype;return o.onLoad=function(){var e=this,t=T.audio.get("add-money",f);this.list.init(null,(function(r,i){var n=e._items[i],a=n.didNum<n.needNum;r.getChildByPath("bg").getComponent(s).color=a||n.didGet?j:H;var o="Gold"===n.rewardType?"texture/ui/ico-gold":"texture/ui/ico-diamond";I(r.getChildByPath("frame/ico").getComponent(v),o),r.getChildByPath("frame/label").getComponent(d).string=""+n.rewardNum*n.needNum;var l=k(n.type,n.title);console.log("bbbbb========",l),r.getChildByPath("title").getComponent(d).string=l,r.getChildByPath("progress/progress").getComponent(s).fillRange=n.didNum/n.needNum,r.getChildByPath("progress/label").getComponent(d).string=n.didNum+"/"+n.needNum;var u=r.getChildByPath("get");if(u.active=!n.didGet,u.off(g.EventType.CLICK),u.active){var m=u.getComponent(g);m.enabled=!a,m.setValue("ClickAudio",t),u.on(g.EventType.CLICK,(function(){if(!n.didGet){n.didGet=!0;var t=_.userInfo.day.task;t[n.type+"_didGet"]=!0,_.userInfo.day.task=t,"Gold"===n.rewardType?_.userInfo.gold+=n.rewardNum*n.needNum:_.userInfo.diamond+=n.rewardNum*n.needNum,e._reload(),e.list.reloadWithIndex(i)}})),u.getComponent(s).grayscale=a}r.getChildByPath("check").active=n.didGet,r.getChildByPath("mask").active=n.didGet}),null),this.fullProgressSprite.fillRange=0},o.onEnable=function(){this._reload(!0),y.on(G.onDayEnd,this._reload,this)},o.onDisable=function(){y.off(G.onDayEnd,this._reload,this)},o.update=function(e){var t=_.userInfo.secondsMidnight;this.clockLabel.string=w.formatTime(t,"hh:mm:ss")},o.onClickFullTask=function(){if(this._canGetFullTask){var e=_.userInfo.day.task;e.fullTaskDidGet=!0,_.userInfo.day.task=e,_.userInfo.diamond+=200,h.inst.playOneShot(T.audio.get("reward",f)),this._reload()}},o._reload=function(e){var t=this;void 0===e&&(e=!1),e&&(this._items=this._getTaskItems(),this.list.num=this._items.length);var r=_.userInfo.day.task.fullTaskDidGet,i=this._items.length,n=this._items.filter((function(e){return e.didGet})).length,a=n>=i&&!r;this._canGetFullTask=a,this._fullProgressSpriteTween&&this._fullProgressSpriteTween.stop(),this._fullProgressSpriteTween=p(this.fullProgressSprite).to(.5,{fillRange:n/i}).call((function(){t._fullProgressSpriteTween=null})).start(),this.fullProgressLabel.string=n+"/"+i,this.fullGetLabel.string=r?"Received":"200",this.fullRedDot.active=a},o._getSecondsUntilMidnight=function(){var e=new Date(b()),t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0).getTime()-e.getTime();return Math.floor(t/1e3)},o._getTaskItems=function(){var e=this._getData(),t=_.userInfo.day.task;if(!t){t={};for(var r,i=a(e);!(r=i()).done;){var n=r.value;t[n.type+"_needNum"]=n.getNeedNum(),t[n.type+"_didGet"]=!1}t.fullTaskDidGet=!1,_.userInfo.day.task=t}for(var o,l=a(e);!(o=l()).done;){var u=o.value;u.needNum=t[u.type+"_needNum"],u.didNum=Math.min(C(u.type),u.needNum),u.didGet=t[u.type+"_didGet"],u.title=u.title.replace("vvv",""+u.needNum)}return e.sort((function(e,t){return e.didGet?1:t.didGet?-1:t.didNum/t.needNum-e.didNum/e.needNum})),e},o._getData=function(){return[{type:"killMonster",rewardType:"Gold",rewardNum:30,title:"打败vvv个怪物",getNeedNum:function(){return 50*Math.randomInt2(1,4)}},{type:"passedLevel",rewardType:"Diamond",rewardNum:50,title:"通过vvv次关卡",getNeedNum:function(){return 1}},{type:"upgradeEquipment",rewardType:"Diamond",rewardNum:10,title:"升级vvv次装备",getNeedNum:function(){return Math.randomInt2(1,2)}},{type:"degradeEquipment",rewardType:"Gold",rewardNum:300,title:"分解vvv次装备",getNeedNum:function(){return 5*Math.randomInt2(1,3)}},{type:"buyChestInShop",rewardType:"Diamond",rewardNum:20,title:"打开vvv次装备宝箱",getNeedNum:function(){return 1}},{type:"buyCompositesInShop",rewardType:"Gold",rewardNum:2e3,title:"购买vvv次升级材料",getNeedNum:function(){return Math.randomInt2(1,2)}},{type:"buyInDailyShop",rewardType:"Gold",rewardNum:2e3,title:"每日商店中购买vvv次",getNeedNum:function(){return Math.randomInt2(1,2)}},{type:"buyInDailyReward",rewardType:"Gold",rewardNum:2e3,title:"领取商店的每日福利",getNeedNum:function(){return 1}},{type:"getOfflineReward",rewardType:"Gold",rewardNum:2e3,title:"领取挂机奖励",getNeedNum:function(){return 1}},{type:"lookAdVideo",rewardType:"Diamond",rewardNum:50,title:"看vvv次广告视频",getNeedNum:function(){return Math.randomInt2(1,2)}}]},t}(c)).prototype,"clockLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(z.prototype,"fullProgressSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(z.prototype,"fullProgressLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(z.prototype,"fullGetLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(z.prototype,"fullRedDot",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(z.prototype,"list",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=z))||R));o._RF.pop()}}}));

System.register("chunks:///_virtual/TimerInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SaveProp.ts"],(function(e){var t,i,r,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy},function(e){o=e.SaveProp}],execute:function(){var n,a,l,u,s,c,p,d,b,f,g;r._RF.push({},"94babGCjZJESahHsoUWeOzl","TimerInfo",void 0);var h=(n=o.decorator(0),a=o.decorator(0),l=o.decorator(0),u=o.decorator(0),s=o.decorator(0),p=t((c=function(){i(this,"getAdGold",p,this),i(this,"getAdDiamond",d,this),i(this,"getAdEnergy",b,this),i(this,"getFreeChest",f,this),i(this,"offlineRewardFast",g,this),o.initObject(this)}).prototype,"getAdGold",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(c.prototype,"getAdDiamond",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(c.prototype,"getAdEnergy",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=t(c.prototype,"getFreeChest",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(c.prototype,"offlineRewardFast",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c);e("TimerInfo",new h);r._RF.pop()}}}));

System.register("chunks:///_virtual/TimerSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SaveProp.ts"],(function(t){var e,i,r,s,n,a,o,c,u,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,s=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,o=t._decorator,c=t.director,u=t.System},function(t){l=t.SaveProp}],execute:function(){var p,m,h,f;a._RF.push({},"29fabwyymRNLqVFh4qatgOM","TimerSystem",void 0);o.ccclass,o.property,t("TimerSystem",(p=l.decorator(null),(f=function(t){function e(){var e;return e=t.call(this)||this,r(e,"lastTime",h,s(e)),e._updateDt=0,e._objects=[],l.initObject(s(e)),e}i(e,t);var a=e.prototype;return a.update=function(t){if(this._updateDt+=t,this._updateDt>=1){var i;this._updateDt=0;var r=this._getNow(),s=null!=(i=this.lastTime)?i:r;this.lastTime=r;var n=(r-s)/1e3;this._tick(n*e.timeScale)}},a._getNow=function(){return Date.now()},a._tick=function(t){for(var e,i=n(this._objects);!(e=i()).done;)for(var r=e.value,s=0,a=Object.keys(r);s<a.length;s++){var o=a[s],c=r[o];"number"==typeof c&&(r[o]=Math.max(0,c-t))}},e.registerSystem=function(t){void 0===t&&(t=[]),this.instance||(this.instance=new e,this.instance._objects=t,c.registerSystem("TimerSystem",this.instance,u.Priority.LOW))},e}(u)).timeScale=1,f.instance=void 0,h=e((m=f).prototype,"lastTime",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m));a._RF.pop()}}}));

System.register("chunks:///_virtual/Toast.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DialogController.ts","./Bundle.ts"],(function(e){var t,r,n,o,a,i,l,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,l=e.Label,c=e.Prefab},function(e){s=e.DialogController},function(e){u=e.Bundle}],execute:function(){var p,f,h,g,y;a._RF.push({},"f62deJ4+GlJDpScPgWPM44M","Toast",void 0);var d=i.ccclass,v=i.property;e("Toast",(p=d("Toast"),f=v(l),p((y=t((g=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,n(t,"label",y,o(t)),t}r(t,e),t._getPrefab=function(){return u.game.get("prefab/ui/toast",c)};var a=t.prototype;return a.open=function(){var t;this._fadeInAnim="fromTop";for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];(t=e.prototype.open).call.apply(t,[this].concat(n))},a._open=function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[0],a=r[1],i=void 0===a?2:a;this.label.string=o,this.scheduleOnce((function(){e.node.destroy()}),i)},t}(s)).prototype,"label",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=g))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/TopController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIMgr.ts","./Controller.ts"],(function(t){var n,o,r,e,i,c;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,e=t.instantiate},function(t){i=t.UIMgr},function(t){c=t.Controller}],execute:function(){var l;o._RF.push({},"a4afdiewn1P85ft57N6OJJy","TopController",void 0);var p=r.ccclass;r.property,t("TopController",p("TopController")(l=function(t){function o(){return t.apply(this,arguments)||this}n(o,t),o.show=function(){var t=this._getPrefab(),n=e(t);n.parent=i.instance.topParent;var r=n.getComponent(o);return r.open.apply(r,arguments),r};var r=o.prototype;return r.open=function(){this._open.apply(this,arguments)},r.close=function(){this.node.destroy()},o._getPrefab=function(){return null},r._open=function(){},o}(c))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/TweenUtils.ts",["cc"],(function(t){var i,o,n,a;return{setters:[function(t){i=t.cclegacy,o=t.v3,n=t.tween,a=t.Vec3}],execute:function(){i._RF.push({},"2f4eaFZlI9DPbrDY9uFy2QP","TweenUtils",void 0);var e=o();t("TweenUtils",function(){function t(){}return t.fadeIn=function(t,i,o,a){if(void 0===o&&(o=null),void 0===a&&(a=.5),"fromTop"===i){var e=t.getPosition().add3f(0,100,0),l=t.getPosition();return t.position=e,this.modifyOpacity(t,0,255,null,a/3),n(t).to(a,{position:l},{easing:"backOut"}).call(o).start()}if("fromBottom"===i){var r=t.getPosition().add3f(0,-100,0),c=t.getPosition();return t.position=r,this.modifyOpacity(t,0,255,null,a/3),n(t).to(a,{position:c},{easing:"backOut"}).call(o).start()}if("fromBig"===i){var s=t.getScale().multiplyScalar(1.5),u=t.getScale();return t.scale=s,this.modifyOpacity(t,0,255,null,a/3),n(t).to(a,{scale:u},{easing:"backOut"}).call(o).start()}if("fromSmall"===i){var f=t.getScale().multiplyScalar(.5),d=t.getScale();return t.scale=f,this.modifyOpacity(t,0,255,null,a/3),n(t).to(a,{scale:d},{easing:"backOut"}).call(o).start()}},t.fadeOut=function(t,i,o){return void 0===i&&(i=null),void 0===o&&(o=.1),this.modifyOpacity(t,255,0,i,o)},t.modifyOpacity=function(t,i,o,a,e){return void 0===a&&(a=null),void 0===e&&(e=.2),t.opacity=i,n(t).to(e,{opacity:o}).call(a).start()},t.modifyPositionByArc=function(t,i,l,r,c){var s=o(t.position),u=o(i),f=function(t){return a.lerp(e,s,u,t),e.y+=Math.sin(t*Math.PI)*l,e};return c&&t.lookPosition(f(.001)),n({t:0}).to(r,{t:1},{onUpdate:function(i,o){var n=f(o);c&&t.lookPosition(n),t.setPosition(n)}}).start()},t.shake=function(t,i,o,a){return void 0===i&&(i=null),void 0===o&&(o=.1),void 0===a&&(a=30),n(t).to(o/5*2,{angle:a}).to(o/5*2,{angle:-a}).to(o/5,{angle:0}).call(i).start()},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UIMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,r,i,n,s,a,d,c;return{setters:[function(t){e=t.createClass,o=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,i=t.Node,n=t.Layers,s=t.director,a=t.RenderRoot2D,d=t.Widget,c=t.NodeEventType}],execute:function(){r._RF.push({},"8c22fsoIpRKna24Iqd0ezNM","UIMgr",void 0),t("UIMgr",function(){function t(){var t=this;this._root=void 0,this.dialogParent=void 0,this.topParent=void 0,this.persistParent=void 0,this._root=this._createNode("UI-Root",!0),this.dialogParent=this._createNode("UI-Dialog"),this.topParent=this._createNode("UI-Top"),this.persistParent=this._createNode("UI-Persist"),this._root.on(c.SCENE_CHANGED_FOR_PERSISTS,(function(){for(var e,r=o(t.dialogParent.children);!(e=r()).done;){e.value.destroy()}for(var i,n=o(t.topParent.children);!(i=n()).done;){i.value.destroy()}}))}return t.prototype._createNode=function(t,e){void 0===e&&(e=!1);var o=new i(t);o.layer=n.Enum.UI_2D,e?(s.addPersistRootNode(o),o.addComponent(a)):o.parent=this._root;var r=o.addComponent(d);return r.top=r.bottom=r.left=r.right=0,r.isAlignTop=r.isAlignBottom=r.isAlignLeft=r.isAlignRight=!0,o},e(t,null,[{key:"instance",get:function(){var e;return null!=(e=this._instance)?e:this._instance=new t}}]),t}())._instance=void 0,r._RF.pop()}}}));

System.register("chunks:///_virtual/UIScrollView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts"],(function(t){var e,o,i,n,s,c,a,l,h,r,_,u,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.createForOfIteratorHelperLoose},function(t){c=t.cclegacy,a=t._decorator,l=t.v2,h=t.Node,r=t.Vec2,_=t.Mask,u=t.tween,f=t.v3},function(t){d=t.Controller}],execute:function(){var T,v,p,g,S;c._RF.push({},"18c0a/57v5AIqwhSUz3poHP","UIScrollView",void 0);var C=a.ccclass,m=a.property,w=l(),y=l(),E=l(),O=(l(),l()),M=l();t("UIScrollView",(T=C("UIScrollView"),v=m(h),T((S=e((g=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return e=t.call.apply(t,[this].concat(s))||this,i(e,"content",S,n(e)),e._scrollOffset=new r,e._scrollMaxOffset=new r,e._isScrolling=!1,e._touchNode=void 0,e._movingInertia=l(),e._autoMoveTween=void 0,e._zoomScaleTween=void 0,e._clickCall=void 0,e._clickNodes=[],e}o(e,t);var c=e.prototype;return c.onLoad=function(){this.node.addUniqueComponent(_)},c.onEnable=function(){this._onContainerSizeChanged(),this.content.on(h.EventType.SIZE_CHANGED,this._onContainerSizeChanged,this),this.node.on(h.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(h.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(h.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(h.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},c.onDisable=function(){this.content.off(h.EventType.SIZE_CHANGED,this._onContainerSizeChanged,this),this.node.off(h.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(h.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(h.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(h.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},c.update=function(t){this.content.setPosition(-this._scrollOffset.x,this._scrollOffset.y+this.node.uiTransfrom.height/2,0)},c.init=function(t){this._clickCall=t},c.addClickNode=function(t){this._clickNodes.push(t)},c.deleteClickNode=function(t){var e=this._clickNodes.indexOf(t);-1!==e&&this._clickNodes.splice(e,1)},c.clearClickNodes=function(){this._clickNodes.length=0},c._onContainerSizeChanged=function(){this._scrollMaxOffset.x=Math.max(0,this.content.uiTransfrom.width-this.node.uiTransfrom.width),this._scrollMaxOffset.y=Math.max(0,this.content.uiTransfrom.height-this.node.uiTransfrom.height)},c._addOffset=function(t,e){var o=this._scrollOffset;o.add2f(-t,e),o.clampf(r.ZERO,this._scrollMaxOffset)},c._onTouchStart=function(t){if(t.propagationStopped=!0,this._isScrolling=!1,this._clearAutoMoveTween(),this._clearMovingInertia(),this._clickCall)for(var e,o=t.getLocation(O),i=t.windowId,n=s(this._clickNodes);!(e=n()).done;){var c=e.value;if(c._uiProps.uiTransformComp.hitTest(o,i)){this._touchNode=c,this._zoomScaleTween=u(c).delay(.1).to(.2,{scale:f(1,1,1).multiplyScalar(1.1)}).start();break}}},c._onTouchMove=function(t){t.propagationStopped=!0;var e=t.getUIDelta(w);if(this._isScrolling)this.unschedule(this._clearMovingInertia),r.copy(y,this._scrollOffset),this._addOffset(e.x,e.y),r.copy(this._movingInertia,this._scrollOffset).subtract(y),this.scheduleOnce(this._clearMovingInertia,.1);else{var o=t.getUIStartLocation(O),i=t.getUILocation(M);r.distance(o,i)>10&&(this._isScrolling=!0,this._touchNode&&(this._clearZoomScaleTween(),this._zoomScaleTween=u(this._touchNode).to(.2,{scale:f(1,1,1)}).start(),this._touchNode=null))}},c._onTouchEnd=function(t){var e=this;if(t.propagationStopped=!0,this._isScrolling){if(this.unschedule(this._clearMovingInertia),0!==this._movingInertia.x||0!==this._movingInertia.y){var o={t:1};this._autoMoveTween=u(o).to(1,{t:0},{easing:"linear",onUpdate:function(){E.set(e._movingInertia).multiplyScalar(o.t),e._addOffset(-E.x,E.y)}}).call((function(){e._movingInertia.set(0,0),e._autoMoveTween=null})).start()}}else this._touchNode&&(this._clearZoomScaleTween(),this._zoomScaleTween=u(this._touchNode).to(.2,{scale:f(1,1,1)}).start(),this._clickCall&&this._clickCall(this._touchNode),this._touchNode=null)},c._clearAutoMoveTween=function(){this._autoMoveTween&&(this._autoMoveTween.stop(),this._autoMoveTween=null)},c._clearZoomScaleTween=function(){this._zoomScaleTween&&(this._zoomScaleTween.stop(),this._zoomScaleTween=null)},c._clearMovingInertia=function(){this._movingInertia.set(0,0)},e}(d)).prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=g))||p));c._RF.pop()}}}));

System.register("chunks:///_virtual/UISprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts"],(function(t){var e,i,r,o,n,p,s,a,h,l,c,u,y,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createClass},function(t){p=t.cclegacy,s=t._decorator,a=t.SpriteFrame,h=t.Enum,l=t.Node,c=t.CCObject,u=t.Sprite,y=t.Color},function(t){d=t.Controller}],execute:function(){var _,f,S,C,g,m,v,b,F,E,U;p._RF.push({},"62339NLlG5BfqCJK6/AnbrJ","UISprite",void 0);var w=s.ccclass,D=s.property,N=s.executeInEditMode,I=t("UISpriteType",function(t){return t[t.Fill=0]="Fill",t[t.Contain=1]="Contain",t[t.Cover=2]="Cover",t[t.None=3]="None",t}({}));t("UISprite",(_=w("UISprite"),f=N(!0),S=D(a),C=D(a),g=D({type:h(I)}),m=D({type:h(I)}),_(v=f((F=e((b=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),p=0;p<i;p++)n[p]=arguments[p];return e=t.call.apply(t,[this].concat(n))||this,r(e,"_color",F,o(e)),r(e,"_spriteFrame",E,o(e)),r(e,"_type",U,o(e)),e._sprite=void 0,e}i(e,t);var p=e.prototype;return p.onEnable=function(){this.node.on(l.EventType.SIZE_CHANGED,this._onUpdateSprite,this),this.node.on(l.EventType.ANCHOR_CHANGED,this._onUpdateSprite,this),this._onUpdateSprite(),this._sprite.enabled=!0},p.onDisable=function(){this.node.off(l.EventType.SIZE_CHANGED,this._onUpdateSprite,this),this.node.off(l.EventType.ANCHOR_CHANGED,this._onUpdateSprite,this),this._sprite.enabled=!1},p.getSprite=function(){return this._sprite},p._onUpdateSprite=function(){if(!this._sprite){var t="DRAW_SPRITE_NODE",e=this.node.getChildByName(t);if(!e){(e=new l(t)).hideFlags|=c.Flags.HideInHierarchy,this.node.insertChild(e,0);var i=e.addComponent(u);i.sizeMode=u.SizeMode.CUSTOM,i.trim=!1}this._sprite=e.getComponent(u)}var r=this.spriteFrame;if(this._sprite.spriteFrame=r,this._sprite.color=this.color,r){var o,n,p=this.node.uiTransfrom.anchorPoint,s=this.node.uiTransfrom.contentSize,a=-(p.x-.5)*s.width,h=-(p.y-.5)*s.height;this._sprite.node.setPosition(a,h,0);var y=r.originalSize,d=y.width,_=y.height;if(this.type===I.Fill)o=s.width,n=s.height;else if(this.type===I.Contain){var f=s.width/d,S=s.height/_,C=Math.min(f,S);o=d*C,n=_*C}else if(this.type===I.Cover){var g=s.width/d,m=s.height/_,v=Math.max(g,m);o=d*v,n=_*v}else this.type===I.None&&(o=d,n=_);this._sprite.node.uiTransfrom.setContentSize(o,n)}},n(e,[{key:"color",get:function(){return this._color},set:function(t){this._color=t,this._onUpdateSprite()}},{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(t){this._spriteFrame=t,this._onUpdateSprite()}},{key:"type",get:function(){return this._type},set:function(t){this._type=t,this._onUpdateSprite()}}]),e}(d)).prototype,"_color",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.WHITE.clone()}}),e(b.prototype,"color",[D],Object.getOwnPropertyDescriptor(b.prototype,"color"),b.prototype),E=e(b.prototype,"_spriteFrame",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e(b.prototype,"spriteFrame",[C],Object.getOwnPropertyDescriptor(b.prototype,"spriteFrame"),b.prototype),U=e(b.prototype,"_type",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.Fill}}),e(b.prototype,"type",[m],Object.getOwnPropertyDescriptor(b.prototype,"type"),b.prototype),v=b))||v)||v));p._RF.pop()}}}));

System.register("chunks:///_virtual/UserInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MsgMgr.ts","./SaveProp.ts","./ServerUtils.ts","./Utils.ts","./IGame.ts"],(function(e){var i,t,r,a,n,l,o,s,u,h,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.createClass,r=e.initializerDefineProperty},function(e){a=e.cclegacy},function(e){n=e.MsgMgr},function(e){l=e.SaveProp},function(e){o=e.getServerTimestamp},function(e){s=e.Utils},function(e){u=e.MaxEnergy,h=e.GameAction,c=e.EnergyCreateDelay}],execute:function(){var d,p,b,g,f,y,m,w,v,z,T,D,_,I,M,R,S,U,E,G,q,P,j,k,x,F,O,L,A,C,H,Y,B,K,N,Z,J,Q,V,W,X,$,ee,ie,te,re,ae,ne,le,oe,se,ue,he,ce,de,pe;a._RF.push({},"5daddur+DZPeKO3r6guqeAg","UserInfo",void 0);e("UserInfo",(d=l.decorator(null),p=l.decorator(""),b=l.decorator(1),g=l.decorator(0),f=l.decorator(1),y=l.decorator(0),m=l.decorator(0),w=l.decorator(u),v=l.decorator(0),z=l.decorator({p1:null,p2:null,p3:null,p4:null}),T=l.decorator([]),D=l.decorator({}),_=l.decorator({}),I=l.decorator(null),M=l.decorator(0),R=l.decorator([]),S=l.decorator(!0),U=l.decorator(!0),E=l.decorator(!1),G=l.decorator([]),P=i((q=function(){function e(){r(this,"userID",P,this),r(this,"dayTag",j,this),this._day=void 0,r(this,"passLevel",k,this),r(this,"exp",x,this),r(this,"level",F,this),r(this,"gold",O,this),r(this,"diamond",L,this),r(this,"energy",A,this),r(this,"energyTime",C,this),r(this,"equipped",H,this),r(this,"equipments",Y,this),r(this,"composites",B,this),r(this,"achievement",K,this),r(this,"reward",N,this),r(this,"offlineRewardTime",Z,this),r(this,"redeems",J,this),r(this,"firstGift",Q,this),r(this,"gameGuide",V,this),r(this,"vip",W,this),r(this,"wheel",X,this),this.secondsMidnight=0,l.initObject(this),this.userID||(this.userID=s.randomUUID())}var i=e.prototype;return i.reloadHalfSecond=function(){this.day.isDayEnd()&&(this._day=null,n.emit(h.onDayEnd)),this.secondsMidnight=this._getSecondsMidnight();var e=o(),i=this.energy;if(i>=u)this.energyTime=e;else{var t=this.energyTime,r=Math.floor((e-t)/1e3/c);r>0&&(i=Math.min(u,i+r),this.energyTime=e,this.energy=i)}0===this.offlineRewardTime&&(this.offlineRewardTime=e)},i._getSecondsMidnight=function(){var e=new Date(o()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0).getTime()-e.getTime();return Math.floor(i/1e3)},t(e,[{key:"day",get:function(){return this._day||(this._day=new be(this)),this._day}}]),e}()).prototype,"userID",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=i(q.prototype,"dayTag",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(q.prototype,"passLevel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=i(q.prototype,"exp",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(q.prototype,"level",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(q.prototype,"gold",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=i(q.prototype,"diamond",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=i(q.prototype,"energy",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(q.prototype,"energyTime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(q.prototype,"equipped",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=i(q.prototype,"equipments",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(q.prototype,"composites",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=i(q.prototype,"achievement",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(q.prototype,"reward",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=i(q.prototype,"offlineRewardTime",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=i(q.prototype,"redeems",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=i(q.prototype,"firstGift",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=i(q.prototype,"gameGuide",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=i(q.prototype,"vip",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=i(q.prototype,"wheel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q));var be=e("UserInfoDay",($=l.decorator(!0),ee=l.decorator(!0),ie=l.decorator(!0),te=l.decorator(!0),re=l.decorator(null),ae=l.decorator(null),ne=l.decorator({}),oe=i((le=function(){function e(e){r(this,"dyRewardEnable",oe,this),r(this,"goldReward",se,this),r(this,"diamondReward",ue,this),r(this,"wheel",he,this),r(this,"shopItems",ce,this),r(this,"task",de,this),r(this,"achievement",pe,this),this._userInfo=void 0,this._userInfo=e;var i=this._getTag();e.dayTag.length>0&&i!==e.dayTag&&l.removeObject(this,e.dayTag),e.dayTag=i,l.initObject(this,i)}var i=e.prototype;return i.isDayEnd=function(){var e=this._getTag();return this._userInfo.dayTag.length>0&&e!==this._userInfo.dayTag},i._getTag=function(){var e=new Date(o()),i=e.getFullYear(),t=e.getMonth()+1,r=e.getDate();return Number(""+i%100+t+r).toString(36)},e}()).prototype,"dyRewardEnable",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=i(le.prototype,"goldReward",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=i(le.prototype,"diamondReward",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=i(le.prototype,"wheel",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=i(le.prototype,"shopItems",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=i(le.prototype,"task",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=i(le.prototype,"achievement",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le));a._RF.pop()}}}));

System.register("chunks:///_virtual/UserLevelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./IGame.ts","./GameUtils.ts"],(function(e){var r,t,i,l,n,o,a,s,u,p,c,f,h,v,b;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,a=e.Label,s=e.Sprite,u=e.Node,p=e.macro,c=e.clamp01,f=e.Component},function(e){h=e.Core},function(e){v=e.PlayerMaxLevel},function(e){b=e.getUpExp}],execute:function(){var d,g,y,L,m,_,C,U,w;n._RF.push({},"f805bOrao1MlojgUeI+NuO7","UserLevelController",void 0);var E=o.ccclass,I=o.property;e("UserLevelController",(d=E("UserLevelController"),g=I(a),y=I(s),L=I(u),d((C=r((_=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r=e.call.apply(e,[this].concat(n))||this,i(r,"label",C,l(r)),i(r,"sprite",U,l(r)),i(r,"spriteBg",w,l(r)),r}t(r,e);var n=r.prototype;return n.onEnable=function(){this.schedule(this._updateLevel,.1,p.REPEAT_FOREVER),this._updateLevel()},n.onDisable=function(){this.unschedule(this._updateLevel)},n._updateLevel=function(){this.label.string=""+h.userInfo.level;var e=h.userInfo.level>=v?1:c(h.userInfo.exp/b());this.sprite.node.uiTransfrom.width=this.spriteBg.uiTransfrom.width*e},r}(f)).prototype,"label",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=r(_.prototype,"sprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=r(_.prototype,"spriteBg",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=_))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ServerUtils.ts"],(function(t){var e,r,n,i,a,o,u,h,s,c;return{setters:[function(t){e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){n=t.cclegacy,i=t.view,a=t.size,o=t.Vec3,u=t.v2,h=t.v3,s=t.sys},function(t){c=t.getServerTimestamp}],execute:function(){n._RF.push({},"b35f5vlW1lICZh4vBR6nuBZ","Utils",void 0);t("Utils",function(){function t(){}return t.getCameraSize=function(t){var e=i.getVisibleSize(),r=e.height/t.orthoHeight/2;return a(e.width/r,e.height/r)},t.formatTime=function(t,e,r){void 0===e&&(e="hh:mm:ss"),void 0===r&&(r=!0);var n=Math.floor(Math.max(0,t)),i=e,a=i.indexOf("dd");if(a>=0){var o=Math.floor(n/3600/24);i=i.replace("dd",o>9?""+o:(r?"0":"")+o),n-=3600*o*24}if((a=i.indexOf("hh"))>=0){var u=Math.floor(n/3600);i=i.replace("hh",u>9?""+u:(r?"0":"")+u),n-=3600*u}if((a=i.indexOf("mm"))>=0){var h=Math.floor(n/60);i=i.replace("mm",h>9?""+h:(r?"0":"")+h),n-=60*h}if((a=i.indexOf("ss"))>=0){var s=n;i=i.replace("ss",s>9?""+s:(r?"0":"")+s)}return i},t.awaitAfter=function(){var t=e(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){setTimeout(t,1e3*e)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.randomUUID=function(){return(""+Date.now().toString(36)+Math.floor(1e5*Math.random()).toString(36)).toUpperCase()},t.hash=function(t){var e=0;if(0===t.length)return e;for(var r=0;r<t.length;r++){e=(e<<5)-e+t.charCodeAt(r),e&=e}return e},t.hashStr=function(t){return this.hash(t).toString(36)},t.getRectRandomPos=function(t){var e=new o,r=t.width*Math.random(),n=t.height*Math.random();return e.x=t.x+r,e.y=t.y+n,e},t.getCircleRandomPos=function(t){var e=2*(Math.random()-.5)*t,r=2*(Math.random()-.5)*t;return u(e,r)},t.getCirclePos=function(t,e){var r=Math.PI/180*e,n=Math.cos(r)*t,i=Math.sin(r)*t;return h(n,i,0)},t.isDay6=function(){return 6===new Date(c()).getDay()},t.getSafeArea=function(){var t=s.getSafeAreaRect();return{top:i.getVisibleSize().height-t.y-t.height,bottom:t.y}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/VirtualList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts"],(function(t){var i,e,o,s,n,h,a,r,l,c,_,u,d,f,p,g,v,T,m,y,w,C,S;return{setters:[function(t){i=t.inheritsLoose,e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty,s=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose,h=t.createClass},function(t){a=t.cclegacy,r=t._decorator,l=t.ccenum,c=t.v2,_=t.rect,u=t.Rect,d=t.NodePool,f=t.Vec3,p=t.Vec2,g=t.Size,v=t.Mask,T=t.Node,m=t.UITransform,y=t.tween,w=t.v3,C=t.instantiate},function(t){S=t.Controller}],execute:function(){var z,x,O,M,R,L,E,I,N,b,H,P,V,U,k,Y,A;a._RF.push({},"d715fbv2zlE371z/qYhWJJ6","VirtualList",void 0);var F=r.ccclass,X=r.property,G=1.1,Z=.2,D=1,B=t("VRect",function(t){function e(){for(var i,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(i=t.call.apply(t,[this].concat(o))||this).cellIndex=0,i.offsetX=0,i.offsetY=0,i.priority=0,i}return i(e,t),e}(u)),q=t("ScrollPositionType",function(t){return t[t.Start=0]="Start",t[t.Center=1]="Center",t[t.End=2]="End",t}({})),J=t("VirtualListLayoutType",function(t){return t[t.ListVertical=0]="ListVertical",t[t.ListHorizontal=1]="ListHorizontal",t[t.GridVertical=2]="GridVertical",t[t.GridHorizontal=3]="GridHorizontal",t[t.Custom=4]="Custom",t}({}));l(J);var W=c(),j=c(),K=c(),Q=c(),$=c(),tt=c(),it=_();t("VirtualList",(z=F("VirtualList"),x=X({type:J,displayName:"布局"}),O=X({visible:function(){return this.layoutType!==J.Custom&&this.layoutType!==J.ListHorizontal}}),M=X({visible:function(){return this.layoutType!==J.Custom&&this.layoutType!==J.ListHorizontal}}),R=X({visible:function(){return this.layoutType!==J.Custom&&this.layoutType!==J.ListVertical}}),L=X({visible:function(){return this.layoutType!==J.Custom&&this.layoutType!==J.ListVertical}}),E=X({visible:function(){return this.layoutType!==J.Custom&&this.layoutType!==J.ListVertical}}),I=X({visible:function(){return this.layoutType!==J.Custom&&this.layoutType!==J.ListHorizontal}}),z((H=e((b=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),h=0;h<e;h++)n[h]=arguments[h];return i=t.call.apply(t,[this].concat(n))||this,o(i,"layoutType",H,s(i)),o(i,"paddingTop",P,s(i)),o(i,"paddingBottom",V,s(i)),o(i,"paddingLeft",U,s(i)),o(i,"paddingRight",k,s(i)),o(i,"spacingX",Y,s(i)),o(i,"spacingY",A,s(i)),i.zoomScale=G,i.zoomTime=Z,i.inertiaTime=D,i._cloneNode=void 0,i._content=void 0,i._nodePool=new d,i._num=0,i._containerOffset=new f,i._drawRect=new u,i._scrollOffset=new p,i._scrollMaxOffset=new p,i._contentSize=new g,i._rects=[],i._isTouching=!1,i._isScrolling=!1,i._touchNode=void 0,i._movingInertia=c(),i._autoMoveTween=void 0,i._zoomScaleTween=void 0,i._map=new Map,i._map2=new Map,i._setRectCall=void 0,i._setCellCall=void 0,i._cellClickCall=void 0,i}i(e,t);var a=e.prototype;return a.onLoad=function(){this.node.addUniqueComponent(v),this._cloneNode=this.node.children[0],this._cloneNode.parent=null,this._content=new T,this._content.parent=this.node,this._content.addComponent(m).setAnchorPoint(0,1),this._onSizeChanged()},a.init=function(t,i,e){this._setRectCall=t,this._setCellCall=i,this._cellClickCall=e},a.scrollToTop=function(t){void 0===t&&(t=1),this.scrollTo(p.ZERO,t)},a.scrollToBottom=function(t){void 0===t&&(t=1),this.scrollTo(this._scrollMaxOffset,t)},a.scrollToIndex=function(t,i,e){void 0===i&&(i=q.Start),void 0===e&&(e=1);var o=this._rects[t];if(o){var s=c();i===q.Start?(s.set(o.x,o.y),s.subtract2f(this.spacingX/2,this.spacingY/2)):i===q.Center?s.set(o.x-(this._drawRect.width-o.width)/2,o.y-(this._drawRect.height-o.height)/2):i===q.End&&(s.set(o.x-(this._drawRect.width-o.width),o.y-(this._drawRect.height-o.height)),s.add2f(this.spacingX/2,this.spacingY/2)),this.scrollTo(s,e)}},a.scrollTo=function(t,i){var e=this;void 0===i&&(i=1),this._cancelTouchEvent();var o=t.clone();if(o.clampf(p.ZERO,this._scrollMaxOffset),null!==i){var s=this.scrollOffset.clone(),n={t:0};this._autoMoveTween=y(n).to(i,{t:1},{easing:"linear",onUpdate:function(){p.lerp(Q,s,o,n.t),e.scrollOffset.set(Q)}}).call((function(){e._movingInertia.set(0,0),e._autoMoveTween=null})).start()}else this.scrollOffset.set(o)},a.reload=function(){this._cancelTouchEvent();for(var t,i=n(this._map.values());!(t=i()).done;){var e=t.value;this._putNode(e)}this._map.clear(),this._map2.clear(),this._rects.length=0,this.layoutType===J.ListVertical?this._layoutForListVertical():this.layoutType===J.ListHorizontal?this._layoutForListHorizontal():this.layoutType===J.GridVertical?this._layoutForGridVertical():this.layoutType===J.GridHorizontal?this._layoutForGridHorizontal():this.layoutType===J.Custom&&this._layoutForCustom(),this._scrollOffset.clampf(p.ZERO,this._scrollMaxOffset)},a.reloadWithIndex=function(t){var i=this._rects[t];if(i){var e=this._map.get(i);e&&this._setCellCall&&this._setCellCall(e,i.cellIndex)}},a.getCellIndex=function(t){var i,e;return null!=(i=null==(e=this._map2.get(t))?void 0:e.cellIndex)?i:-1},a.onEnable=function(){this.node.on(T.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.on(T.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(T.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(T.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(T.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},a.onDisable=function(){this.node.off(T.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.off(T.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(T.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(T.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(T.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},a.update=function(t){this._content.setPosition(this._containerOffset.x-this._scrollOffset.x,this._containerOffset.y+this._scrollOffset.y,this._containerOffset.z),this._drawRect.x=this._scrollOffset.x,this._drawRect.y=this._scrollOffset.y;var i=Array.from(this._map.keys());it.set(this._drawRect);for(var e=0,o=i;e<o.length;e++){var s=o[e];if(!it.intersects(s)){var h=this._map.get(s);this._map.delete(s),this._map2.delete(h),this._putNode(h)}}for(var a,r=n(this._rects);!(a=r()).done;){var l=a.value;if(it.intersects(l)&&!this._map.has(l)){var c=this._getNode();c.setPosition(l.x+l.width/2,-l.y-l.height/2,0),c._uiProps.uiTransformComp.setContentSize(l.width,l.height),0!==l.priority&&(c._uiProps.uiTransformComp.priority=l.priority),this._map.set(l,c),this._map2.set(c,l);var _=l.cellIndex;this._setCellCall&&this._setCellCall(c,_)}}},a._onSizeChanged=function(){var t=this.node._uiProps.uiTransformComp.contentSize;this._content.setPosition(-t.width/2,t.height/2,0),this._containerOffset.set(this._content.position),this._drawRect.set(0,0,t.width,t.height)},a._cancelTouchEvent=function(){this._isTouching=!1,this._isScrolling=!1,this._clearAutoMoveTween(),this._clearZoomScaleTween(),this._clearMovingInertia(),this._touchNode&&(this._touchNode.setScale(1,1,1),this._touchNode=null)},a._onTouchStart=function(t){if(t.propagationStopped=!0,this._isTouching=!0,this._isScrolling=!1,this._clearAutoMoveTween(),this._clearZoomScaleTween(),this._clearMovingInertia(),this._cellClickCall)for(var i,e=t.getLocation($),o=t.windowId,s=n(this._content.children);!(i=s()).done;){var h=i.value;if(h._uiProps.uiTransformComp.hitTest(e,o)){this._touchNode=h,this._zoomScaleTween=y(h).delay(.1).to(this.zoomTime,{scale:w(1,1,1).multiplyScalar(this.zoomScale)}).start();break}}},a._onTouchMove=function(t){if(t.propagationStopped=!0,this._isTouching){var i=t.getUIDelta(W);if(this._isScrolling)this.unschedule(this._clearMovingInertia),p.copy(j,this._scrollOffset),this._addOffset(i.x,i.y),p.copy(this._movingInertia,this._scrollOffset).subtract(j),this.scheduleOnce(this._clearMovingInertia,.1);else{var e=t.getUIStartLocation($),o=t.getUILocation(tt);p.distance(e,o)>10&&(this._isScrolling=!0,this._touchNode&&(this._clearZoomScaleTween(),this._zoomScaleTween=y(this._touchNode).to(this.zoomTime,{scale:w(1,1,1)}).start(),this._touchNode=null))}}},a._onTouchEnd=function(t){var i=this;if(t.propagationStopped=!0,this._isTouching)if(this._isScrolling){if(this.unschedule(this._clearMovingInertia),this._isTouching=!1,0!==this._movingInertia.x||0!==this._movingInertia.y){var e={t:1};this._autoMoveTween=y(e).to(this.inertiaTime,{t:0},{easing:"linear",onUpdate:function(){K.set(i._movingInertia).multiplyScalar(e.t),i._addOffset(-K.x,K.y)}}).call((function(){i._movingInertia.set(0,0),i._autoMoveTween=null})).start()}}else if(this._touchNode){this._clearZoomScaleTween(),this._zoomScaleTween=y(this._touchNode).to(this.zoomTime,{scale:w(1,1,1)}).start();var o=this._map2.get(this._touchNode);o&&this._cellClickCall&&this._cellClickCall(this._touchNode,o.cellIndex),this._touchNode=null}},a._clearAutoMoveTween=function(){this._autoMoveTween&&(this._autoMoveTween.stop(),this._autoMoveTween=null)},a._clearZoomScaleTween=function(){this._zoomScaleTween&&(this._zoomScaleTween.stop(),this._zoomScaleTween=null)},a._clearMovingInertia=function(){this._movingInertia.set(0,0)},a._addOffset=function(t,i){var e=this._scrollOffset;e.add2f(-t,i),e.clampf(p.ZERO,this._scrollMaxOffset)},a._getNode=function(){var t;return(t=this._nodePool.size()>0?this._nodePool.get():C(this._cloneNode)).parent=this._content,t.active=!0,t.setScale(1,1,1),t},a._putNode=function(t){t.active=!1,this._nodePool.put(t)},a._layoutForListVertical=function(){for(var t=this.paddingTop,i=this._cloneNode._uiProps.uiTransformComp.contentSize,e=i.width,o=i.height,s=0;s<this._num;s++){var n=new B;n.width=e,n.height=o,this._setRectCall&&this._setRectCall(n,s),n.cellIndex=s;var h=(this._drawRect.width-n.width)/2;n.x=h+n.offsetX,n.y=t+n.offsetY,this._rects.push(n),t=n.y+n.height+this.spacingY}var a=0;if(this._rects.length>0){var r=this._rects[this._rects.length-1];a=r.y+r.height}this._contentSize.set(this._drawRect.width,a+this.paddingBottom),this._content._uiProps.uiTransformComp.setContentSize(this._contentSize.width,this._contentSize.height),this._scrollMaxOffset.x=0,this._scrollMaxOffset.y=Math.max(0,this._contentSize.height-this._drawRect.height)},a._layoutForListHorizontal=function(){for(var t=this.paddingLeft,i=this._cloneNode._uiProps.uiTransformComp.contentSize,e=i.width,o=i.height,s=0;s<this._num;s++){var n=new B;n.width=e,n.height=o,this._setRectCall&&this._setRectCall(n,s),n.cellIndex=s;var h=(this._drawRect.height-n.height)/2;n.x=t+n.offsetX,n.y=h+n.offsetY,this._rects.push(n),t=n.x+n.width+this.spacingX}var a=0;if(this._rects.length>0){var r=this._rects[this._rects.length-1];a=r.x+r.width}this._contentSize.set(a+this.paddingRight,this._drawRect.height),this._content._uiProps.uiTransformComp.setContentSize(this._contentSize.width,this._contentSize.height),this._scrollMaxOffset.x=Math.max(0,this._contentSize.width-this._drawRect.width),this._scrollMaxOffset.y=0},a._layoutForGridVertical=function(){for(var t=this.paddingLeft,i=this.paddingTop,e=this._cloneNode._uiProps.uiTransformComp.contentSize,o=e.width,s=e.height,n=0;n<this._num;n++){var h=new B;h.width=o,h.height=s,this._setRectCall&&this._setRectCall(h,n),h.cellIndex=n,h.x+=h.offsetX,h.y+=h.offsetY,t!==this.paddingLeft&&t+h.width>this._drawRect.width&&(i+=h.height+this.spacingY,t=this.paddingLeft),h.x=t,h.y=i,this._rects.push(h),t+=h.width+this.spacingX}var a=0;if(this._rects.length>0){var r=this._rects[this._rects.length-1];a=r.y+r.height}this._contentSize.set(this._drawRect.width,a+this.paddingBottom),this._content._uiProps.uiTransformComp.setContentSize(this._contentSize.width,this._contentSize.height),this._scrollMaxOffset.x=0,this._scrollMaxOffset.y=Math.max(0,this._contentSize.height-this._drawRect.height)},a._layoutForGridHorizontal=function(){for(var t=this.paddingLeft,i=this.paddingTop,e=this._cloneNode._uiProps.uiTransformComp.contentSize,o=e.width,s=e.height,n=0;n<this._num;n++){var h=new B;h.width=o,h.height=s,this._setRectCall&&this._setRectCall(h,n),h.cellIndex=n,h.x+=h.offsetX,h.y+=h.offsetY,i!==this.paddingTop&&i+h.height>this._drawRect.height&&(t+=h.width+this.spacingX,i=this.paddingTop),h.x=t,h.y=i,this._rects.push(h),i+=h.height+this.spacingY}var a=0;if(this._rects.length>0){var r=this._rects[this._rects.length-1];a=r.x+r.width}this._contentSize.set(a+this.paddingRight,this._drawRect.height),this._content._uiProps.uiTransformComp.setContentSize(this._contentSize.width,this._contentSize.height),this._scrollMaxOffset.x=Math.max(0,this._contentSize.width-this._drawRect.width),this._scrollMaxOffset.y=0},a._layoutForCustom=function(){for(var t=0,i=0,e=0;e<this._num;e++){var o=new B;this._setRectCall&&this._setRectCall(o,e),o.cellIndex=e,o.x+=o.offsetX,o.y+=o.offsetY,t=Math.max(o.x+o.width,t),i=Math.max(o.y+o.height,i),this._rects.push(o)}this._contentSize.set(t,i),this._content._uiProps.uiTransformComp.setContentSize(this._contentSize.width,this._contentSize.height),this._scrollMaxOffset.x=Math.max(0,this._contentSize.width-this._drawRect.width),this._scrollMaxOffset.y=Math.max(0,this._contentSize.height-this._drawRect.height)},h(e,[{key:"num",set:function(t){this._num=t,this.reload()}},{key:"contentSize",get:function(){return this._contentSize}},{key:"scrollOffset",get:function(){return this._scrollOffset}},{key:"scrollMaxOffset",get:function(){return this._scrollMaxOffset}},{key:"isTouching",get:function(){return this._isTouching}}]),e}(S)).prototype,"layoutType",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.ListVertical}}),P=e(b.prototype,"paddingTop",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=e(b.prototype,"paddingBottom",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=e(b.prototype,"paddingLeft",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=e(b.prototype,"paddingRight",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=e(b.prototype,"spacingX",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=e(b.prototype,"spacingY",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=b))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/WaitQueueController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Controller.ts"],(function(t){var r,a,n,e;return{setters:[function(t){r=t.inheritsLoose},function(t){a=t.cclegacy,n=t._decorator},function(t){e=t.Controller}],execute:function(){var o;a._RF.push({},"c51d6VymPNMsoeGJfH19CWz","WaitQueueController",void 0);var i=n.ccclass;n.property,t("WaitQueueController",i("WaitQueueController")(o=function(t){function a(){for(var r,a=arguments.length,n=new Array(a),e=0;e<a;e++)n[e]=arguments[e];return(r=t.call.apply(t,[this].concat(n))||this)._waitDatas=[],r._currentData=null,r._isLock=!1,r}r(a,t);var n=a.prototype;return n.onLoad=function(){},n.addData=function(t){this._waitDatas.push(t)},n.update=function(t){var r=this;this._waitDatas.length>0&&!this._currentData&&(this._currentData=this._waitDatas.shift()),this._currentData&&!this._isLock&&(this._isLock=!0,this._next(this._currentData,(function(){r._isLock=!1,r._currentData=null})))},a}(e))||o);a._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponUnit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodePoolMgr.ts","./Controller.ts","./Core.ts","./AudioMgr.ts","./Bundle.ts","./IGame.ts","./Model.ts","./BulletUnit.ts"],(function(t){var e,i,o,n,r,a,l,s,h,u,f,p,c,g,d,_,y,m,b,v,C,M;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,l=t._decorator,s=t.v2,h=t.Node,u=t.Prefab,f=t.Enum,p=t.Vec2,c=t.tween,g=t.AudioClip},function(t){d=t.NodePoolMgr},function(t){_=t.Controller},function(t){y=t.Core},function(t){m=t.AudioMgr},function(t){b=t.Bundle},function(t){v=t.GameState},function(t){C=t.WeaponType},function(t){M=t.BulletUnit}],execute:function(){var N,P,W,w,A,T,B,I,z,E,U;a._RF.push({},"04b83a5gz5I5Lbu9ZVwEgEI","WeaponUnit",void 0);var D=l.ccclass,x=l.property,k=s();t("WeaponUnit",(N=D("WeaponUnit"),P=x(h),W=x(h),w=x(u),A=x({type:f(C)}),N((I=e((B=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"rootNode",I,n(e)),o(e,"fireNode",z,n(e)),o(e,"bulletPrefab",E,n(e)),o(e,"type",U,n(e)),e._fight=void 0,e._time=0,e._floatAnimT=0,e}i(e,t);var a=e.prototype;return a.init=function(t){this._fight=t},a.onEnable=function(){this.fireNode.opacity=0},a.update=function(t){var e=this;if(this._fight&&y.game.state===v.Gaming){var i=this._fight.heroController.getTargetMonster();if(this._time>=0)if(0===this._time){if(i){this._time=-1;var o=i.bulletToNode.worldPosition,n=this.node.worldPosition;k.set(o.x-n.x,o.y-n.y).normalize();var r=this.node.angle,a=p.UNIT_Y.signAngle(k)/Math.PI*180,l=Math.abs(a-r)/180*.5,s=function(){var t=e._fight.heroController.getTargetMonster();t?(e._fight.heroController.subtractBulletCount()&&e._createBullet(t),e._time=e._bulletCd()):e._time=0};l<.033?(this.node.angle=a,s()):c(this.node).to(l,{angle:a}).call(s).start()}}else this._time=Math.max(0,this._time-t);if(!i){this._floatAnimT+=.5*t;var h=10*Math.sin(this._floatAnimT*Math.PI);this.rootNode.setPosition(h,0,0)}}},a._bulletCd=function(){var t=.5;return this.type===C.Weapon_1?t=.2:this.type===C.Weapon_2?t=1:this.type===C.Weapon_3?t=.1:this.type===C.Weapon_4&&(t=.3),t/=1+y.game.info.heroInfo.AtkSpeedBonus/100,t=Math.max(t,1/30)},a._createBullet=function(t){var e=d.get(this.bulletPrefab);e.parent=this._fight.bulletContainer,e.worldPosition=this.fireNode.worldPosition;var i=this._getAtkTargets(t);e.getComponent(M).init(this._fight,this.type,t.uid,(function(){for(var t,e=r(i);!(t=e()).done;){var o=t.value;o.monster.showDamage(o.info)}})),this.fireNode.opacity=255,this.unschedule(this._hideEffect),this.scheduleOnce(this._hideEffect,.05);var o="bullet-"+(this.type+1);m.inst.playOneShot(b.audio.get(o,g),.1)},a._getAtkTargets=function(t){var e=1;this.type===C.Weapon_2?e=5:this.type===C.Weapon_3?e=.7:this.type===C.Weapon_4&&(e=2);var i=[];if(i.push({monster:t,info:this._fight.heroController.hero.causeDamage(t,e)}),this.type===C.Weapon_2)for(var o,n=this._fight.heroController.getNearbyMonsters(t,60,30),a=r(n);!(o=a()).done;){var l=o.value;i.push({monster:l,info:this._fight.heroController.hero.causeDamage(l)})}return i},a._hideEffect=function(){this.fireNode.opacity=0},e}(_)).prototype,"rootNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(B.prototype,"fireNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(B.prototype,"bulletPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(B.prototype,"type",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.Weapon_1}}),T=B))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/Weight.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"16a56wbBWVE07N1FMplJgWU","Weight",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/WheelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EquipmentConfig.ts","./IConfig.ts","./DialogController.ts","./UISprite.ts","./Utils.ts","./Bundle.ts","./Core.ts","./GameUtils.ts","./LockMgr.ts","./ShowRewardDialog.ts"],(function(e){var t,n,i,a,r,o,l,s,u,c,d,h,g,f,p,m,v,w,b,y,I,C,_,B,k,q,L,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,l=e._decorator,s=e.Node,u=e.Label,c=e.Prefab,d=e.instantiate,h=e.Vec3,g=e.tween},function(e){f=e.EquipmentConfig},function(e){p=e.EquipmentGrades},function(e){m=e.DialogController},function(e){v=e.UISprite},function(e){w=e.Utils},function(e){b=e.Bundle},function(e){y=e.Core},function(e){I=e.getEnSetName,C=e.getEnEquipName,_=e.loadSpriteFrame,B=e.lookAdVideo,k=e.addEquipment,q=e.getRandomEquipmentId},function(e){L=e.LockMgr},function(e){M=e.ShowRewardDialog}],execute:function(){var D,E,R,S,N,P,F,W,z;o._RF.push({},"01a97kyJwhHJ6fgLt/ZFg0u","WheelController",void 0);var O=l.ccclass,U=l.property;e("WheelController",(D=O("WheelController"),E=U(s),R=U(u),S=U(s),D((F=t((P=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"wheel",F,a(t)),i(t,"btnLabel",W,a(t)),i(t,"btnMask",z,a(t)),t._items=[],t}n(t,e),t._getPrefab=function(){return b.game.get("prefab/ui/wheel",c)};var o=t.prototype;return o._open=function(){var e=this,t=this.wheel.children[0];t.parent=null,this._items=this._getItems();for(var n=360/this._items.length,i=0;i<this._items.length;i++){var a=this._items[i],r=d(t);r.parent=this.wheel;var o=t.getPosition(),l=n*i+0;h.rotateZ(o,o,h.ZERO,l*Math.PI/180),r.setPosition(o),r.angle=l,a.node=r,a.angle=l;var s=f.where("id",a.data.equipmentId),c=s.name,g=I(c.substring(0,2))+"\n"+C(c.substring(2));r.getChildByName("title").getComponent(u).string=a.data.active?g:"Received",r.getChildByName("glow").active=a.data.active,r.getChildByName("mask").active=!a.data.active,r.getChildByName("grade").getComponent(u).string=a.data.grade;var p=r.getChildByName("ico").getComponent(v);_(p,"texture/equipment/"+s.ico)}this.schedule((function(){e.reloadBtn()}),1),this.reloadBtn()},o.randomWheel=function(){var e=this;y.userInfo.day.wheel&&B((function(t){if(!t){var n=e._items.map((function(e){return e.data.active?e.priority:0})),i=Math.randomByWeights(n),a=e._items[i],r=360*Math.ceil(e.wheel.angle/360)+1080;r+=360-a.angle,L.lock(),g(e.wheel).to(6,{angle:r},{easing:"quadInOut"}).call((function(){e.scheduleOnce((function(){L.unlock(),e._getReward(a)}),.5)})).start()}}))},o.reloadBtn=function(){if(y.userInfo.day.wheel)this.btnLabel.string="Free",this.btnMask.active=!1;else{var e=y.userInfo.secondsMidnight;this.btnLabel.string=w.formatTime(e,"hh:mm:ss"),this.btnMask.active=!0}},o._getReward=function(e){y.userInfo.day.wheel=!1;var t=[].concat(y.userInfo.wheel);t.find((function(t){return t.i===e.data.i})).active=!1,y.userInfo.wheel=t;var n={equipments:[k(e.data.equipmentId,e.data.grade)]};M.show(n),this.close()},o._getItems=function(){var e=y.userInfo.wheel;(e.length<=0||!e.find((function(e){return"S"===e.grade})).active)&&(e=this._reloadDatas());for(var t,n=[],i=r(e);!(t=i()).done;){var a=t.value;n.push({data:a,priority:p.indexOf(a.grade)+1})}return n},o._reloadDatas=function(){for(var e=[],t=0;t<8;t++){var n=void 0;n=0===t?"S":t<=2?"A":t<=5?"B":"C",e.push({grade:n,equipmentId:q(),active:!0,i:t})}return y.userInfo.wheel=e,e},t}(m)).prototype,"wheel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(P.prototype,"btnLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(P.prototype,"btnMask",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=P))||N));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});